<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeumoCare Hospital System</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <style>
        /* MEDICAL THEME COLORS */
        :root {
            --primary-blue: #0077be;
            --dark-blue: #005a9e;
            --light-blue: #e3f2fd;
            --success: #2e7d32;
            --danger: #c62828;
            --warning: #f57c00;
            --info: #00838f;
            --gray-50: #f8f9fa;
            --gray-100: #f1f3f4;
            --gray-200: #e8eaed;
            --gray-300: #dadce0;
            --gray-400: #bdc1c6;
            --gray-500: #546e7a;
            --gray-600: #80868b;
            --gray-700: #5f6368;
            --gray-800: #3c4043;
            --gray-900: #202124;
            
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 40px rgba(0,0,0,0.15);
            
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            
            --transition: 250ms ease;
        }
        
        /* HIDE BEFORE VUE LOADS */
        [v-cloak] { display: none !important; }
        
        /* RESET & BASE */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--gray-50); color: var(--gray-900); line-height: 1.6; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; font-weight: 600; }
        
        /* UTILITIES */
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
        .text-primary { color: var(--primary-blue); }
        .text-success { color: var(--success); }
        .text-danger { color: var(--danger); }
        .text-warning { color: var(--warning); }
        .text-muted { color: var(--gray-600); }
        
        .bg-primary { background: var(--primary-blue); }
        .bg-success { background: var(--success); }
        .bg-danger { background: var(--danger); }
        .bg-warning { background: var(--warning); }
        .bg-light { background: var(--gray-50); }
        
        .shadow-sm { box-shadow: var(--shadow-sm); }
        .shadow-md { box-shadow: var(--shadow-md); }
        .shadow-lg { box-shadow: var(--shadow-lg); }
        
        .rounded-sm { border-radius: var(--radius-sm); }
        .rounded-md { border-radius: var(--radius-md); }
        .rounded-lg { border-radius: var(--radius-lg); }
        
        .transition { transition: all var(--transition); }
        
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-8 { margin-top: 2rem; }
        
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        
        .flex { display: flex; }
        .grid { display: grid; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        
        .w-100 { width: 100%; }
        
        /* BUTTONS */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-md);
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all var(--transition);
            min-height: 44px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            color: white;
            box-shadow: 0 4px 12px rgba(0, 119, 190, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 119, 190, 0.4);
        }
        
        .btn-secondary {
            background: white;
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
        }
        .btn-secondary:hover {
            background: var(--light-blue);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #1b5e20);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #b71c1c);
            color: white;
        }
        
        .btn-sm { padding: 8px 16px; font-size: 13px; min-height: 36px; }
        .btn-lg { padding: 14px 28px; font-size: 16px; min-height: 52px; }
        .btn-icon { width: 44px; height: 44px; padding: 0; border-radius: 50%; }
        
        /* BADGES */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: white;
        }
        
        .badge-primary { background: var(--primary-blue); }
        .badge-success { background: var(--success); }
        .badge-warning { background: var(--warning); }
        .badge-danger { background: var(--danger); }
        .badge-info { background: var(--info); }
        .badge-sm { padding: 2px 8px; font-size: 10px; border-radius: 10px; }
        
        /* STAFF CATEGORY BADGES */
        .badge-physician { background: var(--primary-blue); }
        .badge-attending { background: var(--dark-blue); }
        .badge-resident { background: var(--success); }
        .badge-fellow { background: var(--info); }
        .badge-nurse { background: var(--warning); }
        .badge-staff { background: var(--gray-500); }
        
        /* CARDS */
        .card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition);
            border: 1px solid var(--gray-200);
            border-left: 4px solid var(--primary-blue);
        }
        
        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--light-blue);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--gray-900);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* MODALS */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
            padding: 20px;
        }
        
        .modal-container {
            background: white;
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
        }
        
        .modal-wide { max-width: 900px; }
        .modal-xwide { max-width: 1100px; }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            border-bottom: 2px solid var(--light-blue);
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            color: white;
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .modal-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            padding: 10px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition);
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }
        
        .modal-body {
            padding: 24px;
            flex: 1;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 20px 24px;
            border-top: 2px solid var(--light-blue);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            background: var(--gray-50);
            border-radius: 0 0 var(--radius-lg) var(--radius-lg);
        }
        
        /* FLOW INDICATOR */
        .flow-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 24px;
            padding: 12px;
            background: var(--light-blue);
            border-radius: var(--radius-md);
            font-size: 12px;
            font-weight: 500;
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--gray-600);
        }
        
        .flow-step.active {
            color: var(--primary-blue);
            font-weight: 600;
        }
        
        .flow-arrow {
            color: var(--gray-400);
        }
        
        /* FORM CONTROLS */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--dark-blue);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: all var(--transition);
            background: white;
            min-height: 44px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(0, 119, 190, 0.1);
        }
        
        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            background: white;
            cursor: pointer;
            min-height: 44px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%230077be' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
        }
        
        /* TABLES */
        .table-responsive {
            overflow-x: auto;
            border-radius: var(--radius-md);
            background: white;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--light-blue);
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        
        .table thead {
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
        }
        
        .table th {
            padding: 16px;
            text-align: left;
            color: white;
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid var(--gray-200);
        }
        
        .table tbody tr {
            border-bottom: 1px solid var(--light-blue);
            transition: all var(--transition);
        }
        
        .table tbody tr:hover {
            background: var(--light-blue);
        }
        
        .table td {
            padding: 16px;
            font-size: 14px;
            color: var(--gray-700);
            vertical-align: middle;
        }
        
        /* LAYOUT */
        .app-layout {
            display: flex;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
        }
        
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--dark-blue) 0%, var(--primary-blue) 100%);
            color: white;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
        }
        
        .main-content {
            flex: 1;
            margin-left: 280px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .top-navbar {
            background: white;
            padding: 16px 32px;
            box-shadow: 0 2px 8px rgba(0, 119, 190, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 3px solid var(--light-blue);
        }
        
        .content-area {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
            background: var(--gray-50);
        }
        
        /* QUICK ACTIONS */
        .quick-actions {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            padding: 20px;
            background: white;
            border-radius: var(--radius-lg);
            flex-wrap: wrap;
            border: 1px solid var(--light-blue);
            box-shadow: var(--shadow-sm);
        }
        
        .quick-action-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 20px;
            background: white;
            border: 2px solid var(--light-blue);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition);
            font-size: 14px;
            font-weight: 600;
            min-height: 48px;
            color: var(--dark-blue);
        }
        
        .quick-action-btn:hover {
            border-color: var(--primary-blue);
            background: var(--light-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 119, 190, 0.1);
        }
        
        /* STATS CARDS */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition);
            border: 1px solid var(--light-blue);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--info));
        }
        
        .stat-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
        
        /* EMPTY STATES */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 64px 24px;
            text-align: center;
            color: var(--gray-500);
        }
        
        .empty-state-icon {
            font-size: 56px;
            margin-bottom: 20px;
            color: var(--light-blue);
            opacity: 0.5;
        }
        
        /* ACTION DROPDOWN */
        .action-dropdown {
            position: relative;
            display: inline-block;
        }
        
        .action-menu {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background: white;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            min-width: 180px;
            z-index: 1000;
            margin-top: 4px;
        }
        
        .action-menu.show {
            display: block;
        }
        
        .action-menu-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: background-color var(--transition);
            font-size: 13px;
            color: var(--gray-700);
            text-decoration: none;
            min-height: 44px;
            border-bottom: 1px solid var(--gray-100);
        }
        
        .action-menu-item:last-child {
            border-bottom: none;
        }
        
        .action-menu-item:hover {
            background-color: var(--light-blue);
        }
        
        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .main-content {
                margin-left: 0 !important;
            }
            .modal-container {
                width: 95%;
                margin: 10px;
            }
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .content-area {
                padding: 20px;
            }
            .quick-actions {
                justify-content: center;
            }
            .quick-action-btn {
                flex: 1;
                min-width: 160px;
            }
        }
        
        @media (max-width: 480px) {
            .top-navbar {
                padding: 12px 16px;
            }
            .quick-actions {
                flex-direction: column;
            }
            .quick-action-btn {
                width: 100%;
            }
        }
        
        /* CUSTOM SCROLLBAR */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--light-blue);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--primary-blue);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-blue);
        }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <!-- LOGIN SCREEN -->
        <div v-if="!currentUser" class="login-container" style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; background: linear-gradient(135deg, var(--dark-blue) 0%, var(--primary-blue) 100%);">
            <div class="login-card" style="background: white; border-radius: var(--radius-lg); padding: 48px; width: 100%; max-width: 500px; box-shadow: var(--shadow-lg);">
                <div class="login-header" style="text-align: center; margin-bottom: 40px;">
                    <div class="login-logo" style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 20px;">
                        <i class="fas fa-lungs" style="font-size: 42px; color: var(--primary-blue);"></i>
                        <span class="login-title" style="font-size: 32px; font-weight: 700; background: linear-gradient(135deg, var(--primary-blue), var(--info)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">NeumoCare</span>
                    </div>
                    <p class="login-subtitle" style="color: var(--gray-500); font-size: 16px;">Pulmonology Department Management</p>
                </div>
                
                <div class="form-group">
                    <label for="login-email" class="form-label">Email</label>
                    <input type="email" id="login-email" class="form-control" v-model="loginForm.email" placeholder="admin@neumocare.org">
                </div>

                <div class="form-group">
                    <label for="login-password" class="form-label">Password</label>
                    <input type="password" id="login-password" class="form-control" v-model="loginForm.password" placeholder="••••••••">
                </div>
                
                <button class="btn btn-primary btn-lg w-100" @click="handleLogin">
                    <i class="fas fa-sign-in-alt"></i> Login to System
                </button>
                
                <div class="text-center mt-4 text-muted">
                    <small>Demo: admin@neumocare.org / password123</small>
                </div>
            </div>
        </div>

        <!-- MAIN APPLICATION -->
        <div v-else class="app-layout">
            <!-- SIDEBAR -->
            <aside class="sidebar">
                <div class="sidebar-header" style="padding: 24px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-lungs" style="font-size: 24px;"></i>
                    <span style="font-weight: 600; font-size: 18px;">NeumoCare</span>
                </div>
                
                <nav class="sidebar-nav" style="flex: 1; padding: 20px 0; overflow-y: auto;">
                    <div class="sidebar-section" style="margin-bottom: 24px;">
                        <div class="sidebar-section-title" style="padding: 0 24px 12px; font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: rgba(255, 255, 255, 0.6); font-weight: 600;">Dashboard</div>
                        <ul class="sidebar-menu" style="list-style: none;">
                            <li class="sidebar-menu-item" style="margin: 4px 0;">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'dashboard' }" 
                                   @click.prevent="switchView('dashboard')"
                                   style="display: flex; align-items: center; gap: 14px; padding: 14px 24px; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all var(--transition); font-size: 14px; border-left: 3px solid transparent; margin: 0 12px; border-radius: 8px;">
                                    <i class="fas fa-tachometer-alt"></i>
                                    <span>Overview</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="sidebar-section" style="margin-bottom: 24px;">
                        <div class="sidebar-section-title" style="padding: 0 24px 12px; font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: rgba(255, 255, 255, 0.6); font-weight: 600;">Core Operations</div>
                        <ul class="sidebar-menu" style="list-style: none;">
                            <li class="sidebar-menu-item" style="margin: 4px 0;">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'departments' }" 
                                   @click.prevent="switchView('departments')"
                                   style="display: flex; align-items: center; gap: 14px; padding: 14px 24px; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all var(--transition); font-size: 14px; border-left: 3px solid transparent; margin: 0 12px; border-radius: 8px;">
                                    <i class="fas fa-hospital"></i>
                                    <span>Departments</span>
                                </a>
                            </li>
                            <li class="sidebar-menu-item" style="margin: 4px 0;">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'staff' }" 
                                   @click.prevent="switchView('staff')"
                                   style="display: flex; align-items: center; gap: 14px; padding: 14px 24px; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all var(--transition); font-size: 14px; border-left: 3px solid transparent; margin: 0 12px; border-radius: 8px;">
                                    <i class="fas fa-user-md"></i>
                                    <span>Medical Staff</span>
                                </a>
                            </li>
                            <li class="sidebar-menu-item" style="margin: 4px 0;">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'rotations' }" 
                                   @click.prevent="switchView('rotations')"
                                   style="display: flex; align-items: center; gap: 14px; padding: 14px 24px; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all var(--transition); font-size: 14px; border-left: 3px solid transparent; margin: 0 12px; border-radius: 8px;">
                                    <i class="fas fa-calendar-alt"></i>
                                    <span>Rotations</span>
                                </a>
                            </li>
                            <li class="sidebar-menu-item" style="margin: 4px 0;">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'oncall' }" 
                                   @click.prevent="switchView('oncall')"
                                   style="display: flex; align-items: center; gap: 14px; padding: 14px 24px; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all var(--transition); font-size: 14px; border-left: 3px solid transparent; margin: 0 12px; border-radius: 8px;">
                                    <i class="fas fa-phone-alt"></i>
                                    <span>On-call</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="sidebar-section" style="margin-bottom: 24px;">
                        <div class="sidebar-section-title" style="padding: 0 24px 12px; font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: rgba(255, 255, 255, 0.6); font-weight: 600;">Administration</div>
                        <ul class="sidebar-menu" style="list-style: none;">
                            <li class="sidebar-menu-item" style="margin: 4px 0;">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'research' }" 
                                   @click.prevent="switchView('research')"
                                   style="display: flex; align-items: center; gap: 14px; padding: 14px 24px; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all var(--transition); font-size: 14px; border-left: 3px solid transparent; margin: 0 12px; border-radius: 8px;">
                                    <i class="fas fa-flask"></i>
                                    <span>Research</span>
                                </a>
                            </li>
                            <li class="sidebar-menu-item" style="margin: 4px 0;">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'settings' }" 
                                   @click.prevent="switchView('settings')"
                                   style="display: flex; align-items: center; gap: 14px; padding: 14px 24px; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all var(--transition); font-size: 14px; border-left: 3px solid transparent; margin: 0 12px; border-radius: 8px;">
                                    <i class="fas fa-cog"></i>
                                    <span>Settings</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
                
                <div class="sidebar-footer" style="padding: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    <div class="sidebar-user" style="display: flex; align-items: center; gap: 12px;">
                        <div class="user-avatar" style="width: 44px; height: 44px; border-radius: 50%; background: linear-gradient(135deg, #4fc3f7, var(--primary-blue)); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 16px;">
                            {{ getInitials(currentUser.full_name) }}
                        </div>
                        <div class="user-info" style="flex: 1; min-width: 0;">
                            <div class="user-name" style="font-size: 14px; font-weight: 600; color: white;">{{ currentUser.full_name }}</div>
                            <div class="user-role" style="font-size: 12px; color: rgba(255, 255, 255, 0.7);">{{ currentUser.role }}</div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- MAIN CONTENT -->
            <main class="main-content">
                <!-- TOP NAVBAR -->
                <header class="top-navbar">
                    <div class="navbar-left" style="display: flex; align-items: center; gap: 20px;">
                        <div>
                            <span class="navbar-title" style="font-size: 20px; font-weight: 600; color: var(--dark-blue);">{{ getCurrentTitle() }}</span>
                        </div>
                    </div>
                    
                    <div class="navbar-right" style="display: flex; align-items: center; gap: 16px;">
                        <!-- FLOW INDICATOR -->
                        <div class="flow-indicator">
                            <div class="flow-step" :class="{ active: currentView === 'departments' }">
                                <i class="fas fa-hospital"></i>
                                <span>Departments</span>
                            </div>
                            <div class="flow-arrow"><i class="fas fa-chevron-right"></i></div>
                            <div class="flow-step" :class="{ active: currentView === 'staff' }">
                                <i class="fas fa-user-md"></i>
                                <span>Staff</span>
                            </div>
                            <div class="flow-arrow"><i class="fas fa-chevron-right"></i></div>
                            <div class="flow-step" :class="{ active: currentView === 'rotations' }">
                                <i class="fas fa-calendar-alt"></i>
                                <span>Rotations</span>
                            </div>
                            <div class="flow-arrow"><i class="fas fa-chevron-right"></i></div>
                            <div class="flow-step" :class="{ active: currentView === 'oncall' }">
                                <i class="fas fa-phone-alt"></i>
                                <span>On-call</span>
                            </div>
                        </div>
                        
                        <div class="user-menu" style="position: relative;">
                            <button class="user-menu-toggle" @click="toggleUserMenu" style="display: flex; align-items: center; gap: 8px; background: none; border: none; cursor: pointer; padding: 8px; border-radius: var(--radius-md); transition: background var(--transition); min-height: 44px;">
                                <div class="user-avatar" style="width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue)); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px;">
                                    {{ getInitials(currentUser.full_name) }}
                                </div>
                                <i class="fas fa-chevron-down" style="font-size: 12px;"></i>
                            </button>
                            
                            <div class="action-menu" v-if="userMenuOpen" style="position: absolute; right: 0; top: 100%; margin-top: 8px; min-width: 200px;">
                                <div class="action-menu-item" @click="userMenuOpen = false">
                                    <i class="fas fa-sign-out-alt"></i>
                                    <span>Logout</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- CONTENT AREA -->
                <div class="content-area">
                    <!-- DASHBOARD VIEW -->
                    <div v-if="currentView === 'dashboard'">
                        <!-- QUICK ACTIONS -->
                        <div class="quick-actions">
                            <div class="quick-action-btn" @click="showAddDepartmentModal">
                                <i class="fas fa-hospital" style="color: var(--primary-blue);"></i>
                                Add Department
                            </div>
                            <div class="quick-action-btn" @click="showAddStaffModal">
                                <i class="fas fa-user-md" style="color: var(--success);"></i>
                                Add Staff
                            </div>
                            <div class="quick-action-btn" @click="showAddRotationModal">
                                <i class="fas fa-calendar-alt" style="color: var(--info);"></i>
                                Schedule Rotation
                            </div>
                            <div class="quick-action-btn" @click="showAddOncallModal">
                                <i class="fas fa-phone-alt" style="color: var(--warning);"></i>
                                Schedule On-call
                            </div>
                        </div>

                        <!-- STATS -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 56px; height: 56px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 24px; color: white; flex-shrink: 0; box-shadow: 0 4px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));">
                                    <i class="fas fa-hospital"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" style="font-size: 32px; font-weight: 700; color: var(--dark-blue); line-height: 1; margin-bottom: 4px;">
                                        {{ stats.departments || 0 }}
                                    </div>
                                    <div class="stat-label" style="font-size: 14px; color: var(--gray-500); font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Departments</div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 56px; height: 56px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 24px; color: white; flex-shrink: 0; box-shadow: 0 4px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, var(--success), #1b5e20);">
                                    <i class="fas fa-user-md"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" style="font-size: 32px; font-weight: 700; color: var(--dark-blue); line-height: 1; margin-bottom: 4px;">
                                        {{ stats.staff || 0 }}
                                    </div>
                                    <div class="stat-label" style="font-size: 14px; color: var(--gray-500); font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Medical Staff</div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 56px; height: 56px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 24px; color: white; flex-shrink: 0; box-shadow: 0 4px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, var(--info), #006064);">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" style="font-size: 32px; font-weight: 700; color: var(--dark-blue); line-height: 1; margin-bottom: 4px;">
                                        {{ stats.activeRotations || 0 }}
                                    </div>
                                    <div class="stat-label" style="font-size: 14px; color: var(--gray-500); font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Active Rotations</div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 56px; height: 56px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 24px; color: white; flex-shrink: 0; box-shadow: 0 4px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, var(--warning), #e65100);">
                                    <i class="fas fa-phone-alt"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" style="font-size: 32px; font-weight: 700; color: var(--dark-blue); line-height: 1; margin-bottom: 4px;">
                                        {{ stats.oncallToday || 0 }}
                                    </div>
                                    <div class="stat-label" style="font-size: 14px; color: var(--gray-500); font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">On-call Today</div>
                                </div>
                            </div>
                        </div>

                        <!-- RECENT ACTIVITY -->
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-history"></i>
                                    Recent Activity
                                </div>
                            </div>
                            <div class="card-content">
                                <div v-if="recentActivity.length === 0" class="empty-state">
                                    <i class="fas fa-history empty-state-icon"></i>
                                    <div class="empty-state-title">No Recent Activity</div>
                                </div>
                                <div v-else>
                                    <div v-for="activity in recentActivity.slice(0, 5)" :key="activity.id" 
                                         style="padding: 12px; border-bottom: 1px solid var(--light-blue); display: flex; align-items: center; gap: 12px;">
                                        <div :class="`bg-${activity.color}`" style="width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px;">
                                            <i :class="activity.icon"></i>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 500; font-size: 14px;">{{ activity.message }}</div>
                                            <div style="font-size: 12px; color: var(--gray-500);">{{ activity.time }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DEPARTMENTS VIEW -->
                    <div v-if="currentView === 'departments'">
                        <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                            <div>
                                <h2 class="section-title" style="font-size: 24px; font-weight: 600; color: var(--dark-blue);">Departments</h2>
                                <p class="text-muted" style="color: var(--gray-500);">Manage departments with integrated clinical units</p>
                            </div>
                            <button class="btn btn-primary" @click="showAddDepartmentModal">
                                <i class="fas fa-plus"></i> Add Department
                            </button>
                        </div>

                        <!-- DEPARTMENTS GRID -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px;">
                            <div v-for="dept in departments" :key="dept.id" class="card">
                                <div class="card-header">
                                    <div class="card-title">
                                        <i class="fas fa-hospital"></i>
                                        {{ dept.name }}
                                    </div>
                                    <span class="badge" :class="dept.status === 'active' ? 'badge-success' : 'badge-warning'">
                                        {{ dept.status }}
                                    </span>
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <div class="text-sm text-gray-600 mb-2">Code: {{ dept.code }}</div>
                                    <div class="text-sm text-gray-600 mb-4">Units: {{ getDepartmentUnits(dept.id).length }}</div>
                                    
                                    <div class="mt-3">
                                        <div class="text-sm font-medium mb-2">Clinical Units:</div>
                                        <div class="flex flex-wrap gap-2">
                                            <span v-for="unit in getDepartmentUnits(dept.id)" :key="unit.id" 
                                                  style="background: var(--light-blue); color: var(--primary-blue); font-size: 12px; padding: 4px 12px; border-radius: 20px;">
                                                {{ unit.name }} ({{ unit.code }})
                                            </span>
                                            <span v-if="getDepartmentUnits(dept.id).length === 0" class="text-gray-500 text-sm">
                                                No units
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex gap-2" style="display: flex; gap: 8px;">
                                    <button class="btn btn-sm btn-primary flex-1" @click="editDepartment(dept)">
                                        <i class="fas fa-edit"></i> Edit
                                    </button>
                                    <button class="btn btn-sm btn-danger" @click="deleteDepartment(dept.id)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- STAFF VIEW -->
                    <div v-if="currentView === 'staff'">
                        <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                            <div>
                                <h2 class="section-title" style="font-size: 24px; font-weight: 600; color: var(--dark-blue);">Medical Staff</h2>
                                <p class="text-muted" style="color: var(--gray-500);">Physicians & Department Staff</p>
                            </div>
                            <button class="btn btn-primary" @click="showAddStaffModal">
                                <i class="fas fa-plus"></i> Add Staff
                            </button>
                        </div>

                        <!-- FILTERS -->
                        <div class="filter-bar" style="display: flex; gap: 12px; align-items: center; padding: 16px; background: white; border-radius: var(--radius-md); margin-bottom: 20px; flex-wrap: wrap; border: 1px solid var(--light-blue);">
                            <div class="filter-group" style="display: flex; flex-direction: column; gap: 4px; min-width: 180px; flex: 1;">
                                <div class="filter-label" style="font-size: 12px; color: var(--gray-500); font-weight: 500;">Category</div>
                                <select class="form-select form-select-sm" v-model="staffFilter.category">
                                    <option value="">All</option>
                                    <option value="physician">Physicians</option>
                                    <option value="staff">Other Staff</option>
                                </select>
                            </div>
                            <div class="filter-group" style="display: flex; flex-direction: column; gap: 4px; min-width: 180px; flex: 1;">
                                <div class="filter-label" style="font-size: 12px; color: var(--gray-500); font-weight: 500;">Status</div>
                                <select class="form-select form-select-sm" v-model="staffFilter.status">
                                    <option value="">All Status</option>
                                    <option value="active">Active</option>
                                    <option value="on_leave">On Leave</option>
                                </select>
                            </div>
                        </div>

                        <!-- STAFF TABLE -->
                        <div class="card">
                            <div v-if="filteredStaff.length === 0" class="empty-state">
                                <i class="fas fa-user-md empty-state-icon"></i>
                                <div class="empty-state-title">No Staff Found</div>
                                <div class="empty-state-description">
                                    Add staff to get started
                                </div>
                            </div>
                            <div v-else class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Category</th>
                                            <th>Role/Type</th>
                                            <th>Department</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="staff in filteredStaff" :key="staff.id">
                                            <td>
                                                <div class="flex items-center gap-3" style="display: flex; align-items: center; gap: 12px;">
                                                    <div class="user-avatar" style="width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue)); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px;">
                                                        {{ getInitials(staff.name) }}
                                                    </div>
                                                    <div>
                                                        <div style="font-weight: 500; color: var(--dark-blue);">{{ staff.name }}</div>
                                                        <div class="text-sm text-gray-500">{{ staff.email }}</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge" :class="staff.category === 'physician' ? 'badge-physician' : 'badge-staff'">
                                                    {{ staff.category }}
                                                </span>
                                            </td>
                                            <td>
                                                <template v-if="staff.category === 'physician'">
                                                    {{ formatPhysicianType(staff.type) }}
                                                    <div v-if="staff.type === 'resident'" class="text-xs text-gray-500 mt-1">
                                                        {{ staff.year ? `Year ${staff.year}` : '' }}
                                                    </div>
                                                </template>
                                                <template v-else>
                                                    {{ staff.role }}
                                                </template>
                                            </td>
                                            <td>{{ getDepartmentName(staff.department_id) || '—' }}</td>
                                            <td>
                                                <span class="badge" :class="staff.status === 'active' ? 'badge-success' : 'badge-warning'">
                                                    {{ staff.status }}
                                                </span>
                                            </td>
                                            <td>
                                                <div class="action-dropdown">
                                                    <button class="btn btn-sm btn-secondary" @click="toggleActionMenu($event)">
                                                        <i class="fas fa-ellipsis-v"></i>
                                                    </button>
                                                    <div class="action-menu">
                                                        <div class="action-menu-item" @click="viewStaffDetails(staff)">
                                                            <i class="fas fa-eye"></i>
                                                            <span>View</span>
                                                        </div>
                                                        <div class="action-menu-item" @click="editStaff(staff)">
                                                            <i class="fas fa-edit"></i>
                                                            <span>Edit</span>
                                                        </div>
                                                        <div class="action-menu-item danger" @click="deleteStaff(staff.id)">
                                                            <i class="fas fa-trash"></i>
                                                            <span>Delete</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ROTATIONS VIEW -->
                    <div v-if="currentView === 'rotations'">
                        <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                            <div>
                                <h2 class="section-title" style="font-size: 24px; font-weight: 600; color: var(--dark-blue);">Resident Rotations</h2>
                                <p class="text-muted" style="color: var(--gray-500);">Clinical training assignments</p>
                            </div>
                            <button class="btn btn-primary" @click="showAddRotationModal">
                                <i class="fas fa-plus"></i> Add Rotation
                            </button>
                        </div>

                        <!-- ROTATIONS TABLE -->
                        <div class="card">
                            <div v-if="rotations.length === 0" class="empty-state">
                                <i class="fas fa-calendar-alt empty-state-icon"></i>
                                <div class="empty-state-title">No Rotations</div>
                                <div class="empty-state-description">
                                    Schedule rotations for residents
                                </div>
                            </div>
                            <div v-else class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Resident</th>
                                            <th>Clinical Unit</th>
                                            <th>Dates</th>
                                            <th>Status</th>
                                            <th>Category</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="rotation in rotations" :key="rotation.id">
                                            <td>{{ getResidentName(rotation.resident_id) }}</td>
                                            <td>{{ getUnitName(rotation.unit_id) }}</td>
                                            <td>
                                                <div>{{ formatDate(rotation.start_date) }}</div>
                                                <div class="text-sm text-gray-500">to {{ formatDate(rotation.end_date) }}</div>
                                            </td>
                                            <td>
                                                <span class="badge" :class="{
                                                    'badge-success': rotation.status === 'active',
                                                    'badge-warning': rotation.status === 'upcoming',
                                                    'badge-info': rotation.status === 'completed'
                                                }">
                                                    {{ rotation.status }}
                                                </span>
                                            </td>
                                            <td>
                                                <span class="badge badge-info badge-sm">{{ rotation.category }}</span>
                                            </td>
                                            <td>
                                                <div class="action-dropdown">
                                                    <button class="btn btn-sm btn-secondary" @click="toggleActionMenu($event)">
                                                        <i class="fas fa-ellipsis-v"></i>
                                                    </button>
                                                    <div class="action-menu">
                                                        <div class="action-menu-item" @click="editRotation(rotation)">
                                                            <i class="fas fa-edit"></i>
                                                            <span>Edit</span>
                                                        </div>
                                                        <div class="action-menu-item danger" @click="deleteRotation(rotation.id)">
                                                            <i class="fas fa-trash"></i>
                                                            <span>Delete</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ON-CALL VIEW -->
                    <div v-if="currentView === 'oncall'">
                        <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                            <div>
                                <h2 class="section-title" style="font-size: 24px; font-weight: 600; color: var(--dark-blue);">On-call Schedule</h2>
                                <p class="text-muted" style="color: var(--gray-500);">Physician coverage assignments</p>
                            </div>
                            <button class="btn btn-primary" @click="showAddOncallModal">
                                <i class="fas fa-plus"></i> Schedule On-call
                            </button>
                        </div>

                        <!-- ON-CALL TABLE -->
                        <div class="card">
                            <div v-if="oncallSchedules.length === 0" class="empty-state">
                                <i class="fas fa-phone-alt empty-state-icon"></i>
                                <div class="empty-state-title">No On-call Schedules</div>
                                <div class="empty-state-description">
                                    Schedule physician on-call coverage
                                </div>
                            </div>
                            <div v-else class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Primary</th>
                                            <th>Backup</th>
                                            <th>Shift</th>
                                            <th>Type</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="schedule in oncallSchedules" :key="schedule.id">
                                            <td>{{ formatDate(schedule.date) }}</td>
                                            <td>{{ getPhysicianName(schedule.primary_id) }}</td>
                                            <td>{{ schedule.backup_id ? getPhysicianName(schedule.backup_id) : '—' }}</td>
                                            <td>{{ schedule.start_time }} - {{ schedule.end_time }}</td>
                                            <td>
                                                <span class="badge" :class="schedule.type === 'primary' ? 'badge-primary' : 'badge-info'">
                                                    {{ schedule.type }}
                                                </span>
                                            </td>
                                            <td>
                                                <div class="action-dropdown">
                                                    <button class="btn btn-sm btn-secondary" @click="toggleActionMenu($event)">
                                                        <i class="fas fa-ellipsis-v"></i>
                                                    </button>
                                                    <div class="action-menu">
                                                        <div class="action-menu-item" @click="editOncall(schedule)">
                                                            <i class="fas fa-edit"></i>
                                                            <span>Edit</span>
                                                        </div>
                                                        <div class="action-menu-item danger" @click="deleteOncall(schedule.id)">
                                                            <i class="fas fa-trash"></i>
                                                            <span>Delete</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- ============ MODALS ============ -->
            
            <!-- MODAL 1: DEPARTMENT MODAL -->
            <div v-if="departmentModal.show" class="modal-overlay">
                <div class="modal-container modal-wide">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-hospital"></i>
                            {{ departmentModal.mode === 'add' ? 'Create Department' : 'Edit Department' }}
                        </div>
                        <button class="modal-close" @click="departmentModal.show = false">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- FLOW INDICATOR INSIDE MODAL -->
                        <div class="flow-indicator">
                            <div class="flow-step active">
                                <i class="fas fa-hospital"></i>
                                <span>Department Info</span>
                            </div>
                            <div class="flow-arrow"><i class="fas fa-chevron-right"></i></div>
                            <div class="flow-step" :class="{ active: departmentModal.activeTab === 'units' }">
                                <i class="fas fa-clinic-medical"></i>
                                <span>Clinical Units</span>
                            </div>
                        </div>

                        <div class="modal-tabs" style="display: flex; border-bottom: 2px solid var(--light-blue); margin-bottom: 24px; overflow-x: auto;">
                            <button class="modal-tab" :class="{ active: departmentModal.activeTab === 'basic' }" 
                                    @click="departmentModal.activeTab = 'basic'"
                                    style="padding: 12px 24px; border: none; background: none; font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 500; color: var(--gray-600); cursor: pointer; border-bottom: 2px solid transparent; transition: all var(--transition);">
                                <i class="fas fa-info-circle"></i> Department
                            </button>
                            <button class="modal-tab" :class="{ active: departmentModal.activeTab === 'units' }" 
                                    @click="departmentModal.activeTab = 'units'"
                                    style="padding: 12px 24px; border: none; background: none; font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 500; color: var(--gray-600); cursor: pointer; border-bottom: 2px solid transparent; transition: all var(--transition);">
                                <i class="fas fa-clinic-medical"></i> Clinical Units
                            </button>
                        </div>

                        <!-- DEPARTMENT INFO TAB -->
                        <div v-if="departmentModal.activeTab === 'basic'" style="animation: fadeIn 0.3s ease;">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="form-group">
                                    <label class="form-label">Department Name *</label>
                                    <input type="text" class="form-control" v-model="departmentModal.form.name" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Department Code *</label>
                                    <input type="text" class="form-control" v-model="departmentModal.form.code" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Status</label>
                                    <select class="form-select" v-model="departmentModal.form.status">
                                        <option value="active">Active</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- CLINICAL UNITS TAB -->
                        <div v-if="departmentModal.activeTab === 'units'" style="animation: fadeIn 0.3s ease;">
                            <div class="mb-4" style="display: flex; justify-content: space-between; align-items: center;">
                                <div class="text-lg font-semibold">Clinical Units</div>
                                <button type="button" class="btn btn-primary" @click="addClinicalUnitToDepartment">
                                    <i class="fas fa-plus"></i> Add Unit
                                </button>
                            </div>
                            
                            <div v-for="(unit, index) in departmentModal.form.units" :key="index" 
                                 class="clinical-unit-entry" style="margin-bottom: 16px; padding: 16px; border: 1px solid var(--light-blue); border-radius: var(--radius-md);">
                                <div class="flex justify-between items-center mb-3">
                                    <div class="text-md font-semibold">Unit {{ index + 1 }}</div>
                                    <button type="button" class="btn btn-sm btn-danger" @click="removeClinicalUnitFromDepartment(index)" 
                                            v-if="departmentModal.form.units.length > 1">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="form-group">
                                        <label class="form-label">Unit Name *</label>
                                        <input type="text" class="form-control" v-model="unit.name" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Unit Code *</label>
                                        <input type="text" class="form-control" v-model="unit.code" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Type</label>
                                        <select class="form-select" v-model="unit.type">
                                            <option value="clinical">Clinical</option>
                                            <option value="research">Research</option>
                                            <option value="admin">Administrative</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Max Capacity</label>
                                        <input type="number" class="form-control" v-model="unit.capacity" min="1" max="50">
                                    </div>
                                </div>
                            </div>
                            
                            <div v-if="departmentModal.form.units.length === 0" class="empty-state" style="padding: 32px 0;">
                                <i class="fas fa-clinic-medical" style="font-size: 48px; color: var(--light-blue); opacity: 0.5; margin-bottom: 16px;"></i>
                                <div class="empty-state-title">No Clinical Units</div>
                                <div class="empty-state-description">
                                    Add at least one clinical unit to this department
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="departmentModal.show = false">Cancel</button>
                        <button v-if="departmentModal.activeTab === 'basic'" class="btn btn-primary" @click="departmentModal.activeTab = 'units'">
                            Continue to Units <i class="fas fa-arrow-right"></i>
                        </button>
                        <button v-else class="btn btn-primary" @click="saveDepartment" :disabled="departmentModal.form.units.length === 0">
                            <i class="fas fa-save"></i> Save Department
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 2: STAFF MODAL -->
            <div v-if="staffModal.show" class="modal-overlay">
                <div class="modal-container modal-wide">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-user-md"></i>
                            {{ staffModal.mode === 'add' ? 'Add Staff Member' : 'Edit Staff Member' }}
                        </div>
                        <button class="modal-close" @click="staffModal.show = false">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- DEPENDENCY ALERT -->
                        <div v-if="departments.length === 0" class="alert" style="background: var(--warning); color: white; padding: 12px; border-radius: var(--radius-md); margin-bottom: 16px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Create departments first to assign staff</span>
                        </div>

                        <div class="modal-tabs" style="display: flex; border-bottom: 2px solid var(--light-blue); margin-bottom: 24px; overflow-x: auto;">
                            <button class="modal-tab" :class="{ active: staffModal.activeTab === 'basic' }" 
                                    @click="staffModal.activeTab = 'basic'">
                                <i class="fas fa-user"></i> Basic Info
                            </button>
                            <button class="modal-tab" :class="{ active: staffModal.activeTab === 'category' }" 
                                    @click="staffModal.activeTab = 'category'">
                                <i class="fas fa-user-tag"></i> Category
                            </button>
                            <button v-if="staffModal.form.category === 'physician'" class="modal-tab" :class="{ active: staffModal.activeTab === 'clinical' }" 
                                    @click="staffModal.activeTab = 'clinical'">
                                <i class="fas fa-stethoscope"></i> Clinical
                            </button>
                        </div>

                        <!-- BASIC INFO TAB -->
                        <div v-if="staffModal.activeTab === 'basic'" style="animation: fadeIn 0.3s ease;">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="form-group">
                                    <label class="form-label">Full Name *</label>
                                    <input type="text" class="form-control" v-model="staffModal.form.name" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email *</label>
                                    <input type="email" class="form-control" v-model="staffModal.form.email" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Staff ID</label>
                                    <input type="text" class="form-control" v-model="staffModal.form.staff_id">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Department *</label>
                                    <select class="form-select" v-model="staffModal.form.department_id" :disabled="departments.length === 0" required>
                                        <option value="">Select Department</option>
                                        <option v-for="dept in departments" :key="dept.id" :value="dept.id">
                                            {{ dept.name }}
                                        </option>
                                    </select>
                                    <div v-if="departments.length === 0" class="text-sm text-danger mt-1">
                                        No departments available. <a href="#" @click.prevent="staffModal.show = false; switchView('departments')" style="text-decoration: underline;">Create one first</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CATEGORY TAB -->
                        <div v-if="staffModal.activeTab === 'category'" style="animation: fadeIn 0.3s ease;">
                            <div class="form-group">
                                <label class="form-label">Staff Category *</label>
                                <select class="form-select" v-model="staffModal.form.category" @change="handleStaffCategoryChange" required>
                                    <option value="">Select Category</option>
                                    <option value="physician">Physician</option>
                                    <option value="staff">Other Staff</option>
                                </select>
                            </div>

                            <!-- PHYSICIAN FIELDS -->
                            <div v-if="staffModal.form.category === 'physician'">
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="form-group">
                                        <label class="form-label">Physician Type *</label>
                                        <select class="form-select" v-model="staffModal.form.physician_type" required>
                                            <option value="">Select Type</option>
                                            <option value="attending">Attending</option>
                                            <option value="resident">Resident</option>
                                            <option value="fellow">Fellow</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group" v-if="staffModal.form.physician_type === 'resident'">
                                        <label class="form-label">Resident Year</label>
                                        <select class="form-select" v-model="staffModal.form.year">
                                            <option value="">Select Year</option>
                                            <option value="1">Year 1</option>
                                            <option value="2">Year 2</option>
                                            <option value="3">Year 3</option>
                                            <option value="4">Year 4</option>
                                            <option value="5+">Year 5+</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- OTHER STAFF FIELDS -->
                            <div v-else-if="staffModal.form.category === 'staff'">
                                <div class="form-group">
                                    <label class="form-label">Staff Role *</label>
                                    <input type="text" class="form-control" v-model="staffModal.form.role" required>
                                </div>
                            </div>
                        </div>

                        <!-- CLINICAL TAB (Physicians only) -->
                        <div v-if="staffModal.activeTab === 'clinical' && staffModal.form.category === 'physician'" style="animation: fadeIn 0.3s ease;">
                            <!-- CLINICAL UNIT SELECTION -->
                            <div class="form-group">
                                <label class="form-label">Primary Clinical Unit</label>
                                <select class="form-select" v-model="staffModal.form.clinical_unit_id">
                                    <option value="">Not assigned</option>
                                    <template v-if="staffModal.form.department_id">
                                        <option v-for="unit in getDepartmentUnits(staffModal.form.department_id)" 
                                                :key="unit.id" :value="unit.id"
                                                :disabled="unit.capacity <= getUnitCurrentResidents(unit.id)">
                                            {{ unit.name }} ({{ getUnitCurrentResidents(unit.id) }}/{{ unit.capacity }})
                                        </option>
                                    </template>
                                </select>
                                <div v-if="!staffModal.form.department_id" class="text-sm text-gray-500 mt-1">
                                    Select department first to see available units
                                </div>
                            </div>

                            <!-- SPECIALIZATION -->
                            <div class="form-group">
                                <label class="form-label">Specialization</label>
                                <div class="flex flex-wrap gap-2">
                                    <span v-for="spec in ['Pulmonology', 'Critical Care', 'Sleep Medicine', 'Allergy']" 
                                          :key="spec"
                                          class="tag" 
                                          :class="{ 'tag-selected': staffModal.form.specializations?.includes(spec) }"
                                          @click="toggleSpecialization(spec)"
                                          style="padding: 4px 12px; background: var(--light-blue); color: var(--primary-blue); border-radius: 20px; font-size: 12px; cursor: pointer; transition: all var(--transition);">
                                        {{ spec }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="staffModal.show = false">Cancel</button>
                        <button v-if="staffModal.activeTab !== 'clinical' && staffModal.form.category === 'physician'" 
                                class="btn btn-primary" @click="staffModal.activeTab = 'clinical'">
                            Continue to Clinical <i class="fas fa-arrow-right"></i>
                        </button>
                        <button v-else class="btn btn-primary" @click="saveStaff">
                            <i class="fas fa-save"></i> Save Staff
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 3: ROTATION MODAL -->
            <div v-if="rotationModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-calendar-alt"></i>
                            {{ rotationModal.mode === 'add' ? 'Schedule Rotation' : 'Edit Rotation' }}
                        </div>
                        <button class="modal-close" @click="rotationModal.show = false">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- SMART SUGGESTIONS -->
                        <div v-if="rotationModal.mode === 'add'" class="suggestion-box" style="background: var(--light-blue); padding: 12px; border-radius: var(--radius-md); margin-bottom: 16px;">
                            <div class="flex items-center gap-2" style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-lightbulb" style="color: var(--warning);"></i>
                                <span style="font-size: 13px; font-weight: 500;">Available residents with no active rotations</span>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <!-- RESIDENT SELECTION -->
                            <div class="form-group">
                                <label class="form-label">Resident *</label>
                                <select class="form-select" v-model="rotationModal.form.resident_id" required>
                                    <option value="">Select Resident</option>
                                    <option v-for="resident in availableResidents" 
                                            :key="resident.id" 
                                            :value="resident.id"
                                            :disabled="hasActiveRotation(resident.id)">
                                        {{ resident.name }}
                                        <span v-if="hasActiveRotation(resident.id)"> (Has active rotation)</span>
                                    </option>
                                </select>
                            </div>

                            <!-- CLINICAL UNIT SELECTION -->
                            <div class="form-group">
                                <label class="form-label">Clinical Unit *</label>
                                <select class="form-select" v-model="rotationModal.form.unit_id" required>
                                    <option value="">Select Unit</option>
                                    <option v-for="unit in availableUnits" 
                                            :key="unit.id" 
                                            :value="unit.id"
                                            :disabled="unit.capacity <= getUnitCurrentResidents(unit.id)">
                                        {{ unit.name }} ({{ getUnitCurrentResidents(unit.id) }}/{{ unit.capacity }})
                                    </option>
                                </select>
                            </div>

                            <!-- DATES -->
                            <div class="form-group">
                                <label class="form-label">Start Date *</label>
                                <input type="date" class="form-control" v-model="rotationModal.form.start_date" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">End Date *</label>
                                <input type="date" class="form-control" v-model="rotationModal.form.end_date" required>
                            </div>

                            <!-- CATEGORY -->
                            <div class="form-group">
                                <label class="form-label">Category *</label>
                                <select class="form-select" v-model="rotationModal.form.category" required>
                                    <option value="clinical">Clinical Rotation</option>
                                    <option value="elective">Elective</option>
                                    <option value="research">Research</option>
                                </select>
                            </div>

                            <!-- STATUS -->
                            <div class="form-group">
                                <label class="form-label">Status</label>
                                <select class="form-select" v-model="rotationModal.form.status">
                                    <option value="upcoming">Upcoming</option>
                                    <option value="active">Active</option>
                                    <option value="completed">Completed</option>
                                </select>
                            </div>
                        </div>

                        <!-- CONFLICT CHECK -->
                        <div v-if="rotationModal.form.resident_id && rotationModal.form.start_date && rotationModal.form.end_date" 
                             class="conflict-check" style="margin-top: 16px; padding: 12px; border-radius: var(--radius-md);"
                             :class="{
                                 'bg-green-50 border border-green-200': !hasRotationConflict(rotationModal.form.resident_id, rotationModal.form.start_date, rotationModal.form.end_date),
                                 'bg-red-50 border border-red-200': hasRotationConflict(rotationModal.form.resident_id, rotationModal.form.start_date, rotationModal.form.end_date)
                             }">
                            <div class="flex items-center gap-2" style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas" :class="hasRotationConflict(rotationModal.form.resident_id, rotationModal.form.start_date, rotationModal.form.end_date) ? 'fa-exclamation-triangle text-red-600' : 'fa-check-circle text-green-600'"></i>
                                <span style="font-size: 13px;">
                                    {{ hasRotationConflict(rotationModal.form.resident_id, rotationModal.form.start_date, rotationModal.form.end_date) ? 
                                       'Conflict detected with existing rotation' : 
                                       'No conflicts detected' }}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="rotationModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveRotation" 
                                :disabled="hasRotationConflict(rotationModal.form.resident_id, rotationModal.form.start_date, rotationModal.form.end_date)">
                            <i class="fas fa-save"></i> Save Rotation
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 4: ON-CALL MODAL -->
            <div v-if="oncallModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-phone-alt"></i>
                            {{ oncallModal.mode === 'add' ? 'Schedule On-call' : 'Edit On-call' }}
                        </div>
                        <button class="modal-close" @click="oncallModal.show = false">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- DATE SELECTION -->
                        <div class="form-group">
                            <label class="form-label">Date *</label>
                            <input type="date" class="form-control" v-model="oncallModal.form.date" required>
                        </div>

                        <!-- PHYSICIAN SELECTION WITH AVAILABILITY -->
                        <div class="grid grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="form-label">Primary Physician *</label>
                                <select class="form-select" v-model="oncallModal.form.primary_id" required>
                                    <option value="">Select Physician</option>
                                    <option v-for="physician in availablePhysicians" 
                                            :key="physician.id" 
                                            :value="physician.id"
                                            :disabled="isPhysicianUnavailable(physician.id, oncallModal.form.date)">
                                        {{ physician.name }}
                                        <span v-if="isPhysicianUnavailable(physician.id, oncallModal.form.date)"> (Unavailable)</span>
                                    </option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Backup Physician</label>
                                <select class="form-select" v-model="oncallModal.form.backup_id">
                                    <option value="">No Backup</option>
                                    <option v-for="physician in availablePhysicians" 
                                            :key="physician.id" 
                                            :value="physician.id"
                                            :disabled="physician.id === oncallModal.form.primary_id || isPhysicianUnavailable(physician.id, oncallModal.form.date)">
                                        {{ physician.name }}
                                        <span v-if="isPhysicianUnavailable(physician.id, oncallModal.form.date)"> (Unavailable)</span>
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- SHIFT DETAILS -->
                        <div class="grid grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="form-label">Start Time *</label>
                                <input type="time" class="form-control" v-model="oncallModal.form.start_time" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">End Time *</label>
                                <input type="time" class="form-control" v-model="oncallModal.form.end_time" required>
                            </div>
                        </div>

                        <!-- TYPE & AREA -->
                        <div class="grid grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="form-label">Shift Type</label>
                                <select class="form-select" v-model="oncallModal.form.type">
                                    <option value="primary">Primary Call</option>
                                    <option value="backup">Backup Call</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Coverage Area</label>
                                <select class="form-select" v-model="oncallModal.form.area">
                                    <option value="emergency">Emergency</option>
                                    <option value="icu">ICU</option>
                                    <option value="ward">Ward</option>
                                    <option value="all">All Areas</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="oncallModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveOncall">
                            <i class="fas fa-save"></i> Save Schedule
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 5: RESEARCH GROUP MODAL -->
            <div v-if="researchModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-flask"></i>
                            {{ researchModal.mode === 'add' ? 'Add Research Group' : 'Edit Research Group' }}
                        </div>
                        <button class="modal-close" @click="researchModal.show = false">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="form-label">Group Name *</label>
                                <input type="text" class="form-control" v-model="researchModal.form.name" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Status</label>
                                <select class="form-select" v-model="researchModal.form.status">
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                            </div>
                        </div>

                        <!-- PRINCIPAL INVESTIGATOR -->
                        <div class="form-group">
                            <label class="form-label">Principal Investigator</label>
                            <select class="form-select" v-model="researchModal.form.pi_id">
                                <option value="">Select PI</option>
                                <option v-for="staff in researchEligibleStaff" :key="staff.id" :value="staff.id">
                                    {{ staff.name }} 
                                    <span v-if="staff.degree">({{ staff.degree }})</span>
                                </option>
                            </select>
                        </div>

                        <!-- RESEARCH LINES -->
                        <div class="mt-6">
                            <div class="flex justify-between items-center mb-3">
                                <div class="text-md font-semibold">Research Lines</div>
                                <button type="button" class="btn btn-sm btn-primary" @click="addResearchLine">
                                    <i class="fas fa-plus"></i> Add Line
                                </button>
                            </div>
                            
                            <div v-for="(line, index) in researchModal.form.lines" :key="index" 
                                 class="research-line-entry" style="margin-bottom: 12px; padding: 12px; border: 1px solid var(--light-blue); border-radius: var(--radius-md);">
                                <div class="flex justify-between items-center mb-2">
                                    <div class="text-sm font-medium">Line {{ index + 1 }}</div>
                                    <button type="button" class="btn btn-xs btn-danger" @click="removeResearchLine(index)" 
                                            v-if="researchModal.form.lines.length > 1">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <input type="text" class="form-control form-control-sm" v-model="line.name" placeholder="Line name" required>
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <select class="form-select form-select-sm" v-model="line.status">
                                            <option value="active">Active</option>
                                            <option value="inactive">Inactive</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="researchModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveResearch">
                            <i class="fas fa-save"></i> Save Research Group
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 6: SETTINGS MODAL -->
            <div v-if="settingsModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-cog"></i>
                            System Settings
                        </div>
                        <button class="modal-close" @click="settingsModal.show = false">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="form-label">Hospital Name</label>
                            <input type="text" class="form-control" v-model="settingsModal.form.hospital_name">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Default Rotation Duration (weeks)</label>
                            <input type="number" class="form-control" v-model="settingsModal.form.default_rotation_weeks" min="1" max="52">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Max Residents per Unit</label>
                            <input type="number" class="form-control" v-model="settingsModal.form.max_residents_per_unit" min="1" max="50">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-check" style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" class="form-check-input" v-model="settingsModal.form.enable_email_notifications" 
                                       style="width: 20px; height: 20px; cursor: pointer; accent-color: var(--primary-blue);">
                                <span class="form-check-label" style="font-size: 14px; color: var(--gray-700); cursor: pointer; font-weight: 500;">Email Notifications</span>
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="settingsModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveSettings">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof Vue === 'undefined') {
                alert('Vue.js failed to load. Please refresh the page.');
            }
        });
    </script>
</body>
</html>
