

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeumoCare | Pulmonology Management</title>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    
<style>
  /* ============ COMPLETE IMPROVED NEUMOCARE CSS - PART 1 OF 2 ============ */

/* ============ MEDICAL BLUE THEME ============ */
:root {
    --medical-blue: #0077be;
    --medical-dark-blue: #005a9e;
    --medical-light-blue: #e3f2fd;
    --medical-teal: #00838f;
    --medical-green: #2e7d32;
    --medical-green-light: #4caf50;
    --medical-red: #c62828;
    --medical-orange: #f57c00;
    --medical-yellow: #ffb300;
    --medical-purple: #7b1fa2;
    --medical-cyan: #00bcd4;
    --medical-gray: #546e7a;
    --medical-light-gray: #f5f7fa;
    
    --primary-color: var(--medical-blue);
    --primary-dark: var(--medical-dark-blue);
    --primary-light: var(--medical-light-blue);
    --secondary-color: var(--medical-green);
    --secondary-light: var(--medical-green-light);
    --danger-color: var(--medical-red);
    --warning-color: var(--medical-orange);
    --info-color: var(--medical-teal);
    --success-color: var(--medical-green);
    
    --gray-50: #f8f9fa;
    --gray-100: #f1f3f4;
    --gray-200: #e8eaed;
    --gray-300: #dadce0;
    --gray-400: #bdc1c6;
    --gray-500: var(--medical-gray);
    --gray-600: #80868b;
    --gray-700: #5f6368;
    --gray-800: #3c4043;
    --gray-900: #202124;
    
    --shadow-xs: 0 1px 2px rgba(0,0,0,0.05);
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.12);
    --shadow-lg: 0 10px 40px rgba(0,0,0,0.15);
    --shadow-xl: 0 20px 60px rgba(0,0,0,0.2);
    --shadow-2xl: 0 30px 80px rgba(0,0,0,0.25);
    
    --border-radius-xs: 4px;
    --border-radius-sm: 8px;
    --border-radius-md: 12px;
    --border-radius-lg: 16px;
    --border-radius-xl: 20px;
    --border-radius-2xl: 24px;
    --border-radius-full: 9999px;
    
    --transition-ultra-fast: 100ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-smooth: 500ms cubic-bezier(0.4, 0, 0.2, 1);
    
    --sidebar-width: 280px;
    --sidebar-collapsed: 70px;
    --live-stats-width: 420px;
    --top-navbar-height: 72px;
    
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 1.875rem;
    --font-size-4xl: 2.25rem;
    
    --line-height-tight: 1.25;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;
    
    --letter-spacing-tighter: -0.05em;
    --letter-spacing-tight: -0.025em;
    --letter-spacing-normal: 0;
    --letter-spacing-wide: 0.025em;
    --letter-spacing-wider: 0.05em;
}

/* ============ BASE & RESET ============ */
[v-cloak] { display: none !important; opacity: 0; }
#app[v-cloak] { opacity: 0; transition: opacity var(--transition-smooth); }

* { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
    color: var(--gray-900);
    line-height: var(--line-height-normal);
    min-height: 100vh;
    scroll-behavior: smooth;
    font-size: var(--font-size-base);
    font-weight: 400;
    letter-spacing: var(--letter-spacing-normal);
}

h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; font-weight: 600; line-height: var(--line-height-tight); letter-spacing: var(--letter-spacing-tight); color: var(--gray-900); margin: 0; }
h1 { font-size: var(--font-size-4xl); font-weight: 700; margin-bottom: 1rem; }
h2 { font-size: var(--font-size-3xl); font-weight: 700; margin-bottom: 0.875rem; }
h3 { font-size: var(--font-size-2xl); font-weight: 600; margin-bottom: 0.75rem; }
h4 { font-size: var(--font-size-xl); font-weight: 600; margin-bottom: 0.625rem; }
h5 { font-size: var(--font-size-lg); font-weight: 600; margin-bottom: 0.5rem; }
h6 { font-size: var(--font-size-base); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }

p { margin-bottom: 1rem; line-height: var(--line-height-relaxed); }

/* ============ UTILITY CLASSES ============ */
.container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }

.text-primary { color: var(--primary-color); }
.text-success { color: var(--success-color); }
.text-danger { color: var(--danger-color); }
.text-warning { color: var(--warning-color); }
.text-info { color: var(--info-color); }
.text-muted { color: var(--gray-600); }
.text-white { color: #ffffff; }
.text-gray-500 { color: var(--gray-500); }
.text-gray-600 { color: var(--gray-600); }
.text-gray-700 { color: var(--gray-700); }
.text-gray-800 { color: var(--gray-800); }
.text-gray-900 { color: var(--gray-900); }
.text-blue-600 { color: var(--primary-color); }
.text-green-600 { color: var(--success-color); }
.text-red-600 { color: var(--danger-color); }
.text-orange-600 { color: var(--warning-color); }
.text-purple-600 { color: var(--medical-purple); }
.text-yellow-600 { color: var(--medical-yellow); }
.text-cyan-600 { color: var(--medical-cyan); }

.bg-primary { background: var(--primary-color); }
.bg-success { background: var(--success-color); }
.bg-danger { background: var(--danger-color); }
.bg-warning { background: var(--warning-color); }
.bg-info { background: var(--info-color); }
.bg-light { background: var(--gray-50); }
.bg-white { background: #ffffff; }
.bg-gray-50 { background: var(--gray-50); }
.bg-gray-100 { background: var(--gray-100); }
.bg-gray-200 { background: var(--gray-200); }
.bg-blue-50 { background: var(--primary-light); }
.bg-red-50 { background: rgba(198, 40, 40, 0.1); }
.bg-green-50 { background: rgba(46, 125, 50, 0.1); }
.bg-yellow-50 { background: rgba(255, 179, 0, 0.1); }
.bg-orange-50 { background: rgba(245, 124, 0, 0.1); }
.bg-purple-50 { background: rgba(123, 31, 162, 0.1); }
.bg-cyan-50 { background: rgba(0, 188, 212, 0.1); }

.bg-gradient-to-r { background-image: linear-gradient(to right, var(--tw-gradient-from), var(--tw-gradient-to)); }
.from-red-500 { --tw-gradient-from: var(--danger-color); }
.to-red-600 { --tw-gradient-to: #b71c1c; }
.from-blue-500 { --tw-gradient-from: var(--primary-color); }
.to-blue-600 { --tw-gradient-to: var(--primary-dark); }
.from-green-500 { --tw-gradient-from: var(--success-color); }
.to-green-600 { --tw-gradient-to: #1b5e20; }

.shadow-sm { box-shadow: var(--shadow-sm); }
.shadow-md { box-shadow: var(--shadow-md); }
.shadow-lg { box-shadow: var(--shadow-lg); }
.shadow-xl { box-shadow: var(--shadow-xl); }
.shadow-2xl { box-shadow: var(--shadow-2xl); }
.shadow-inner { box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.06); }

.rounded-sm { border-radius: var(--border-radius-sm); }
.rounded-md { border-radius: var(--border-radius-md); }
.rounded-lg { border-radius: var(--border-radius-lg); }
.rounded-xl { border-radius: var(--border-radius-xl); }
.rounded-2xl { border-radius: var(--border-radius-2xl); }
.rounded-full { border-radius: var(--border-radius-full); }

.border { border: 1px solid var(--gray-200); }
.border-2 { border-width: 2px; }
.border-0 { border: 0; }
.border-t { border-top: 1px solid var(--gray-200); }
.border-r { border-right: 1px solid var(--gray-200); }
.border-b { border-bottom: 1px solid var(--gray-200); }
.border-l { border-left: 1px solid var(--gray-200); }
.border-gray-200 { border-color: var(--gray-200); }
.border-gray-300 { border-color: var(--gray-300); }
.border-blue-200 { border-color: var(--primary-light); }
.border-green-200 { border-color: rgba(46, 125, 50, 0.2); }
.border-red-200 { border-color: rgba(198, 40, 40, 0.2); }
.border-yellow-200 { border-color: rgba(255, 179, 0, 0.2); }
.border-orange-200 { border-color: rgba(245, 124, 0, 0.2); }

.transition { transition: all var(--transition-normal) ease; }
.transition-fast { transition: all var(--transition-fast) ease; }
.transition-slow { transition: all var(--transition-slow) ease; }
.transition-colors { transition-property: background-color, border-color, color; transition-duration: var(--transition-normal); }

/* Spacing */
.m-0 { margin: 0; }
.m-1 { margin: 0.25rem; }
.m-2 { margin: 0.5rem; }
.m-3 { margin: 0.75rem; }
.m-4 { margin: 1rem; }
.m-5 { margin: 1.25rem; }
.m-6 { margin: 1.5rem; }
.m-8 { margin: 2rem; }
.m-10 { margin: 2.5rem; }
.m-12 { margin: 3rem; }

.mt-0 { margin-top: 0; }
.mt-1 { margin-top: 0.25rem; }
.mt-2 { margin-top: 0.5rem; }
.mt-3 { margin-top: 0.75rem; }
.mt-4 { margin-top: 1rem; }
.mt-5 { margin-top: 1.25rem; }
.mt-6 { margin-top: 1.5rem; }
.mt-8 { margin-top: 2rem; }
.mt-10 { margin-top: 2.5rem; }
.mt-12 { margin-top: 3rem; }

.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: 0.25rem; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-3 { margin-bottom: 0.75rem; }
.mb-4 { margin-bottom: 1rem; }
.mb-5 { margin-bottom: 1.25rem; }
.mb-6 { margin-bottom: 1.5rem; }
.mb-8 { margin-bottom: 2rem; }
.mb-10 { margin-bottom: 2.5rem; }
.mb-12 { margin-bottom: 3rem; }

.ml-0 { margin-left: 0; }
.ml-1 { margin-left: 0.25rem; }
.ml-2 { margin-left: 0.5rem; }
.ml-3 { margin-left: 0.75rem; }
.ml-4 { margin-left: 1rem; }
.ml-auto { margin-left: auto; }

.mr-0 { margin-right: 0; }
.mr-1 { margin-right: 0.25rem; }
.mr-2 { margin-right: 0.5rem; }
.mr-3 { margin-right: 0.75rem; }
.mr-4 { margin-right: 1rem; }

.mx-auto { margin-left: auto; margin-right: auto; }

.p-0 { padding: 0; }
.p-1 { padding: 0.25rem; }
.p-2 { padding: 0.5rem; }
.p-3 { padding: 0.75rem; }
.p-4 { padding: 1rem; }
.p-5 { padding: 1.25rem; }
.p-6 { padding: 1.5rem; }
.p-8 { padding: 2rem; }
.p-10 { padding: 2.5rem; }
.p-12 { padding: 3rem; }

.pt-0 { padding-top: 0; }
.pt-1 { padding-top: 0.25rem; }
.pt-2 { padding-top: 0.5rem; }
.pt-3 { padding-top: 0.75rem; }
.pt-4 { padding-top: 1rem; }
.pt-6 { padding-top: 1.5rem; }
.pt-8 { padding-top: 2rem; }

.pb-0 { padding-bottom: 0; }
.pb-1 { padding-bottom: 0.25rem; }
.pb-2 { padding-bottom: 0.5rem; }
.pb-3 { padding-bottom: 0.75rem; }
.pb-4 { padding-bottom: 1rem; }
.pb-6 { padding-bottom: 1.5rem; }
.pb-8 { padding-bottom: 2rem; }

.pl-0 { padding-left: 0; }
.pl-1 { padding-left: 0.25rem; }
.pl-2 { padding-left: 0.5rem; }
.pl-3 { padding-left: 0.75rem; }
.pl-4 { padding-left: 1rem; }

.pr-0 { padding-right: 0; }
.pr-1 { padding-right: 0.25rem; }
.pr-2 { padding-right: 0.5rem; }
.pr-3 { padding-right: 0.75rem; }
.pr-4 { padding-right: 1rem; }

.px-0 { padding-left: 0; padding-right: 0; }
.px-1 { padding-left: 0.25rem; padding-right: 0.25rem; }
.px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
.px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
.px-4 { padding-left: 1rem; padding-right: 1rem; }
.px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
.px-8 { padding-left: 2rem; padding-right: 2rem; }

.py-0 { padding-top: 0; padding-bottom: 0; }
.py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
.py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
.py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
.py-4 { padding-top: 1rem; padding-bottom: 1rem; }
.py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
.py-8 { padding-top: 2rem; padding-bottom: 2rem; }

/* Layout */
.flex { display: flex; }
.inline-flex { display: inline-flex; }
.grid { display: grid; }
.block { display: block; }
.inline-block { display: inline-block; }
.hidden { display: none; }

.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.items-stretch { align-items: stretch; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.justify-around { justify-content: space-around; }
.justify-evenly { justify-content: space-evenly; }
.justify-start { justify-content: flex-start; }
.justify-end { justify-content: flex-end; }
.flex-col { flex-direction: column; }
.flex-row { flex-direction: row; }
.flex-wrap { flex-wrap: wrap; }
.flex-nowrap { flex-wrap: nowrap; }
.flex-1 { flex: 1 1 0%; }
.flex-auto { flex: 1 1 auto; }
.flex-none { flex: none; }
.flex-grow { flex-grow: 1; }
.flex-shrink { flex-shrink: 1; }
.flex-shrink-0 { flex-shrink: 0; }

.gap-0 { gap: 0; }
.gap-1 { gap: 0.25rem; }
.gap-2 { gap: 0.5rem; }
.gap-3 { gap: 0.75rem; }
.gap-4 { gap: 1rem; }
.gap-5 { gap: 1.25rem; }
.gap-6 { gap: 1.5rem; }
.gap-8 { gap: 2rem; }
.gap-10 { gap: 2.5rem; }
.gap-12 { gap: 3rem; }

.space-y-4 > * + * { margin-top: 1rem; }
.space-y-2 > * + * { margin-top: 0.5rem; }

/* Grid */
.grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
.grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
.grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
.grid-cols-5 { grid-template-columns: repeat(5, minmax(0, 1fr)); }
.grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
.grid-cols-12 { grid-template-columns: repeat(12, minmax(0, 1fr)); }

.col-span-1 { grid-column: span 1 / span 1; }
.col-span-2 { grid-column: span 2 / span 2; }
.col-span-3 { grid-column: span 3 / span 3; }
.col-span-4 { grid-column: span 4 / span 4; }
.col-span-5 { grid-column: span 5 / span 5; }
.col-span-6 { grid-column: span 6 / span 6; }
.col-span-full { grid-column: 1 / -1; }

/* Typography */
.font-sans { font-family: 'Inter', sans-serif; }
.font-display { font-family: 'Poppins', sans-serif; }
.font-mono { font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace; }

.text-xs { font-size: var(--font-size-xs); }
.text-sm { font-size: var(--font-size-sm); }
.text-base { font-size: var(--font-size-base); }
.text-lg { font-size: var(--font-size-lg); }
.text-xl { font-size: var(--font-size-xl); }
.text-2xl { font-size: var(--font-size-2xl); }
.text-3xl { font-size: var(--font-size-3xl); }
.text-4xl { font-size: var(--font-size-4xl); }

.font-thin { font-weight: 100; }
.font-light { font-weight: 300; }
.font-normal { font-weight: 400; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }
.font-extrabold { font-weight: 800; }
.font-black { font-weight: 900; }

.leading-tight { line-height: var(--line-height-tight); }
.leading-normal { line-height: var(--line-height-normal); }
.leading-relaxed { line-height: var(--line-height-relaxed); }
.leading-loose { line-height: 2; }

.tracking-tighter { letter-spacing: var(--letter-spacing-tighter); }
.tracking-tight { letter-spacing: var(--letter-spacing-tight); }
.tracking-normal { letter-spacing: var(--letter-spacing-normal); }
.tracking-wide { letter-spacing: var(--letter-spacing-wide); }
.tracking-wider { letter-spacing: var(--letter-spacing-wider); }
.tracking-widest { letter-spacing: 0.1em; }

.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-justify { text-align: justify; }

.uppercase { text-transform: uppercase; }
.lowercase { text-transform: lowercase; }
.capitalize { text-transform: capitalize; }
.normal-case { text-transform: none; }

.italic { font-style: italic; }
.not-italic { font-style: normal; }

.whitespace-normal { white-space: normal; }
.whitespace-nowrap { white-space: nowrap; }
.whitespace-pre { white-space: pre; }
.whitespace-pre-line { white-space: pre-line; }
.whitespace-pre-wrap { white-space: pre-wrap; }

.break-normal { overflow-wrap: normal; word-break: normal; }
.break-words { overflow-wrap: break-word; }
.break-all { word-break: break-all; }

.truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.overflow-ellipsis { text-overflow: ellipsis; }

/* Positioning */
.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }
.static { position: static; }

.inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
.inset-y-0 { top: 0; bottom: 0; }
.inset-x-0 { left: 0; right: 0; }

.top-0 { top: 0; }
.top-1 { top: 0.25rem; }
.top-2 { top: 0.5rem; }
.top-4 { top: 1rem; }
.top-auto { top: auto; }
.top-full { top: 100%; }

.right-0 { right: 0; }
.right-1 { right: 0.25rem; }
.right-2 { right: 0.5rem; }
.right-4 { right: 1rem; }
.right-auto { right: auto; }
.right-full { right: 100%; }

.bottom-0 { bottom: 0; }
.bottom-1 { bottom: 0.25rem; }
.bottom-2 { bottom: 0.5rem; }
.bottom-4 { bottom: 1rem; }
.bottom-auto { bottom: auto; }
.bottom-full { bottom: 100%; }

.left-0 { left: 0; }
.left-1 { left: 0.25rem; }
.left-2 { left: 0.5rem; }
.left-4 { left: 1rem; }
.left-auto { left: auto; }
.left-full { left: 100%; }

.z-0 { z-index: 0; }
.z-10 { z-index: 10; }
.z-20 { z-index: 20; }
.z-30 { z-index: 30; }
.z-40 { z-index: 40; }
.z-50 { z-index: 50; }
.z-100 { z-index: 100; }
.z-1000 { z-index: 1000; }
.z-9999 { z-index: 9999; }

/* Sizing */
.w-100 { width: 100%; }
.w-auto { width: auto; }
.w-12 { width: 3rem; }
.w-24 { width: 6rem; }
.w-32 { width: 8rem; }
.w-48 { width: 12rem; }
.w-64 { width: 16rem; }
.w-96 { width: 24rem; }
.w-1\/2 { width: 50%; }
.w-1\/3 { width: 33.333333%; }
.w-2\/3 { width: 66.666667%; }
.w-1\/4 { width: 25%; }
.w-2\/4 { width: 50%; }
.w-3\/4 { width: 75%; }
.w-full { width: 100%; }
.w-screen { width: 100vw; }
.w-min { width: min-content; }
.w-max { width: max-content; }

.min-w-0 { min-width: 0; }
.min-w-full { min-width: 100%; }
.min-w-min { min-width: min-content; }
.min-w-max { min-width: max-content; }

.max-w-full { max-width: 100%; }
.max-w-screen-sm { max-width: 640px; }
.max-w-screen-md { max-width: 768px; }
.max-w-screen-lg { max-width: 1024px; }
.max-w-screen-xl { max-width: 1280px; }
.max-w-screen-2xl { max-width: 1536px; }

.h-100 { height: 100%; }
.h-auto { height: auto; }
.h-8 { height: 2rem; }
.h-12 { height: 3rem; }
.h-16 { height: 4rem; }
.h-24 { height: 6rem; }
.h-32 { height: 8rem; }
.h-48 { height: 12rem; }
.h-64 { height: 16rem; }
.h-1\/2 { height: 50%; }
.h-1\/3 { height: 33.333333%; }
.h-2\/3 { height: 66.666667%; }
.h-1\/4 { height: 25%; }
.h-2\/4 { height: 50%; }
.h-3\/4 { height: 75%; }
.h-full { height: 100%; }
.h-screen { height: 100vh; }
.h-min { height: min-content; }
.h-max { height: max-content; }

.min-h-0 { min-height: 0; }
.min-h-full { min-height: 100%; }
.min-h-screen { min-height: 100vh; }
.min-h-min { min-height: min-content; }
.min-h-max { min-height: max-content; }

.max-h-full { max-height: 100%; }
.max-h-screen { max-height: 100vh; }
.max-h-min { max-height: min-content; }
.max-h-max { max-height: max-content; }

/* Overflow */
.overflow-auto { overflow: auto; }
.overflow-hidden { overflow: hidden; }
.overflow-visible { overflow: visible; }
.overflow-scroll { overflow: scroll; }
.overflow-x-auto { overflow-x: auto; }
.overflow-y-auto { overflow-y: auto; }
.overflow-x-hidden { overflow-x: hidden; }
.overflow-y-hidden { overflow-y: hidden; }
.overflow-x-scroll { overflow-x: scroll; }
.overflow-y-scroll { overflow-y: scroll; }

.overscroll-auto { overscroll-behavior: auto; }
.overscroll-contain { overscroll-behavior: contain; }
.overscroll-none { overscroll-behavior: none; }

/* Cursor */
.cursor-auto { cursor: auto; }
.cursor-default { cursor: default; }
.cursor-pointer { cursor: pointer; }
.cursor-wait { cursor: wait; }
.cursor-text { cursor: text; }
.cursor-move { cursor: move; }
.cursor-help { cursor: help; }
.cursor-not-allowed { cursor: not-allowed; }

/* Opacity */
.opacity-0 { opacity: 0; }
.opacity-5 { opacity: 0.05; }
.opacity-10 { opacity: 0.1; }
.opacity-20 { opacity: 0.2; }
.opacity-25 { opacity: 0.25; }
.opacity-30 { opacity: 0.3; }
.opacity-40 { opacity: 0.4; }
.opacity-50 { opacity: 0.5; }
.opacity-60 { opacity: 0.6; }
.opacity-70 { opacity: 0.7; }
.opacity-75 { opacity: 0.75; }
.opacity-80 { opacity: 0.8; }
.opacity-90 { opacity: 0.9; }
.opacity-95 { opacity: 0.95; }
.opacity-100 { opacity: 1; }

/* Visibility */
.visible { visibility: visible; }
.invisible { visibility: hidden; }
.collapse { visibility: collapse; }

/* ============ END OF PART 1 ============ */
/* Continue with PART 2 for components, tables, sidebar, etc. */
    /* ============ COMPLETE IMPROVED NEUMOCARE CSS - PART 2 OF 2 ============ */
/* This file continues from PART 1 */

/* ============ IMPROVED BUTTONS - REDUCED HOVER ============ */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 14px 28px;
    border: none;
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-weight: 600;
    font-size: var(--font-size-sm);
    line-height: 1;
    cursor: pointer;
    transition: all var(--transition-fast);
    white-space: nowrap;
    min-height: 48px;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    box-shadow: var(--shadow-xs);
}

.btn:hover {
    box-shadow: var(--shadow-sm);
    opacity: 0.95;
}

.btn i { 
    font-size: var(--font-size-base); 
    width: 20px;
    text-align: center;
}

.btn-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    color: white;
}

.btn-primary:hover {
    background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
}

.btn-success {
    background: linear-gradient(135deg, var(--success-color), var(--secondary-light));
    color: white;
}

.btn-danger {
    background: linear-gradient(135deg, var(--danger-color), #b71c1c);
    color: white;
}

.btn-warning {
    background: linear-gradient(135deg, var(--warning-color), #e65100);
    color: white;
}

.btn-outline {
    background: transparent;
    border: 2px solid var(--primary-color);
    color: var(--primary-color);
    box-shadow: none;
}

.btn-outline:hover {
    background: var(--primary-color);
    color: white;
}

.btn-ghost {
    background: transparent;
    border: 2px solid transparent;
    color: var(--gray-600);
    box-shadow: none;
}

.btn-ghost:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

.btn-secondary {
    background: linear-gradient(135deg, var(--medical-teal), #00838f);
    color: white;
}

.btn-xs { padding: 8px 16px; font-size: var(--font-size-xs); min-height: 32px; }
.btn-sm { padding: 10px 20px; font-size: var(--font-size-sm); min-height: 40px; }
.btn-lg { padding: 16px 32px; font-size: var(--font-size-base); min-height: 52px; }
.btn-xl { padding: 18px 36px; font-size: var(--font-size-lg); min-height: 56px; }

.btn-icon { 
    width: 48px; 
    height: 48px; 
    padding: 0; 
    border-radius: var(--border-radius-full); 
    min-height: auto;
}

/* ============ BADGES ============ */
.badge {
    display: inline-flex;
    align-items: center;
    padding: 6px 14px;
    border-radius: 16px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    color: white;
    white-space: nowrap;
    line-height: 1.2;
}

.badge-primary { background: linear-gradient(135deg, var(--medical-blue), var(--medical-dark-blue)); }
.badge-success { background: linear-gradient(135deg, var(--medical-green), #1b5e20); }
.badge-warning { background: linear-gradient(135deg, var(--medical-orange), #e65100); }
.badge-danger { background: linear-gradient(135deg, var(--medical-red), #b71c1c); }
.badge-info { background: linear-gradient(135deg, var(--medical-teal), #006064); }
.badge-gray { background: linear-gradient(135deg, var(--medical-gray), #37474f); }
.badge-purple { background: linear-gradient(135deg, var(--medical-purple), #6a1b9a); }
.badge-cyan { background: linear-gradient(135deg, var(--medical-cyan), #0097a7); }
.badge-yellow { background: linear-gradient(135deg, var(--medical-yellow), #ff8f00); }
.badge-secondary { background: linear-gradient(135deg, var(--medical-teal), #00838f); }

.badge-normal { background: linear-gradient(135deg, var(--medical-blue), var(--medical-dark-blue)); }
.badge-high { background: linear-gradient(135deg, var(--medical-orange), #f57c00); }
.badge-urgent { background: linear-gradient(135deg, var(--medical-red), #c62828); }

/* ============ STATUS INDICATORS ============ */
.status-indicator {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    border-radius: 16px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    white-space: nowrap;
    line-height: 1.2;
}

.status-normal {
    background: linear-gradient(135deg, rgba(46, 125, 50, 0.1), rgba(46, 125, 50, 0.05));
    color: var(--medical-green);
    border: 1px solid rgba(46, 125, 50, 0.2);
}

.status-caution {
    background: linear-gradient(135deg, rgba(245, 124, 0, 0.1), rgba(245, 124, 0, 0.05));
    color: var(--medical-orange);
    border: 1px solid rgba(245, 124, 0, 0.2);
}

.status-critical {
    background: linear-gradient(135deg, rgba(198, 40, 40, 0.1), rgba(198, 40, 40, 0.05));
    color: var(--medical-red);
    border: 1px solid rgba(198, 40, 40, 0.2);
    animation: pulse 2s infinite;
}

.status-oncall {
    background: linear-gradient(135deg, rgba(0, 119, 190, 0.1), rgba(0, 119, 190, 0.05));
    color: var(--medical-blue);
    border: 1px solid rgba(0, 119, 190, 0.2);
}

.status-available {
    background: linear-gradient(135deg, rgba(0, 131, 143, 0.1), rgba(0, 131, 143, 0.05));
    color: var(--medical-teal);
    border: 1px solid rgba(0, 131, 143, 0.2);
}

.status-offline {
    background: linear-gradient(135deg, rgba(84, 110, 122, 0.1), rgba(84, 110, 122, 0.05));
    color: var(--medical-gray);
    border: 1px solid rgba(84, 110, 122, 0.2);
}

.status-planned {
    background: rgba(0, 119, 190, 0.1);
    color: var(--medical-blue);
    border: 1px solid rgba(0, 119, 190, 0.2);
}

.status-unplanned {
    background: rgba(198, 40, 40, 0.1);
    color: var(--medical-red);
    border: 1px solid rgba(198, 40, 40, 0.2);
}

.status-active {
    background: rgba(245, 124, 0, 0.1);
    color: var(--medical-orange);
    border: 1px solid rgba(245, 124, 0, 0.2);
}

.status-covered {
    background: rgba(46, 125, 50, 0.1);
    color: var(--medical-green);
    border: 1px solid rgba(46, 125, 50, 0.2);
}

.status-gap {
    background: rgba(198, 40, 40, 0.1);
    color: var(--medical-red);
    border: 1px solid rgba(198, 40, 40, 0.2);
}

.status-busy {
    background: rgba(245, 124, 0, 0.1);
    color: var(--medical-orange);
    border: 1px solid rgba(245, 124, 0, 0.2);
}

.status-scheduled {
    background: rgba(0, 119, 190, 0.1);
    color: var(--medical-blue);
    border: 1px solid rgba(0, 119, 190, 0.2);
}

.status-completed {
    background: rgba(46, 125, 50, 0.1);
    color: var(--medical-green);
    border: 1px solid rgba(46, 125, 50, 0.2);
}

.status-cancelled {
    background: rgba(84, 110, 122, 0.1);
    color: var(--medical-gray);
    border: 1px solid rgba(84, 110, 122, 0.2);
}

.status-on_leave {
    background: rgba(255, 179, 0, 0.1);
    color: var(--medical-yellow);
    border: 1px solid rgba(255, 179, 0, 0.2);
}

.status-inactive {
    background: rgba(84, 110, 122, 0.1);
    color: var(--medical-gray);
    border: 1px solid rgba(84, 110, 122, 0.2);
}

.status-upcoming {
    background: rgba(0, 188, 212, 0.1);
    color: var(--medical-cyan);
    border: 1px solid rgba(0, 188, 212, 0.2);
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

/* ============ IMPROVED CARDS - REDUCED HOVER ============ */
.card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 26px;
    box-shadow: var(--shadow-sm);
    transition: box-shadow var(--transition-fast);
    border: 1px solid var(--gray-200);
    border-left: 4px solid var(--medical-blue);
}

.card:hover {
    box-shadow: var(--shadow-md);
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 2px solid var(--medical-light-blue);
}

.card-title {
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--gray-900);
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 0;
    line-height: 1.3;
}

.card-title i {
    color: var(--medical-blue);
    font-size: var(--font-size-lg);
}

.card-subtitle {
    font-size: var(--font-size-sm);
    color: var(--gray-600);
    margin-top: 6px;
    font-weight: 400;
}

/* ============ PROFESSIONAL TABLES WITH HIERARCHY ============ */
.table-responsive {
    overflow-x: auto;
    border-radius: var(--border-radius-lg);
    background: white;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    margin: 24px 0;
}

.table-responsive::-webkit-scrollbar {
    height: 8px;
    width: 8px;
}

.table-responsive::-webkit-scrollbar-track {
    background: var(--gray-100);
    border-radius: 4px;
}

.table-responsive::-webkit-scrollbar-thumb {
    background: var(--medical-blue);
    border-radius: 4px;
}

.table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    min-width: 100%;
    font-family: 'Inter', sans-serif;
}

.table thead {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    position: sticky;
    top: 0;
    z-index: 50;
}

.table thead th {
    padding: 16px 20px;
    text-align: left;
    color: white;
    font-weight: 700;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    border-bottom: 2px solid rgba(255, 255, 255, 0.2);
    white-space: nowrap;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
}

.table thead th:first-child {
    border-top-left-radius: var(--border-radius-lg);
}

.table thead th:last-child {
    border-top-right-radius: var(--border-radius-lg);
}

.table tbody tr {
    transition: background-color var(--transition-fast);
    border-bottom: 1px solid var(--gray-100);
}

.table tbody tr:hover {
    background: rgba(0, 119, 190, 0.03);
}

.table tbody td {
    padding: 18px 20px;
    font-size: var(--font-size-sm);
    color: var(--gray-800);
    vertical-align: middle;
    border-bottom: 1px solid var(--gray-100);
    font-weight: 400;
    line-height: var(--line-height-normal);
    white-space: normal;
    word-wrap: break-word;
}

.table tbody tr:last-child td {
    border-bottom: none;
}

.table-striped tbody tr:nth-child(even) {
    background-color: var(--gray-50);
}

.table-striped tbody tr:nth-child(even):hover {
    background: rgba(0, 119, 190, 0.04);
}

/* Typography hierarchy in tables */
.table tbody td .staff-name,
.table tbody td .font-medium {
    font-weight: 600;
    font-size: var(--font-size-base);
    color: var(--gray-900);
    margin-bottom: 2px;
    display: block;
    line-height: 1.3;
}

.table tbody td .staff-email,
.table tbody td .text-xs {
    font-weight: 400;
    font-size: var(--font-size-xs);
    color: var(--gray-600);
    display: block;
    line-height: 1.4;
}

.table tbody td .staff-year {
    font-weight: 500;
    font-size: var(--font-size-xs);
    color: var(--primary-color);
    display: block;
    margin-top: 2px;
}

/* Adaptive column widths - no truncation */
.table tbody td:nth-child(1) { 
    min-width: 200px; 
    width: auto;
}

.table tbody td:nth-child(2) { 
    min-width: 120px; 
    width: auto;
}

.table tbody td:nth-child(3) { 
    min-width: 100px; 
    font-family: 'SF Mono', monospace; 
    font-size: var(--font-size-xs); 
    color: var(--gray-700);
    width: auto;
}

.table tbody td:nth-child(4) { 
    min-width: 140px; 
    width: auto;
}

.table tbody td:nth-child(5) { 
    min-width: 160px; 
    width: auto;
}

.table tbody td:nth-child(6) { 
    min-width: 100px; 
    width: auto;
}

.table tbody td:nth-child(7) { 
    min-width: 120px; 
    width: auto;
}

/* ============ TOAST NOTIFICATIONS ============ */
.toast-container {
    position: fixed;
    top: 24px;
    right: 24px;
    z-index: 99999;
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-width: 400px;
}

.toast {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 18px;
    min-width: 320px;
    max-width: 400px;
    box-shadow: var(--shadow-lg);
    border-left: 4px solid var(--medical-blue);
    animation: toastSlideIn 0.3s ease;
    display: flex;
    gap: 14px;
    align-items: flex-start;
}

@keyframes toastSlideIn {
    from { opacity: 0; transform: translateX(100%); }
    to { opacity: 1; transform: translateX(0); }
}

.toast-icon {
    font-size: 18px;
    color: var(--medical-blue);
    margin-top: 2px;
    flex-shrink: 0;
}

.toast-content {
    flex: 1;
    min-width: 0;
}

.toast-title {
    font-weight: 700;
    font-size: 14px;
    margin-bottom: 6px;
    color: var(--gray-900);
}

.toast-message {
    font-size: 13px;
    color: var(--gray-700);
    line-height: 1.5;
}

.toast-close {
    background: none;
    border: none;
    color: var(--gray-500);
    font-size: 14px;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: all var(--transition-fast);
    flex-shrink: 0;
}

.toast-close:hover { background: var(--gray-100); color: var(--gray-700); }

.toast-success { border-left-color: var(--medical-green); }
.toast-success .toast-icon { color: var(--medical-green); }
.toast-error { border-left-color: var(--medical-red); }
.toast-error .toast-icon { color: var(--medical-red); }
.toast-warning { border-left-color: var(--medical-orange); }
.toast-warning .toast-icon { color: var(--medical-orange); }
.toast-info { border-left-color: var(--medical-teal); }
.toast-info .toast-icon { color: var(--medical-teal); }

/* ============ LOGIN SCREEN ============ */
.login-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    background: linear-gradient(135deg, var(--medical-dark-blue) 0%, var(--medical-blue) 100%);
}

.login-card {
    background: white;
    border-radius: var(--border-radius-xl);
    padding: 48px;
    width: 100%;
    max-width: 440px;
    box-shadow: var(--shadow-xl);
    animation: fadeIn 0.8s ease;
    border: 1px solid var(--medical-light-blue);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.login-header {
    text-align: center;
    margin-bottom: 36px;
}

.login-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 14px;
    margin-bottom: 20px;
}

.login-logo i {
    font-size: 40px;
    color: var(--medical-blue);
}

.login-title {
    font-size: 32px;
    font-weight: 800;
    color: var(--medical-dark-blue);
    margin-bottom: 10px;
}

.login-subtitle {
    color: var(--medical-gray);
    font-size: 16px;
}

/* ============ MAIN LAYOUT ============ */
.app-layout {
    display: flex;
    min-height: 100vh;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
}

/* ============ IMPROVED SIDEBAR - MOBILE FIX ============ */
.sidebar {
    width: var(--sidebar-width);
    background: linear-gradient(180deg, #0c4160 0%, var(--medical-dark-blue) 100%);
    color: white;
    display: flex;
    flex-direction: column;
    transition: transform var(--transition-normal) cubic-bezier(0.4, 0, 0.2, 1);
    position: fixed;
    height: 100vh;
    z-index: 1000;
    box-shadow: var(--shadow-xl);
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    left: 0;
    top: 0;
}

.sidebar-collapsed {
    width: var(--sidebar-collapsed);
}

/* Mobile sidebar fix */
@media (max-width: 1024px) {
    .sidebar {
        transform: translateX(-100%);
        width: var(--sidebar-width);
    }
    
    .sidebar.mobile-open {
        transform: translateX(0);
    }
    
    .main-content {
        margin-left: 0 !important;
    }
    
    .mobile-menu-toggle {
        display: block;
    }
}

.sidebar-header {
    padding: 24px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-height: 72px;
    background: rgba(0, 0, 0, 0.1);
}

.sidebar-logo {
    display: flex;
    align-items: center;
    gap: 14px;
    font-weight: 700;
    font-size: 18px;
    color: #ffffff;
}

.sidebar-logo i {
    font-size: 24px;
    color: #4fc3f7;
}

.sidebar-toggle {
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    font-size: 14px;
    cursor: pointer;
    padding: 10px;
    border-radius: 8px;
    transition: all var(--transition-fast) ease;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sidebar-toggle:hover { 
    background: rgba(255, 255, 255, 0.25); 
}

.sidebar-nav {
    flex: 1;
    padding: 20px 0;
    overflow-y: auto;
}

.sidebar-section {
    margin-bottom: 28px;
}

.sidebar-section-title {
    padding: 0 24px 12px;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: rgba(255, 255, 255, 0.8);
    font-weight: 600;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    margin-bottom: 12px;
}

.sidebar-menu {
    list-style: none;
}

.sidebar-menu-item {
    margin: 4px 0;
}

.sidebar-menu-link {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 14px 24px;
    color: rgba(255, 255, 255, 0.95);
    text-decoration: none;
    transition: background-color var(--transition-fast);
    font-size: 13px;
    font-weight: 500;
    border-left: 4px solid transparent;
    min-height: 48px;
    margin: 0 12px;
    border-radius: 8px;
}

.sidebar-menu-link:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #ffffff;
}

.sidebar-menu-link.active {
    background: rgba(255, 255, 255, 0.15);
    color: #ffffff;
    border-left-color: #4fc3f7;
    font-weight: 600;
}

.sidebar-menu-link i {
    font-size: 16px;
    width: 24px;
    text-align: center;
    color: rgba(255, 255, 255, 0.9);
}

.sidebar-footer {
    padding: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.15);
    background: rgba(0, 0, 0, 0.15);
}

.sidebar-user {
    display: flex;
    align-items: center;
    gap: 12px;
}

.user-avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: linear-gradient(135deg, #4fc3f7, var(--primary-color));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 16px;
    flex-shrink: 0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.user-info {
    flex: 1;
    min-width: 0;
}

.user-name {
    font-size: 14px;
    font-weight: 600;
    color: #ffffff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-role {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.8);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.sidebar-collapsed .sidebar-header {
    justify-content: center;
    padding: 24px 0;
}

.sidebar-collapsed .sidebar-logo span,
.sidebar-collapsed .sidebar-section-title,
.sidebar-collapsed .sidebar-menu-link span,
.sidebar-collapsed .user-info,
.sidebar-collapsed .sidebar-toggle span {
    display: none;
}

.sidebar-collapsed .sidebar-logo,
.sidebar-collapsed .sidebar-menu-link {
    justify-content: center;
    padding: 14px 0;
    margin: 0 8px;
}

.sidebar-collapsed .sidebar-menu-link i {
    font-size: 20px;
    width: auto;
}

.sidebar-collapsed .sidebar-user {
    justify-content: center;
}

.sidebar-collapsed .user-avatar {
    width: 40px;
    height: 40px;
    font-size: 14px;
}

/* ============ MAIN CONTENT ============ */
.main-content {
    flex: 1;
    margin-left: var(--sidebar-width);
    transition: all var(--transition-normal) ease;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

.main-content-expanded {
    margin-left: var(--sidebar-collapsed);
}

/* ============ TOP NAVBAR ============ */
.top-navbar {
    background: white;
    padding: 16px 28px;
    box-shadow: 0 2px 8px rgba(0, 119, 190, 0.08);
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 2px solid var(--medical-light-blue);
    min-height: 72px;
}

.navbar-left {
    display: flex;
    align-items: center;
    gap: 16px;
}

.navbar-title {
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: var(--medical-dark-blue);
    line-height: 1.2;
}

.navbar-subtitle {
    font-size: var(--font-size-sm);
    color: var(--medical-gray);
    margin-left: 8px;
    font-weight: 500;
}

.mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 16px;
    color: var(--medical-blue);
    cursor: pointer;
    padding: 10px;
    border-radius: 6px;
    width: 40px;
    height: 40px;
}

.mobile-menu-toggle:hover { background: var(--medical-light-blue); }

.navbar-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

/* ============ SEARCH ============ */
.search-container {
    position: relative;
    width: 280px;
}

.search-box {
    position: relative;
}

.search-input {
    width: 100%;
    padding: 12px 16px 12px 44px;
    border: 2px solid var(--medical-light-blue);
    border-radius: var(--border-radius-md);
    font-size: 14px;
    transition: all var(--transition-normal) ease;
    background: white;
    font-weight: 500;
}

.search-input:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

.search-icon {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--medical-blue);
    font-size: 16px;
    pointer-events: none;
}

/* ============ CONTENT AREA ============ */
.content-area {
    flex: 1;
    padding: 24px;
    overflow-y: auto;
    background: var(--medical-light-gray);
}

/* ============ DASHBOARD ============ */
.quick-actions-bar {
    display: flex;
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 20px;
    margin-bottom: 24px;
    border: 1px solid var(--medical-light-blue);
    gap: 16px;
    flex-wrap: wrap;
    align-items: center;
}

.action-btn {
    padding: 8px 16px;
    background: var(--medical-light-blue);
    border: none;
    border-radius: var(--border-radius-md);
    color: var(--medical-blue);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    white-space: nowrap;
}

.action-btn:hover {
    background: var(--medical-blue);
    color: white;
}

.action-btn i {
    font-size: 12px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
}

.stat-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
    border-top: 4px solid var(--medical-blue);
    box-shadow: var(--shadow-sm);
    transition: box-shadow var(--transition-fast);
}

.stat-card:hover {
    box-shadow: var(--shadow-md);
}

.stat-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.stat-header i {
    font-size: 18px;
    color: var(--medical-blue);
}

.stat-header h3 {
    flex: 1;
    margin: 0;
    font-size: 15px;
    font-weight: 600;
    color: var(--medical-dark-blue);
}

.stat-main-value {
    font-size: 28px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    margin-bottom: 12px;
}

.stat-breakdown {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    border-bottom: 1px solid var(--medical-light-blue);
}

.breakdown-item:last-child { border-bottom: none; }

.breakdown-item .label {
    color: var(--medical-gray);
    font-size: 12px;
}

.breakdown-item .value {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 13px;
}

/* ============ Continue in next message with Live Stats, Modals, Forms, etc. ============ */
    /* ============ COMPLETE IMPROVED NEUMOCARE CSS - PART 3 OF 3 ============ */
/* This file continues from PART 2 */

/* ============ LIVE STATS SIDEBAR ============ */
.live-stats-sidebar {
    position: fixed;
    right: 0;
    top: 72px;
    width: var(--live-stats-width);
    height: calc(100vh - 72px);
    background: white;
    border-left: 1px solid var(--medical-light-blue);
    box-shadow: -6px 0 30px rgba(0, 0, 0, 0.1);
    z-index: 90;
    overflow-y: auto;
    padding: 32px;
    transform: translateX(100%);
    transition: transform 0.3s ease;
}

.live-stats-sidebar.open {
    transform: translateX(0);
}

.stats-toggle-btn {
    position: fixed;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    background: linear-gradient(135deg, var(--medical-blue), var(--medical-dark-blue));
    color: white;
    border: none;
    border-radius: 10px 0 0 10px;
    padding: 18px 10px;
    cursor: pointer;
    z-index: 91;
    box-shadow: -4px 0 12px rgba(0, 119, 190, 0.3);
    width: 52px;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 6px;
    transition: all var(--transition-normal);
}

.stats-toggle-btn:hover {
    background: linear-gradient(135deg, var(--medical-dark-blue), var(--medical-blue));
    width: 56px;
}

.toggle-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.live-stats-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 32px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--medical-light-blue);
}

.header-title {
    display: flex;
    align-items: center;
    gap: 14px;
}

.header-title i {
    font-size: 24px;
    color: var(--medical-blue);
}

.title-content h3 {
    font-size: 20px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    margin: 0;
    line-height: 1.2;
}

.header-subtitle {
    font-size: 13px;
    color: var(--medical-gray);
    margin-top: 4px;
}

.header-close {
    background: var(--medical-light-blue);
    border: none;
    color: var(--medical-blue);
    cursor: pointer;
    padding: 10px;
    border-radius: 8px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.header-close:hover {
    background: var(--medical-blue);
    color: white;
    transform: rotate(90deg);
}

.status-timeline {
    margin-bottom: 28px;
}

.timeline-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.timeline-header h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0;
}

.timeline-refresh {
    background: var(--medical-light-blue);
    border: none;
    color: var(--medical-blue);
    cursor: pointer;
    padding: 8px;
    border-radius: 6px;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.timeline-refresh:hover {
    background: var(--medical-blue);
    color: white;
    transform: rotate(180deg);
}

.timeline-items {
    position: relative;
    padding-left: 24px;
}

.timeline-item {
    position: relative;
    margin-bottom: 20px;
}

.timeline-marker {
    position: absolute;
    left: -24px;
    top: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.marker-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid white;
    box-shadow: 0 0 0 2px;
    z-index: 2;
}

.marker-line {
    width: 2px;
    height: calc(100% + 20px);
    background: var(--gray-300);
    margin-top: 4px;
}

.dot-active {
    background: var(--medical-green);
    box-shadow: 0 0 0 2px var(--medical-green);
}

.dot-inactive {
    background: var(--medical-gray);
    box-shadow: 0 0 0 2px var(--medical-gray);
}

.status-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 20px;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
    transition: all var(--transition-fast);
}

.status-card.current {
    border-left: 4px solid var(--medical-blue);
    background: linear-gradient(135deg, #f8fbff 0%, white 100%);
}

.status-card:hover {
    box-shadow: var(--shadow-md);
}

.status-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.status-title {
    font-size: 15px;
    font-weight: 700;
    color: var(--medical-dark-blue);
}

.status-badge {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-badge.active {
    background: linear-gradient(135deg, var(--medical-green), #2e7d32);
    color: white;
}

.status-badge.expired {
    background: linear-gradient(135deg, var(--medical-gray), #546e7a);
    color: white;
}

.status-text {
    font-size: 14px;
    color: var(--gray-800);
    line-height: 1.6;
    margin-bottom: 16px;
}

.status-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    color: var(--gray-600);
}

.status-author, .status-time {
    display: flex;
    align-items: center;
    gap: 6px;
}

.empty-state-card {
    text-align: center;
    padding: 32px 20px;
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

.empty-state-card i {
    font-size: 32px;
    color: var(--gray-400);
    margin-bottom: 12px;
}

.empty-state-card h5 {
    font-size: 15px;
    font-weight: 700;
    color: var(--gray-700);
    margin-bottom: 6px;
}

.empty-state-card p {
    font-size: 13px;
    color: var(--gray-600);
}

.metrics-dashboard {
    margin-bottom: 28px;
}

.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.dashboard-header h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0;
}

.dashboard-time {
    font-size: 12px;
    color: var(--gray-600);
    font-weight: 500;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.metric-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 20px;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
    transition: all var(--transition-fast);
}

.metric-card:hover {
    box-shadow: var(--shadow-md);
}

.metric-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
}

.metric-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: var(--medical-light-blue);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--medical-blue);
    font-size: 16px;
}

.metric-title {
    font-size: 13px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.metric-value {
    font-size: 32px;
    font-weight: 800;
    color: var(--medical-dark-blue);
    line-height: 1;
    margin-bottom: 12px;
    background: linear-gradient(135deg, var(--medical-blue), var(--medical-teal));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.metric-details {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.detail-label {
    font-size: 12px;
    color: var(--gray-600);
}

.detail-value {
    font-size: 13px;
    font-weight: 700;
    color: var(--medical-dark-blue);
}

.staff-availability {
    margin-bottom: 28px;
}

.availability-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.availability-header h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0;
}

.availability-total {
    font-size: 13px;
    font-weight: 700;
    color: var(--medical-blue);
    background: var(--medical-light-blue);
    padding: 4px 10px;
    border-radius: 12px;
}

.availability-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.availability-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 20px;
    border: 1px solid var(--gray-200);
    display: flex;
    align-items: center;
    gap: 14px;
    transition: all var(--transition-fast);
}

.availability-card:hover {
    box-shadow: var(--shadow-md);
}

.availability-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    color: white;
}

.availability-icon.attending {
    background: linear-gradient(135deg, var(--medical-blue), var(--medical-dark-blue));
}

.availability-icon.resident {
    background: linear-gradient(135deg, var(--medical-teal), #00838f);
}

.availability-icon.oncall {
    background: linear-gradient(135deg, var(--medical-orange), #f57c00);
}

.availability-icon.unavailable {
    background: linear-gradient(135deg, var(--medical-gray), #546e7a);
}

.availability-content {
    flex: 1;
}

.availability-role {
    font-size: 13px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.availability-count {
    font-size: 24px;
    font-weight: 800;
    color: var(--medical-dark-blue);
    line-height: 1;
    margin-bottom: 4px;
}

.availability-status {
    font-size: 11px;
    font-weight: 700;
    color: var(--gray-600);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-actions {
    margin-top: 28px;
}

.actions-section {
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    padding: 20px;
    border: 1px solid var(--gray-200);
}

.actions-header h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0 0 16px 0;
}

.action-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 16px;
}

.btn-action {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px;
    font-size: 13px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-expiry {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 16px;
    border-top: 1px solid var(--gray-200);
}

.expiry-header {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--gray-600);
}

.expiry-timer {
    font-size: 14px;
    font-weight: 700;
    color: var(--medical-blue);
}

/* ============ COMMUNICATIONS MODAL ============ */
.comms-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 28px;
    padding: 4px;
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
}

.comms-tab {
    flex: 1;
    padding: 16px;
    border: none;
    background: transparent;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--gray-600);
    cursor: pointer;
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.comms-tab:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

.comms-tab.active {
    background: var(--medical-blue);
    color: white;
    box-shadow: var(--shadow-sm);
}

.comms-content {
    padding: 20px;
    background: white;
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

.form-preview {
    margin-bottom: 28px;
}

.preview-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 24px;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
}

.preview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--gray-200);
}

.preview-badge {
    padding: 6px 12px;
    border-radius: 14px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: white;
}

.preview-time {
    font-size: 12px;
    color: var(--gray-600);
    font-weight: 500;
}

.preview-title {
    font-size: 20px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    margin-bottom: 12px;
}

.preview-text {
    font-size: 14px;
    color: var(--gray-800);
    line-height: 1.6;
    margin-bottom: 20px;
}

.preview-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 16px;
    border-top: 1px solid var(--gray-200);
    font-size: 12px;
    color: var(--gray-600);
}

.preview-audience, .preview-author {
    display: flex;
    align-items: center;
    gap: 6px;
}

.form-section {
    padding: 24px;
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

.form-section h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 24px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.form-group {
    margin-bottom: 24px;
}

.form-group label {
    display: block;
    margin-bottom: 10px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.required {
    color: var(--medical-red);
}

.input-with-icon, .textarea-with-icon {
    position: relative;
}

.input-with-icon i, .textarea-with-icon i {
    position: absolute;
    left: 16px;
    top: 16px;
    color: var(--medical-blue);
    font-size: 16px;
}

.input-with-icon input, .textarea-with-icon textarea {
    width: 100%;
    padding: 16px 16px 16px 48px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    transition: all var(--transition-normal) ease;
    background: white;
    color: var(--gray-900);
}

.textarea-with-icon textarea {
    min-height: 120px;
    resize: vertical;
}

.input-with-icon input:focus, .textarea-with-icon textarea:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

.char-count {
    text-align: right;
    font-size: 12px;
    color: var(--gray-600);
    margin-top: 6px;
}

.priority-selector {
    display: flex;
    gap: 8px;
}

.priority-option {
    flex: 1;
    padding: 12px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    background: white;
    color: var(--gray-600);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.priority-option:hover {
    border-color: var(--medical-blue);
    color: var(--medical-blue);
}

.priority-option.active {
    background: var(--medical-blue);
    border-color: var(--medical-blue);
    color: white;
}

.priority-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.priority-dot.normal { background: var(--medical-blue); }
.priority-dot.high { background: var(--medical-orange); }
.priority-dot.urgent { background: var(--medical-red); }

.select-with-icon {
    position: relative;
}

.select-with-icon i {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--medical-blue);
    font-size: 16px;
    pointer-events: none;
}

.select-with-icon select {
    width: 100%;
    padding: 16px 16px 16px 48px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    background: white;
    color: var(--gray-900);
    appearance: none;
    cursor: pointer;
}

.select-with-icon select:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

.quick-status {
    margin-bottom: 28px;
}

.quick-status h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
}
    /* Enhanced Profile Specific Styles */
.profile-meta-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--medical-gray);
}

.profile-meta-item i {
    width: 14px;
    color: var(--medical-blue);
}

/* Ensure presence classes exist */
.bg-green-100 { background: rgba(46, 125, 50, 0.1); }
.text-green-800 { color: #2e7d32; }
.bg-red-100 { background: rgba(198, 40, 40, 0.1); }
.text-red-800 { color: #c62828; }
.bg-yellow-100 { background: rgba(255, 179, 0, 0.1); }
.text-yellow-800 { color: #b26500; }

.badge-gray { 
    background: linear-gradient(135deg, var(--medical-gray), #37474f); 
    color: white; 
}

/* Make sure modal-tabs align with your design */
.modal-tabs {
    display: flex;
    border-bottom: 1px solid var(--medical-light-blue);
    margin-bottom: 20px;
    overflow-x: auto;
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    padding: 4px;
}

.modal-tab {
    padding: 12px 20px;
    border: none;
    background: none;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: var(--gray-600);
    cursor: pointer;
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    white-space: nowrap;
    flex: 1;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.modal-tab.active {
    background: var(--medical-blue);
    color: white;
    box-shadow: var(--shadow-sm);
}

.status-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.status-option {
    padding: 20px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    background: white;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: center;
}

.status-option:hover {
    border-color: var(--medical-blue);
    box-shadow: var(--shadow-sm);
}

.status-option.active {
    border-color: var(--medical-blue);
    background: var(--medical-light-blue);
}

.status-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 12px;
    font-size: 20px;
    color: white;
}

.status-icon.normal { background: linear-gradient(135deg, var(--medical-green), #2e7d32); }
.status-icon.busy { background: linear-gradient(135deg, var(--medical-orange), #f57c00); }
.status-icon.shortage { background: linear-gradient(135deg, var(--medical-blue), var(--medical-dark-blue)); }
.status-icon.equipment { background: linear-gradient(135deg, var(--medical-teal), #00838f); }

.status-desc {
    font-size: 13px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.update-form {
    padding: 24px;
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

.update-form h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 24px;
}

.type-selector {
    display: flex;
    gap: 8px;
    margin-bottom: 24px;
}

.type-option {
    flex: 1;
    padding: 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    background: white;
    color: var(--gray-600);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.type-option:hover {
    border-color: var(--medical-blue);
    color: var(--medical-blue);
}

.type-option.active {
    background: var(--medical-blue);
    border-color: var(--medical-blue);
    color: white;
}

.update-content {
    padding: 20px;
    background: white;
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

.highlight-inputs {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.highlight-inputs input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    transition: all var(--transition-normal) ease;
    background: white;
    color: var(--gray-900);
}

.highlight-inputs input:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

.alert-options, .area-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.alert-option, .area-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px;
    background: white;
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-300);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.alert-option:hover, .area-option:hover {
    border-color: var(--medical-blue);
    background: var(--gray-50);
}

.alert-option input, .area-option input {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--medical-blue);
}

.metric-inputs {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 16px;
}

.metric-inputs input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    transition: all var(--transition-normal) ease;
    background: white;
    color: var(--gray-900);
}

.metric-inputs input:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

.trend-selector select {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    background: white;
    color: var(--gray-900);
    appearance: none;
    cursor: pointer;
}

.trend-selector select:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

/* ============ TRAINING UNITS GRID ============ */
.training-units-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 20px;
    padding: 20px;
}

.training-unit-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
    border-left: 4px solid var(--medical-teal);
    transition: box-shadow var(--transition-fast);
    display: flex;
    flex-direction: column;
    height: 100%;
}

.training-unit-card:hover {
    box-shadow: var(--shadow-md);
}

.training-unit-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.training-unit-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
}

.training-unit-title i {
    color: var(--medical-blue);
    font-size: 16px;
}

.training-unit-stats {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 16px;
    flex-grow: 1;
}

.training-unit-stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--gray-100);
}

.training-unit-stat-row:last-child {
    border-bottom: none;
}

.training-unit-stat-label {
    font-size: 12px;
    color: var(--medical-gray);
    font-weight: 500;
}

.training-unit-stat-value {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 13px;
}

.training-unit-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 12px;
}

.training-unit-tag {
    background: var(--medical-light-blue);
    color: var(--medical-blue);
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
}

.training-unit-actions {
    display: flex;
    gap: 10px;
    margin-top: 16px;
}

.training-unit-action-btn {
    flex: 1;
    padding: 8px 12px;
    font-size: 12px;
    min-height: 36px;
}

/* ============ DEPARTMENTS GRID ============ */
.departments-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 20px;
    padding: 20px;
}

.department-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
    border-left: 4px solid var(--medical-blue);
    transition: box-shadow var(--transition-fast);
    display: flex;
    flex-direction: column;
    height: 100%;
}

.department-card:hover {
    box-shadow: var(--shadow-md);
}

.department-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.department-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
}

.department-title i {
    color: var(--medical-blue);
    font-size: 16px;
}

.department-info {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 16px;
    flex-grow: 1;
}

.department-info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--gray-100);
}

.department-info-row:last-child {
    border-bottom: none;
}

.department-info-label {
    font-size: 12px;
    color: var(--medical-gray);
    font-weight: 500;
}

.department-info-value {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 13px;
}

.department-units {
    margin-top: 12px;
}

.department-units-label {
    font-size: 12px;
    color: var(--medical-gray);
    margin-bottom: 6px;
    font-weight: 500;
}

.department-units-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.department-unit-tag {
    background: linear-gradient(135deg, rgba(0, 119, 190, 0.1), rgba(0, 119, 190, 0.05));
    color: var(--medical-blue);
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
    border: 1px solid rgba(0, 119, 190, 0.15);
}

.department-actions {
    display: flex;
    gap: 10px;
    margin-top: 16px;
}

.department-action-btn {
    flex: 1;
    padding: 8px 12px;
    font-size: 12px;
    min-height: 36px;
}

/* ============ MODALS ============ */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    backdrop-filter: blur(5px);
    animation: fadeIn 0.2s ease-out;
    padding: 24px;
}

.modal-container {
    background: white;
    border-radius: var(--border-radius-lg);
    width: 90%;
    max-width: 900px;
    max-height: 90vh;
    overflow-y: auto;
    animation: modalSlideIn 0.3s ease;
    box-shadow: var(--shadow-xl);
    border: 1px solid var(--gray-200);
    display: flex;
    flex-direction: column;
}

.modal-wide {
    max-width: 1000px;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px;
    border-bottom: 1px solid var(--medical-light-blue);
    background: linear-gradient(135deg, var(--medical-blue), var(--medical-dark-blue));
    color: white;
    border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
    position: sticky;
    top: 0;
    z-index: 10;
}

.modal-title {
    font-size: var(--font-size-xl);
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 12px;
}

.modal-title i {
    font-size: var(--font-size-xl);
    opacity: 0.9;
}

.modal-subtitle {
    font-size: var(--font-size-sm);
    font-weight: 400;
    opacity: 0.9;
    margin-top: 4px;
}

.modal-close {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: white;
    font-size: 16px;
    cursor: pointer;
    padding: 8px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close:hover { background: rgba(255, 255, 255, 0.2); }

.modal-body {
    padding: 20px;
    flex: 1;
    overflow-y: auto;
}

.modal-footer {
    padding: 20px 24px;
    border-top: 1px solid var(--medical-light-blue);
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    background: var(--gray-50);
    border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
    position: sticky;
    bottom: 0;
}

.modal-tabs {
    display: flex;
    border-bottom: 1px solid var(--medical-light-blue);
    margin-bottom: 20px;
    overflow-x: auto;
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    padding: 4px;
}

.modal-tab {
    padding: 12px 20px;
    border: none;
    background: none;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: var(--gray-600);
    cursor: pointer;
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    white-space: nowrap;
    flex: 1;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.modal-tab:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

.modal-tab.active {
    background: var(--medical-blue);
    color: white;
    box-shadow: var(--shadow-sm);
}

/* ============ FORMS ============ */
.form-control {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: var(--font-size-sm);
    transition: all var(--transition-normal) ease;
    background: white;
    color: var(--gray-900);
}

.form-control:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 3px rgba(0, 119, 190, 0.1);
}

.form-control::placeholder {
    color: var(--gray-400);
}

.form-select {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: var(--font-size-sm);
    background: white;
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%230077be' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
    background-size: 16px;
}

.form-select:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 3px rgba(0, 119, 190, 0.1);
}

.form-check {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.form-check-input {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: var(--medical-blue);
}

.form-check-label {
    font-size: 14px;
    color: var(--gray-700);
    cursor: pointer;
    font-weight: 500;
}

.form-textarea {
    min-height: 120px;
    resize: vertical;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--gray-900);
    font-size: var(--font-size-sm);
    letter-spacing: 0.01em;
}

/* ============ PROFILE COMPONENTS ============ */
.profile-header {
    display: flex;
    align-items: center;
    gap: 24px;
    margin-bottom: 24px;
    padding-bottom: 24px;
    border-bottom: 2px solid var(--medical-light-blue);
}

.profile-avatar-large {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--medical-blue), var(--medical-teal));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 32px;
    flex-shrink: 0;
    box-shadow: 0 8px 24px rgba(0, 119, 190, 0.3);
}

.profile-basic-info {
    flex: 1;
}

.profile-name {
    font-size: 28px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    margin-bottom: 4px;
}

.profile-title {
    font-size: 16px;
    color: var(--medical-gray);
    margin-bottom: 12px;
    font-weight: 500;
}

.profile-meta-row {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
    margin-bottom: 12px;
}

.profile-meta-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--medical-gray);
}

.profile-meta-item i {
    width: 14px;
    color: var(--medical-blue);
}

.profile-status-row {
    display: flex;
    gap: 12px;
    align-items: center;
}

.profile-department-badge {
    background: var(--medical-light-blue);
    color: var(--medical-blue);
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
}

.education-section {
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    padding: 20px;
    margin-bottom: 20px;
}

.education-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.education-item {
    display: flex;
    flex-direction: column;
}

.education-label {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 12px;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.education-value {
    color: var(--gray-800);
    font-weight: 500;
    font-size: 14px;
}

.dynamic-status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
}

.dynamic-status-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
}

.dynamic-status-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.dynamic-status-header i {
    font-size: 16px;
    color: var(--medical-blue);
}

.dynamic-status-header h4 {
    font-size: 14px;
    font-weight: 600;
    color: var(--medical-dark-blue);
    margin: 0;
}

.dynamic-status-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.status-data-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--gray-100);
}

.status-data-row:last-child { border-bottom: none; }

.status-data-label {
    font-weight: 500;
    color: var(--medical-gray);
    font-size: 12px;
}

.status-data-value {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 13px;
    text-align: right;
}

.status-data-value-large {
    font-size: 24px;
    font-weight: 700;
    color: var(--medical-blue);
}

.assignments-section {
    margin-top: 24px;
}

.assignments-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

.assignment-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
}

.assignment-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.assignment-header i {
    font-size: 16px;
    color: var(--medical-blue);
}

.assignment-header h4 {
    font-size: 14px;
    font-weight: 600;
    color: var(--medical-dark-blue);
    margin: 0;
}

.assignment-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.assignment-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px;
    background: var(--gray-50);
    border-radius: var(--border-radius-sm);
}

.assignment-time {
    font-size: 12px;
    font-weight: 600;
    color: var(--medical-blue);
}

.assignment-details {
    font-size: 13px;
    color: var(--gray-800);
}

/* ============ REASON OPTIONS ============ */
.reason-option {
    border: 2px solid var(--gray-200);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-fast);
    background: white;
}

.reason-option:hover {
    border-color: var(--medical-blue);
    background: var(--medical-light-blue);
}

.reason-selected {
    border-color: var(--medical-blue);
    background: var(--medical-light-blue);
    box-shadow: 0 0 0 1px var(--medical-blue);
}

/* ============ EMPTY STATES ============ */
.empty-state {
    text-align: center;
    padding: 48px 24px;
    color: var(--gray-600);
}

.empty-state-icon {
    font-size: 48px;
    color: var(--gray-400);
    margin-bottom: 16px;
    display: block;
}

.empty-state-title {
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--gray-700);
    margin-bottom: 8px;
}

.empty-state-description {
    font-size: var(--font-size-sm);
    color: var(--gray-600);
    font-weight: 400;
}

/* ============ RESPONSIVE DESIGN ============ */
@media (max-width: 1200px) {
    .metrics-grid { grid-template-columns: 1fr; }
    .availability-grid { grid-template-columns: 1fr; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .dynamic-status-grid { grid-template-columns: repeat(2, 1fr); }
    .training-units-grid { grid-template-columns: repeat(2, 1fr); }
    .departments-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 1024px) {
    .live-stats-sidebar { 
        width: 100%; 
        height: 80vh; 
        top: 20vh;
        border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
    }
    .stats-toggle-btn { display: none; }
    .search-container { width: 200px; }
    .modal-container { width: 95%; margin: 10px; }
    .stats-grid { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
    h1 { font-size: var(--font-size-3xl); }
    h2 { font-size: var(--font-size-2xl); }
    h3 { font-size: var(--font-size-xl); }
    h4 { font-size: var(--font-size-lg); }
    
    .navbar-title { font-size: var(--font-size-lg); }
    .modal-title { font-size: var(--font-size-lg); }
    .card-title { font-size: var(--font-size-base); }
    
    .btn {
        padding: 12px 20px;
        font-size: var(--font-size-xs);
        min-height: 44px;
    }
    
    .card {
        padding: 20px;
    }
    
    .modal-header,
    .modal-body,
    .modal-footer {
        padding: 16px;
    }
    
    .comms-content { padding: 16px; }
    .form-row { grid-template-columns: 1fr; gap: 16px; }
    .status-grid { grid-template-columns: 1fr; }
    .type-selector { flex-direction: column; }
    .highlight-inputs, .alert-options, .area-options, .metric-inputs { grid-template-columns: 1fr; }
    .priority-selector { flex-direction: column; }
    .action-buttons { grid-template-columns: 1fr; }
    .top-navbar { padding: 12px 16px; }
    .navbar-right { flex-direction: column; align-items: flex-end; }
    .search-container { width: 100%; max-width: 200px; }
    .content-area { padding: 20px; }
    .dynamic-status-grid { grid-template-columns: 1fr; }
    .assignments-grid { grid-template-columns: 1fr; }
    .metric-inputs-grid { grid-template-columns: 1fr; }
    .training-units-grid { grid-template-columns: 1fr; }
    .departments-grid { grid-template-columns: 1fr; }
    
    .table {
        min-width: 800px;
    }
    
    .table thead th {
        padding: 12px 16px;
        font-size: 10px;
    }
    
    .table tbody td {
        padding: 14px 16px;
        font-size: var(--font-size-sm);
    }
}

@media (max-width: 480px) {
    .live-stats-sidebar { padding: 20px; }
    .modal-container { width: 95%; margin: 10px; }
    .comms-tabs { flex-direction: column; }
    .login-card { padding: 32px 20px; }
    .modal-container { width: 100%; margin: 0; border-radius: 0; max-height: 100vh; }
    .modal-overlay { padding: 0; }
    .top-navbar { padding: 12px 16px; }
    .navbar-title { font-size: 16px; }
    .profile-header { flex-direction: column; text-align: center; gap: 16px; }
    .profile-meta-row { justify-content: center; }
    .table-responsive {
        border-radius: var(--border-radius-sm);
    }
}

/* ============ CUSTOM SCROLLBAR ============ */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--medical-light-blue); border-radius: 4px; }
::-webkit-scrollbar-thumb { background: var(--medical-blue); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--medical-dark-blue); }

/* ============ ACCESSIBILITY ============ */
.btn:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible, .sidebar-menu-link:focus-visible, .modal-close:focus-visible {
    outline: 3px solid var(--primary-color);
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(0, 119, 190, 0.3);
}

:disabled, .disabled { opacity: 0.5; cursor: not-allowed; pointer-events: none; user-select: none; }
.btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none !important; box-shadow: none !important; }

.form-control.error { border-color: var(--danger-color); background-color: rgba(198, 40, 40, 0.05); box-shadow: 0 0 0 3px rgba(198, 40, 40, 0.1); }
.form-control.error:focus { border-color: var(--danger-color); box-shadow: 0 0 0 4px rgba(198, 40, 40, 0.2); }
.error-message { color: var(--danger-color); font-size: var(--font-size-xs); font-weight: 500; margin-top: 6px; display: flex; align-items: center; gap: 6px; }

/* ============ PRINT STYLES ============ */
@media print {
    .sidebar, .top-navbar, .stats-toggle-btn, .btn, .action-btn, .modal-overlay, .toast-container, .mobile-menu-toggle { display: none !important; }
    .main-content { margin-left: 0 !important; }
    .live-stats-sidebar { display: none !important; }
    .card { break-inside: avoid; box-shadow: none; border: 1px solid #ddd; border-left: 3px solid #0077be; }
    .table-responsive { box-shadow: none; border: 1px solid #ddd; overflow: visible; }
    .table { min-width: auto; }
    a[href]:after { content: " (" attr(href) ")"; font-size: 90%; }
    .btn-primary, .btn-outline, .btn-ghost { background: none !important; color: black !important; border: 1px solid #ddd !important; }
}

/* ============ REDUCED MOTION ============ */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* ============ IOS FIXES ============ */
@media screen and (max-width: 768px) {
    input, select, textarea { font-size: 16px; }
}

/* ============ CHROME AUTOFILL ============ */
input:-webkit-autofill, input:-webkit-autofill:hover, input:-webkit-autofill:focus,
textarea:-webkit-autofill, textarea:-webkit-autofill:hover, textarea:-webkit-autofill:focus,
select:-webkit-autofill, select:-webkit-autofill:hover, select:-webkit-autofill:focus {
    -webkit-text-fill-color: var(--gray-900);
    -webkit-box-shadow: 0 0 0px 1000px white inset;
    transition: background-color 5000s ease-in-out 0s;
}

/* ============ IMAGES & ICONS ============ */
img { max-width: 100%; height: auto; }
svg { fill: currentColor; }

/* ============ FINAL POLISH ============ */
body { text-rendering: optimizeLegibility; font-feature-settings: "kern" 1, "liga" 1, "calt" 1; }
.live-stats-sidebar { scrollbar-width: thin; scrollbar-color: var(--primary-color) transparent; }

/* ============ END OF PART 3 - COMPLETE! ============ */
    /* ============ COMPLETE IMPROVED NEUMOCARE CSS - PART 4 OF 4 - FINAL ============ */
/* This file continues from PART 3 */

/* ============ COMMUNICATIONS MODAL ============ */
.comms-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 28px;
    padding: 4px;
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
}

.comms-tab {
    flex: 1;
    padding: 16px;
    border: none;
    background: transparent;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--gray-600);
    cursor: pointer;
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.comms-tab:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

.comms-tab.active {
    background: var(--medical-blue);
    color: white;
    box-shadow: var(--shadow-sm);
}

.comms-content {
    padding: 20px;
    background: white;
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

/* ============ PREVIEW CARDS ============ */
.preview-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 24px;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
    margin-bottom: 24px;
    border-left: 4px solid var(--medical-blue);
}

.preview-card.planned {
    border-left-color: var(--medical-blue);
    background: linear-gradient(135deg, rgba(0, 119, 190, 0.03), rgba(0, 119, 190, 0.08));
}

.preview-card.unplanned {
    border-left-color: var(--medical-red);
    background: linear-gradient(135deg, rgba(198, 40, 40, 0.03), rgba(198, 40, 40, 0.08));
}

.preview-card.active {
    border-left-color: var(--medical-orange);
    background: linear-gradient(135deg, rgba(245, 124, 0, 0.03), rgba(245, 124, 0, 0.08));
}

.preview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--gray-200);
}

.preview-badge {
    padding: 6px 12px;
    border-radius: 14px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: white;
}

.preview-time {
    font-size: 12px;
    color: var(--gray-600);
    font-weight: 500;
}

.preview-title {
    font-size: 20px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    margin-bottom: 12px;
}

.preview-text {
    font-size: 14px;
    color: var(--gray-800);
    line-height: 1.6;
    margin-bottom: 20px;
}

.preview-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 16px;
    border-top: 1px solid var(--gray-200);
    font-size: 12px;
    color: var(--gray-600);
}

.preview-audience, 
.preview-author {
    display: flex;
    align-items: center;
    gap: 6px;
}

/* ============ QUICK STATUS ============ */
.quick-status {
    margin-bottom: 28px;
}

.quick-status h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
}

.status-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.status-option {
    padding: 20px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    background: white;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: center;
}

.status-option:hover {
    border-color: var(--medical-blue);
    box-shadow: var(--shadow-sm);
}

.status-option.active {
    border-color: var(--medical-blue);
    background: var(--medical-light-blue);
}

.status-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 12px;
    font-size: 20px;
    color: white;
}

.status-icon.normal { background: linear-gradient(135deg, var(--medical-green), #2e7d32); }
.status-icon.busy { background: linear-gradient(135deg, var(--medical-orange), #f57c00); }
.status-icon.shortage { background: linear-gradient(135deg, var(--medical-blue), var(--medical-dark-blue)); }
.status-icon.equipment { background: linear-gradient(135deg, var(--medical-teal), #00838f); }

.status-desc {
    font-size: 13px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* ============ UPDATE FORM ============ */
.update-form {
    padding: 24px;
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

.update-form h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 24px;
}

.type-selector {
    display: flex;
    gap: 8px;
    margin-bottom: 24px;
}

.type-option {
    flex: 1;
    padding: 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    background: white;
    color: var(--gray-600);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.type-option:hover {
    border-color: var(--medical-blue);
    color: var(--medical-blue);
}

.type-option.active {
    background: var(--medical-blue);
    border-color: var(--medical-blue);
    color: white;
}

.update-content {
    padding: 20px;
    background: white;
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

.highlight-inputs {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.highlight-inputs input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    transition: all var(--transition-normal) ease;
    background: white;
    color: var(--gray-900);
}

.highlight-inputs input:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

.alert-options, .area-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.alert-option, .area-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px;
    background: white;
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-300);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.alert-option:hover, .area-option:hover {
    border-color: var(--medical-blue);
    background: var(--gray-50);
}

.alert-option input, .area-option input {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--medical-blue);
}

.metric-inputs {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 16px;
}

.metric-inputs input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    transition: all var(--transition-normal) ease;
    background: white;
    color: var(--gray-900);
}

.metric-inputs input:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

.trend-selector select {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    background: white;
    color: var(--gray-900);
    appearance: none;
    cursor: pointer;
}

.trend-selector select:focus {
    outline: none;
    border-color: var(--medical-blue);
    box-shadow: 0 0 0 4px rgba(0, 119, 190, 0.1);
}

/* ============ TRAINING UNITS GRID ============ */
.training-units-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 20px;
    padding: 20px;
}

.training-unit-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
    border-left: 4px solid var(--medical-teal);
    transition: box-shadow var(--transition-fast);
    display: flex;
    flex-direction: column;
    height: 100%;
    box-shadow: var(--shadow-sm);
}

.training-unit-card:hover {
    box-shadow: var(--shadow-md);
}

.training-unit-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.training-unit-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
}

.training-unit-title i {
    color: var(--medical-blue);
    font-size: 16px;
}

.training-unit-stats {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 16px;
    flex-grow: 1;
}

.training-unit-stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--gray-100);
}

.training-unit-stat-row:last-child {
    border-bottom: none;
}

.training-unit-stat-label {
    font-size: 12px;
    color: var(--medical-gray);
    font-weight: 500;
}

.training-unit-stat-value {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 13px;
}

.training-unit-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 12px;
}

.training-unit-tag {
    background: var(--medical-light-blue);
    color: var(--medical-blue);
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
}

.training-unit-actions {
    display: flex;
    gap: 10px;
    margin-top: 16px;
}

.training-unit-action-btn {
    flex: 1;
    padding: 8px 12px;
    font-size: 12px;
    min-height: 36px;
}

/* ============ DEPARTMENTS GRID ============ */
.departments-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 20px;
    padding: 20px;
}

.department-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
    border-left: 4px solid var(--medical-blue);
    transition: box-shadow var(--transition-fast);
    display: flex;
    flex-direction: column;
    height: 100%;
    box-shadow: var(--shadow-sm);
}

.department-card:hover {
    box-shadow: var(--shadow-md);
}

.department-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.department-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--medical-dark-blue);
    display: flex;
    align-items: center;
    gap: 10px;
}

.department-title i {
    color: var(--medical-blue);
    font-size: 16px;
}

.department-info {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 16px;
    flex-grow: 1;
}

.department-info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--gray-100);
}

.department-info-row:last-child {
    border-bottom: none;
}

.department-info-label {
    font-size: 12px;
    color: var(--medical-gray);
    font-weight: 500;
}

.department-info-value {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 13px;
}

.department-units {
    margin-top: 12px;
}

.department-units-label {
    font-size: 12px;
    color: var(--medical-gray);
    margin-bottom: 6px;
    font-weight: 500;
}

.department-units-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.department-unit-tag {
    background: linear-gradient(135deg, rgba(0, 119, 190, 0.1), rgba(0, 119, 190, 0.05));
    color: var(--medical-blue);
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
    border: 1px solid rgba(0, 119, 190, 0.15);
}

.department-actions {
    display: flex;
    gap: 10px;
    margin-top: 16px;
}

.department-action-btn {
    flex: 1;
    padding: 8px 12px;
    font-size: 12px;
    min-height: 36px;
}

/* ============ PROFILE COMPONENTS ============ */
.profile-header {
    display: flex;
    align-items: center;
    gap: 24px;
    margin-bottom: 24px;
    padding-bottom: 24px;
    border-bottom: 2px solid var(--medical-light-blue);
}

.profile-avatar-large {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--medical-blue), var(--medical-teal));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 32px;
    flex-shrink: 0;
    box-shadow: 0 8px 24px rgba(0, 119, 190, 0.3);
}

.profile-basic-info {
    flex: 1;
}

.profile-name {
    font-size: 28px;
    font-weight: 700;
    color: var(--medical-dark-blue);
    margin-bottom: 4px;
}

.profile-title {
    font-size: 16px;
    color: var(--medical-gray);
    margin-bottom: 12px;
    font-weight: 500;
}

.profile-meta-row {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
    margin-bottom: 12px;
}

.profile-meta-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--medical-gray);
}

.profile-meta-item i {
    width: 14px;
    color: var(--medical-blue);
}

.profile-status-row {
    display: flex;
    gap: 12px;
    align-items: center;
}

.profile-department-badge {
    background: var(--medical-light-blue);
    color: var(--medical-blue);
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
}

.education-section {
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    padding: 20px;
    margin-bottom: 20px;
}

.education-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.education-item {
    display: flex;
    flex-direction: column;
}

.education-label {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 12px;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.education-value {
    color: var(--gray-800);
    font-weight: 500;
    font-size: 14px;
}

.dynamic-status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
}

.dynamic-status-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
}

.dynamic-status-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.dynamic-status-header i {
    font-size: 16px;
    color: var(--medical-blue);
}

.dynamic-status-header h4 {
    font-size: 14px;
    font-weight: 600;
    color: var(--medical-dark-blue);
    margin: 0;
}

.dynamic-status-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.status-data-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--gray-100);
}

.status-data-row:last-child { border-bottom: none; }

.status-data-label {
    font-weight: 500;
    color: var(--medical-gray);
    font-size: 12px;
}

.status-data-value {
    font-weight: 600;
    color: var(--medical-dark-blue);
    font-size: 13px;
    text-align: right;
}

.status-data-value-large {
    font-size: 24px;
    font-weight: 700;
    color: var(--medical-blue);
}

.assignments-section {
    margin-top: 24px;
}

.assignments-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

.assignment-card {
    background: white;
    border-radius: var(--border-radius-md);
    padding: 20px;
    border: 1px solid var(--medical-light-blue);
}

.assignment-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--medical-light-blue);
}

.assignment-header i {
    font-size: 16px;
    color: var(--medical-blue);
}

.assignment-header h4 {
    font-size: 14px;
    font-weight: 600;
    color: var(--medical-dark-blue);
    margin: 0;
}

.assignment-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.assignment-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px;
    background: var(--gray-50);
    border-radius: var(--border-radius-sm);
}

.assignment-time {
    font-size: 12px;
    font-weight: 600;
    color: var(--medical-blue);
}

.assignment-details {
    font-size: 13px;
    color: var(--gray-800);
}

/* ============ REASON OPTIONS ============ */
.reason-option {
    border: 2px solid var(--gray-200);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-fast);
    background: white;
}

.reason-option:hover {
    border-color: var(--medical-blue);
    background: var(--medical-light-blue);
}

.reason-selected {
    border-color: var(--medical-blue);
    background: var(--medical-light-blue);
    box-shadow: 0 0 0 1px var(--medical-blue);
}

/* ============ EMPTY STATES ============ */
.empty-state {
    text-align: center;
    padding: 48px 24px;
    color: var(--gray-600);
}

.empty-state-icon {
    font-size: 48px;
    color: var(--gray-400);
    margin-bottom: 16px;
    display: block;
}

.empty-state-title {
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--gray-700);
    margin-bottom: 8px;
}

.empty-state-description {
    font-size: var(--font-size-sm);
    color: var(--gray-600);
    font-weight: 400;
}

/* ============ CUSTOM SCROLLBAR ============ */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--medical-light-blue); border-radius: 4px; }
::-webkit-scrollbar-thumb { background: var(--medical-blue); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--medical-dark-blue); }

/* ============ ACCESSIBILITY ============ */
.btn:focus-visible, 
input:focus-visible, 
select:focus-visible, 
textarea:focus-visible, 
.sidebar-menu-link:focus-visible, 
.modal-close:focus-visible {
    outline: 3px solid var(--primary-color);
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(0, 119, 190, 0.3);
}

:disabled, .disabled { 
    opacity: 0.5; 
    cursor: not-allowed; 
    pointer-events: none; 
    user-select: none; 
}

.btn:disabled { 
    opacity: 0.6; 
    cursor: not-allowed; 
    transform: none !important; 
    box-shadow: none !important; 
}

.form-control.error { 
    border-color: var(--danger-color); 
    background-color: rgba(198, 40, 40, 0.05); 
    box-shadow: 0 0 0 3px rgba(198, 40, 40, 0.1); 
}

.form-control.error:focus { 
    border-color: var(--danger-color); 
    box-shadow: 0 0 0 4px rgba(198, 40, 40, 0.2); 
}

.error-message { 
    color: var(--danger-color); 
    font-size: var(--font-size-xs); 
    font-weight: 500; 
    margin-top: 6px; 
    display: flex; 
    align-items: center; 
    gap: 6px; 
}

/* ============ RESPONSIVE DESIGN ============ */
@media (max-width: 1200px) {
    .metrics-grid { grid-template-columns: 1fr; }
    .availability-grid { grid-template-columns: 1fr; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .dynamic-status-grid { grid-template-columns: repeat(2, 1fr); }
    .training-units-grid { grid-template-columns: repeat(2, 1fr); }
    .departments-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 1024px) {
    .live-stats-sidebar { 
        width: 100%; 
        height: 80vh; 
        top: 20vh;
        border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
    }
    
    .stats-toggle-btn { display: none; }
    .search-container { width: 200px; }
    .modal-container { width: 95%; margin: 10px; }
    .stats-grid { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
    h1 { font-size: var(--font-size-3xl); }
    h2 { font-size: var(--font-size-2xl); }
    h3 { font-size: var(--font-size-xl); }
    h4 { font-size: var(--font-size-lg); }
    
    .navbar-title { font-size: var(--font-size-lg); }
    .modal-title { font-size: var(--font-size-lg); }
    .card-title { font-size: var(--font-size-base); }
    
    .btn {
        padding: 12px 20px;
        font-size: var(--font-size-xs);
        min-height: 44px;
    }
    
    .card {
        padding: 20px;
    }
    
    .modal-header,
    .modal-body,
    .modal-footer {
        padding: 16px;
    }
    
    .comms-content { padding: 16px; }
    .form-row { grid-template-columns: 1fr; gap: 16px; }
    .status-grid { grid-template-columns: 1fr; }
    .type-selector { flex-direction: column; }
    .highlight-inputs, .alert-options, .area-options, .metric-inputs { grid-template-columns: 1fr; }
    .priority-selector { flex-direction: column; }
    .action-buttons { grid-template-columns: 1fr; }
    .top-navbar { padding: 12px 16px; }
    .navbar-right { flex-direction: column; align-items: flex-end; }
    .search-container { width: 100%; max-width: 200px; }
    .content-area { padding: 20px; }
    .dynamic-status-grid { grid-template-columns: 1fr; }
    .assignments-grid { grid-template-columns: 1fr; }
    .training-units-grid { grid-template-columns: 1fr; }
    .departments-grid { grid-template-columns: 1fr; }
    
    .table {
        min-width: 800px;
    }
    
    .table thead th {
        padding: 12px 16px;
        font-size: 10px;
    }
    
    .table tbody td {
        padding: 14px 16px;
        font-size: var(--font-size-sm);
    }
}

@media (max-width: 480px) {
    .live-stats-sidebar { padding: 20px; }
    .modal-container { width: 95%; margin: 10px; }
    .comms-tabs { flex-direction: column; }
    .login-card { padding: 32px 20px; }
    .modal-container { width: 100%; margin: 0; border-radius: 0; max-height: 100vh; }
    .modal-overlay { padding: 0; }
    .top-navbar { padding: 12px 16px; }
    .navbar-title { font-size: 16px; }
    .profile-header { flex-direction: column; text-align: center; gap: 16px; }
    .profile-meta-row { justify-content: center; }
    .table-responsive {
        border-radius: var(--border-radius-sm);
    }
}

/* ============ PRINT STYLES ============ */
@media print {
    .sidebar, 
    .top-navbar, 
    .stats-toggle-btn, 
    .btn, 
    .action-btn, 
    .modal-overlay, 
    .toast-container, 
    .mobile-menu-toggle { 
        display: none !important; 
    }
    
    .main-content { 
        margin-left: 0 !important; 
    }
    
    .live-stats-sidebar { 
        display: none !important; 
    }
    
    .card { 
        break-inside: avoid; 
        box-shadow: none; 
        border: 1px solid #ddd; 
        border-left: 3px solid #0077be; 
    }
    
    .table-responsive { 
        box-shadow: none; 
        border: 1px solid #ddd; 
        overflow: visible; 
    }
    
    .table { 
        min-width: auto; 
    }
    
    a[href]:after { 
        content: " (" attr(href) ")"; 
        font-size: 90%; 
    }
    
    .btn-primary, 
    .btn-outline, 
    .btn-ghost { 
        background: none !important; 
        color: black !important; 
        border: 1px solid #ddd !important; 
    }
}

/* ============ REDUCED MOTION ============ */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* ============ IOS FIXES ============ */
@media screen and (max-width: 768px) {
    input, select, textarea { 
        font-size: 16px; 
    }
}

/* ============ CHROME AUTOFILL ============ */
input:-webkit-autofill, 
input:-webkit-autofill:hover, 
input:-webkit-autofill:focus,
textarea:-webkit-autofill, 
textarea:-webkit-autofill:hover, 
textarea:-webkit-autofill:focus,
select:-webkit-autofill, 
select:-webkit-autofill:hover, 
select:-webkit-autofill:focus {
    -webkit-text-fill-color: var(--gray-900);
    -webkit-box-shadow: 0 0 0px 1000px white inset;
    transition: background-color 5000s ease-in-out 0s;
}

/* ============ IMAGES & ICONS ============ */
img { 
    max-width: 100%; 
    height: auto; 
}

svg { 
    fill: currentColor; 
}

/* ============ FINAL POLISH ============ */
body { 
    text-rendering: optimizeLegibility; 
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1; 
}

.live-stats-sidebar { 
    scrollbar-width: thin; 
    scrollbar-color: var(--primary-color) transparent; 
}

/* ============ END OF PART 4 - COMPLETE! ============ */
/* All CSS complete - combine all 4 parts for full stylesheet */
</style>
</head>
<body>
    <div id="app" v-cloak>

        <!-- ============ TOAST CONTAINER ============ -->
        <div class="toast-container">
            <div v-for="toast in toasts" :key="toast.id" 
                 :class="['toast', `toast-${toast.type}`]" 
                 role="alert" aria-live="polite" aria-atomic="true">
                <div class="toast-icon">
                    <i :class="toast.icon"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">{{ toast.title }}</div>
                    <div class="toast-message">{{ toast.message }}</div>
                </div>
                <button class="toast-close" @click="removeToast(toast.id)" aria-label="Close notification">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- ============ LOGIN SCREEN ============ -->
        <div v-if="!currentUser" class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="login-logo">
                        <i class="fas fa-lungs"></i>
                        <span class="login-title">NeumoCare</span>
                    </div>
                    <p class="login-subtitle">Pulmonology Management System</p>
                </div>
                
                <div class="form-group">
                    <label for="login-email" class="form-label">Email Address</label>
                    <input type="email" id="login-email" class="form-control" 
                           v-model="loginForm.email" placeholder="admin@neumocare.org" 
                           required aria-required="true" name="email" autocomplete="email">
                </div>

                <div class="form-group">
                    <label for="login-password" class="form-label">Password</label>
                    <input type="password" id="login-password" class="form-control" 
                           v-model="loginForm.password" placeholder="" 
                           required aria-required="true" name="password" autocomplete="current-password">
                </div>
                
                <button class="btn btn-primary btn-lg w-100" @click="handleLogin" 
                        :disabled="loginLoading" aria-label="Login to NeumoCare system">
                    <span v-if="loginLoading">
                        <i class="fas fa-spinner fa-spin"></i> Authenticating...
                    </span>
                    <span v-else>
                        <i class="fas fa-sign-in-alt"></i> Login
                    </span>
                </button>
            </div>
        </div>

        <!-- ============ MAIN APPLICATION ============ -->
        <div v-else class="app-layout">
            
            <!-- Medical Sidebar -->
            <aside class="sidebar" :class="{ 'sidebar-collapsed': sidebarCollapsed, 'mobile-open': mobileMenuOpen }" 
                   aria-label="Main navigation">
                <div class="sidebar-header">
                    <div class="sidebar-logo">
                        <i class="fas fa-lungs"></i>
                        <span v-if="!sidebarCollapsed">NeumoCare</span>
                    </div>
                    <button class="sidebar-toggle" @click="sidebarCollapsed = !sidebarCollapsed" 
                            :aria-label="sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'">
                        <i class="fas" :class="sidebarCollapsed ? 'fa-chevron-right' : 'fa-chevron-left'"></i>
                        <span v-if="!sidebarCollapsed">{{ sidebarCollapsed ? 'Expand' : 'Collapse' }}</span>
                    </button>
                </div>
                
                <nav class="sidebar-nav" aria-label="Primary navigation">
                    <div class="sidebar-section">
                        <div class="sidebar-section-title" v-if="!sidebarCollapsed">Dashboard</div>
                        <ul class="sidebar-menu">
                            <li class="sidebar-menu-item">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'dashboard' }" 
                                   @click.prevent="switchView('dashboard'); mobileMenuOpen = false"
                                   :aria-label="sidebarCollapsed ? 'Dashboard overview' : ''"
                                   :aria-current="currentView === 'dashboard' ? 'page' : null">
                                    <i class="fas fa-chart-line"></i>
                                    <span v-if="!sidebarCollapsed">Overview</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="sidebar-section">
                        <div class="sidebar-section-title" v-if="!sidebarCollapsed">Clinical Operations</div>
                        <ul class="sidebar-menu">
                            <li class="sidebar-menu-item">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'medical_staff' }" 
                                   @click.prevent="switchView('medical_staff'); mobileMenuOpen = false" 
                                   v-if="hasPermission('medical_staff', 'read')"
                                   :aria-label="sidebarCollapsed ? 'Medical Staff' : ''"
                                   :aria-current="currentView === 'medical_staff' ? 'page' : null">
                                    <i class="fas fa-stethoscope"></i>
                                    <span v-if="!sidebarCollapsed">Medical Staff</span>
                                </a>
                            </li>
                            <li class="sidebar-menu-item">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'oncall_schedule' }" 
                                   @click.prevent="switchView('oncall_schedule'); mobileMenuOpen = false" 
                                   v-if="hasPermission('oncall_schedule', 'read')"
                                   :aria-label="sidebarCollapsed ? 'On-call Schedule' : ''"
                                   :aria-current="currentView === 'oncall_schedule' ? 'page' : null">
                                    <i class="fas fa-phone-medical"></i>
                                    <span v-if="!sidebarCollapsed">On-call</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="sidebar-section">
                        <div class="sidebar-section-title" v-if="!sidebarCollapsed">Training & Education</div>
                        <ul class="sidebar-menu">
                            <li class="sidebar-menu-item">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'resident_rotations' }" 
                                   @click.prevent="switchView('resident_rotations'); mobileMenuOpen = false" 
                                   v-if="hasPermission('resident_rotations', 'read')"
                                   :aria-label="sidebarCollapsed ? 'Resident Rotations' : ''"
                                   :aria-current="currentView === 'resident_rotations' ? 'page' : null">
                                    <i class="fas fa-calendar-check"></i>
                                    <span v-if="!sidebarCollapsed">Rotations</span>
                                </a>
                            </li>
                            <li class="sidebar-menu-item">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'training_units' }" 
                                   @click.prevent="switchView('training_units'); mobileMenuOpen = false" 
                                   v-if="hasPermission('training_units', 'read')"
                                   :aria-label="sidebarCollapsed ? 'Training Units' : ''"
                                   :aria-current="currentView === 'training_units' ? 'page' : null">
                                    <i class="fas fa-hospital-user"></i>
                                    <span v-if="!sidebarCollapsed">Units</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="sidebar-section">
                        <div class="sidebar-section-title" v-if="!sidebarCollapsed">Administration</div>
                        <ul class="sidebar-menu">
                            <li class="sidebar-menu-item">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'staff_absence' }" 
                                   @click.prevent="switchView('staff_absence'); mobileMenuOpen = false" 
                                   v-if="hasPermission('staff_absence', 'read')"
                                   :aria-label="sidebarCollapsed ? 'Staff Absence' : ''"
                                   :aria-current="currentView === 'staff_absence' ? 'page' : null">
                                    <i class="fas fa-user-clock"></i>
                                    <span v-if="!sidebarCollapsed">Absence</span>
                                </a>
                            </li>
                            <li class="sidebar-menu-item">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'department_management' }" 
                                   @click.prevent="switchView('department_management'); mobileMenuOpen = false" 
                                   v-if="hasPermission('system', 'manage_departments')"
                                   :aria-label="sidebarCollapsed ? 'Department Management' : ''"
                                   :aria-current="currentView === 'department_management' ? 'page' : null">
                                    <i class="fas fa-sitemap"></i>
                                    <span v-if="!sidebarCollapsed">Departments</span>
                                </a>
                            </li>
                            <li class="sidebar-menu-item">
                                <a href="#" class="sidebar-menu-link" :class="{ active: currentView === 'communications' }" 
                                   @click.prevent="switchView('communications'); mobileMenuOpen = false" 
                                   v-if="hasPermission('communications', 'read')"
                                   :aria-label="sidebarCollapsed ? 'Communications' : ''"
                                   :aria-current="currentView === 'communications' ? 'page' : null">
                                    <i class="fas fa-bullhorn"></i>
                                    <span v-if="!sidebarCollapsed">Communications</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
                
                <div class="sidebar-footer">
                    <div class="sidebar-user">
                        <div class="user-avatar" aria-hidden="true">
                            {{ currentUser && currentUser.full_name ? getInitials(currentUser.full_name) : '' }}
                        </div>
                        <div class="user-info" v-if="!sidebarCollapsed">
                            <div class="user-name">{{ currentUser && currentUser.full_name ? currentUser.full_name : '' }}</div>
                            <div class="user-role">{{ currentUser && currentUser.user_role ? getUserRoleDisplay(currentUser.user_role) : '' }}</div>
                        </div>
                    </div>
                </div>
            </aside>
<!-- Live Stats Sidebar Toggle -->
<button class="stats-toggle-btn" @click="toggleStatsSidebar" 
        :aria-label="statsSidebarOpen ? 'Close live statistics sidebar' : 'Open live statistics sidebar'">
    <i class="fas" :class="statsSidebarOpen ? 'fa-chevron-right' : 'fa-chevron-left'"></i>
</button>

<!-- Live Statistics Sidebar - ENHANCED VISUALLY -->
<div class="live-stats-sidebar" :class="{ open: statsSidebarOpen }" role="complementary" aria-label="Live clinical status">
    <div class="live-stats-header">
        <div class="header-title">
            <i class="fas fa-heartbeat"></i>
            <div class="title-content">
                <h3>Clinical Status</h3>
                <p class="header-subtitle">Real-time department updates</p>
            </div>
        </div>
        <button class="header-close" @click="statsSidebarOpen = false" aria-label="Close panel">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Status Timeline -->
    <div class="status-timeline">
        <div class="timeline-header">
            <h4><i class="fas fa-history"></i> Recent Updates</h4>
            <button class="timeline-refresh" @click="refreshStatus" aria-label="Refresh status">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
        
        <div class="timeline-items">
            <div v-if="isLoadingStatus" class="timeline-loading">
                <i class="fas fa-spinner fa-spin"></i>
                <span>Loading status...</span>
            </div>
            
            <div v-else-if="clinicalStatus" class="timeline-item current-status">
                <div class="timeline-marker">
                    <div class="marker-dot dot-active"></div>
                    <div class="marker-line"></div>
                </div>
                <div class="timeline-content">
                    <div class="status-card current">
                        <div class="status-header">
                            <div class="status-title">Current Status</div>
                            <div class="status-badge" :class="getStatusBadgeClass(clinicalStatus)">
                                {{ isStatusExpired(clinicalStatus.expires_at) ? 'EXPIRED' : 'ACTIVE' }}
                            </div>
                        </div>
                        <div class="status-text">{{ clinicalStatus.status_text }}</div>
                        <div class="status-footer">
                            <div class="status-author">
                                <i class="fas fa-user-md"></i>
                                <span>{{ clinicalStatus.author_name }}</span>
                            </div>
                            <div class="status-time">
                                <i class="fas fa-clock"></i>
                                <span>{{ formatRelativeTime(clinicalStatus.created_at) }}</span>
                                <span class="time-divider"></span>
                                <span>Expires {{ formatTime(clinicalStatus.expires_at) }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div v-else class="timeline-item empty-status">
                <div class="timeline-marker">
                    <div class="marker-dot dot-inactive"></div>
                </div>
                <div class="timeline-content">
                    <div class="empty-state-card">
                        <i class="fas fa-stethoscope"></i>
                        <h5>No Status Available</h5>
                        <p>No clinical status has been set</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Metrics Dashboard -->
    <div class="metrics-dashboard">
        <div class="dashboard-header">
            <h4><i class="fas fa-chart-bar"></i> Key Metrics</h4>
            <div class="dashboard-time">Last updated: {{ formatTime(currentTime) }}</div>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-icon">
                        <i class="fas fa-procedures"></i>
                    </div>
                    <div class="metric-title">Patient Load</div>
                </div>
                <div class="metric-value">{{ systemStats.activePatients || 0 }}</div>
                <div class="metric-details">
                    <div class="detail-item">
                        <span class="detail-label">ICU:</span>
                        <span class="detail-value">{{ systemStats.icuPatients || 0 }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Ward:</span>
                        <span class="detail-value">{{ systemStats.wardPatients || 0 }}</span>
                    </div>
                </div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="metric-title">Staff Coverage</div>
                </div>
                <div class="metric-value">{{ systemStats.activeStaff || 0 }}</div>
                <div class="metric-details">
                    <div class="detail-item">
                        <span class="detail-label">On Call:</span>
                        <span class="detail-value">{{ systemStats.onCallNow || 0 }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">In Surgery:</span>
                        <span class="detail-value">{{ systemStats.inSurgery || 0 }}</span>
                    </div>
                </div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <div class="metric-title">Bed Status</div>
                </div>
                <div class="metric-value">{{ systemStats.availableBeds || 0 }}</div>
                <div class="metric-details">
                    <div class="detail-item">
                        <span class="detail-label">ICU %:</span>
                        <span class="detail-value">{{ systemStats.icuOccupancy || '0' }}%</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Ward %:</span>
                        <span class="detail-value">{{ systemStats.wardOccupancy || '0' }}%</span>
                    </div>
                </div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="metric-title">Alerts</div>
                </div>
                <div class="metric-value">{{ systemAlerts.length }}</div>
                <div class="metric-details">
                    <div class="detail-item">
                        <span class="detail-label">Active:</span>
                        <span class="detail-value">{{ activeAlertsCount }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Pending:</span>
                        <span class="detail-value">{{ systemStats.pendingApprovals || 0 }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Staff Availability -->
    <div class="staff-availability">
        <div class="availability-header">
            <h4><i class="fas fa-users"></i> Team Status</h4>
            <div class="availability-total">{{ systemStats.totalStaff || 0 }} total</div>
        </div>
        
        <div class="availability-grid">
            <div class="availability-card">
                <div class="availability-icon attending">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="availability-content">
                    <div class="availability-role">Attending</div>
                    <div class="availability-count">{{ systemStats.activeAttending || 0 }}</div>
                    <div class="availability-status">active</div>
                </div>
            </div>
            
            <div class="availability-card">
                <div class="availability-icon resident">
                    <i class="fas fa-user-graduate"></i>
                </div>
                <div class="availability-content">
                    <div class="availability-role">Residents</div>
                    <div class="availability-count">{{ systemStats.activeResidents || 0 }}</div>
                    <div class="availability-status">active</div>
                </div>
            </div>
            
            <div class="availability-card">
                <div class="availability-icon oncall">
                    <i class="fas fa-phone-alt"></i>
                </div>
                <div class="availability-content">
                    <div class="availability-role">On Call</div>
                    <div class="availability-count">{{ systemStats.onCallNow || 0 }}</div>
                    <div class="availability-status">available</div>
                </div>
            </div>
            
            <div class="availability-card">
                <div class="availability-icon unavailable">
                    <i class="fas fa-user-slash"></i>
                </div>
                <div class="availability-content">
                    <div class="availability-role">Unavailable</div>
                    <div class="availability-count">{{ systemStats.onLeaveStaff || 0 }}</div>
                    <div class="availability-status">off-duty</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Actions -->
    <div class="status-actions">
        <div v-if="hasPermission('communications', 'create')" class="actions-section">
            <div class="actions-header">
                <h4><i class="fas fa-edit"></i> Update Status</h4>
            </div>
            
            <div class="action-buttons">
                <button v-if="clinicalStatus" 
                        class="btn btn-outline btn-action"
                        @click="showCreateStatusModal"
                        :disabled="isLoadingStatus">
                    <i class="fas fa-edit"></i>
                    <span>Update</span>
                </button>
                <button v-else 
                        class="btn btn-primary btn-action"
                        @click="showCreateStatusModal"
                        :disabled="isLoadingStatus">
                    <i class="fas fa-plus"></i>
                    <span>Create Status</span>
                </button>
                
                <button class="btn btn-ghost btn-action"
                        @click="showCommunicationsModal"
                        :disabled="isLoadingStatus">
                    <i class="fas fa-bullhorn"></i>
                    <span>Announce</span>
                </button>
            </div>
            
            <div v-if="clinicalStatus && !isStatusExpired(clinicalStatus.expires_at)" 
                 class="status-expiry">
                <div class="expiry-header">
                    <i class="fas fa-clock"></i>
                    <span>Expires in</span>
                </div>
                <div class="expiry-timer">
                    {{ calculateTimeRemaining(clinicalStatus.expires_at) }}
                </div>
            </div>
        </div>
    </div>

    <!-- LIVE STATUS CREATION FORM - ADDED HERE -->
    <div v-if="liveStatsEditMode" class="status-form-section p-4 bg-gray-50 border-t border-gray-200 mt-4">
        <div class="form-header flex items-center justify-between mb-3">
            <h4 class="font-semibold text-gray-700">
                <i class="fas fa-edit mr-2"></i>Create Clinical Status
            </h4>
            <button @click="liveStatsEditMode = false" 
                    class="text-gray-500 hover:text-gray-700" 
                    aria-label="Close form">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="form-content">
            <textarea v-model="newStatusText" 
                      class="w-full p-3 border border-gray-300 rounded-lg mb-3 text-sm" 
                      placeholder="Describe the current clinical status (e.g., 'ICU at capacity, staffing normal, equipment all functional')"
                      rows="3"></textarea>
            
            <div class="grid grid-cols-2 gap-3 mb-4">
                <div>
                    <label class="block text-xs font-medium text-gray-600 mb-1">Author</label>
                    <select v-model="selectedAuthorId" 
                            class="w-full p-2 border border-gray-300 rounded text-sm">
                        <option value="">Select author</option>
                        <option v-for="staff in activeMedicalStaff" :key="staff.id" :value="staff.id">
                            {{ staff.full_name }}
                        </option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-medium text-gray-600 mb-1">Expires in</label>
                    <select v-model="expiryHours" 
                            class="w-full p-2 border border-gray-300 rounded text-sm">
                        <option value="2">2 hours</option>
                        <option value="4">4 hours</option>
                        <option value="8" selected>8 hours</option>
                        <option value="12">12 hours</option>
                        <option value="24">24 hours</option>
                    </select>
                </div>
            </div>
            
            <div class="flex gap-2">
                <button @click="saveClinicalStatus" 
                        class="btn btn-primary flex-1 btn-sm"
                        :disabled="!newStatusText.trim() || !selectedAuthorId">
                    <i class="fas fa-paper-plane mr-2"></i>Publish Status
                </button>
                <button @click="liveStatsEditMode = false" 
                        class="btn btn-secondary btn-sm">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Stats Toggle Button -->
<button class="stats-toggle-btn" @click="toggleStatsSidebar" 
        :aria-label="statsSidebarOpen ? 'Close clinical status' : 'Open clinical status'">
    <i class="fas" :class="statsSidebarOpen ? 'fa-chevron-right' : 'fa-chevron-left'"></i>
    <span class="toggle-label">Status</span>
</button>

            <!-- Main Content Area -->
            <main class="main-content" :class="{ 'main-content-expanded': sidebarCollapsed }">
                
                <!-- Top Navigation Bar -->
                <header class="top-navbar">
                    <div class="navbar-left">
                        <button class="mobile-menu-toggle" @click="mobileMenuOpen = !mobileMenuOpen" 
                                :aria-label="mobileMenuOpen ? 'Close mobile menu' : 'Open mobile menu'">
                            <i class="fas fa-bars"></i>
                        </button>
                        <div>
                            <span class="navbar-title">{{ getCurrentViewTitle() }}</span>
                            <span class="navbar-subtitle" v-if="getCurrentViewSubtitle()">{{ getCurrentViewSubtitle() }}</span>
                        </div>
                    </div>
                    
                    <div class="navbar-right">
                        <!-- Enhanced Search -->
                        <div class="search-container">
                            <div class="search-box">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" class="search-input" :placeholder="getSearchPlaceholder()" 
                                       v-model="globalSearchQuery" @keyup.enter="handleGlobalSearch"
                                       aria-label="Search across system">
                            </div>
                        </div>
                        
                        <div class="flex items-center gap-3">
                            <!-- Communications Button -->
                            <button class="btn btn-icon btn-secondary" @click="showCommunicationsModal" 
                                    v-if="hasPermission('communications', 'create')" 
                                    aria-label="Create communication or announcement">
                                <i class="fas fa-bullhorn"></i>
                            </button>
                            
                            <!-- User Menu -->
                            <div class="relative">
                                <button class="flex items-center gap-2 p-2 rounded-md hover:bg-gray-100 transition" 
                                        @click="userMenuOpen = !userMenuOpen" 
                                        :aria-label="`${currentUser && currentUser.full_name ? currentUser.full_name : ''} profile menu`"
                                        :aria-expanded="userMenuOpen">
                                    <div class="user-avatar">{{ currentUser && currentUser.full_name ? getInitials(currentUser.full_name) : '' }}</div>
                                    <i class="fas fa-chevron-down text-xs"></i>
                                </button>
                                
                                <div v-if="userMenuOpen" class="absolute right-0 top-full mt-1 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-50">
                                    <div class="py-1">
                                        <button class="w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2" 
                                                @click="showUserProfileModal">
                                            <i class="fas fa-user text-gray-500"></i>
                                            <span>Profile Settings</span>
                                        </button>
                                        <button class="w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2" 
                                                @click="handleLogout">
                                            <i class="fas fa-sign-out-alt text-gray-500"></i>
                                            <span>Logout</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Content Area -->
                <div class="content-area">
                    
                    <!-- System Alert Banner -->
                    <div v-if="systemAlerts.length > 0" class="mb-6">
                        <div v-for="alert in systemAlerts.slice(0, 1)" :key="alert.id" 
                             class="p-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg flex items-center justify-between shadow-md">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span class="font-medium">
                                    {{ alert.message }}
                                    <span v-if="systemAlerts.length > 1" class="text-sm opacity-90">
                                        (and {{ systemAlerts.length - 1 }} more)
                                    </span>
                                </span>
                            </div>
                            <button class="p-1 hover:bg-white/10 rounded transition" 
                                    @click="dismissAlert(alert.id)" 
                                    aria-label="Dismiss alert">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Breadcrumb Navigation -->
                    <nav class="flex items-center gap-2 mb-6 pb-4 border-b border-gray-200" aria-label="Breadcrumb">
                        <button class="flex items-center gap-2 text-gray-600 hover:text-blue-600 text-sm transition" 
                                @click="switchView('dashboard')">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </button>
                        <span class="text-gray-400">/</span>
                        <span class="text-blue-600 font-medium text-sm">{{ getCurrentViewTitle() }}</span>
                    </nav>

                    <!-- ============ DASHBOARD VIEW ============ -->
                    <div v-if="currentView === 'dashboard'">
                        
                        <!-- Quick Actions Toolbar -->
                        <div class="quick-actions-bar">
                            <button class="action-btn" @click="showAddMedicalStaffModal" v-if="hasPermission('medical_staff', 'create')">
                                <i class="fas fa-user-plus"></i> Add Staff
                            </button>
                            <button class="action-btn" @click="showAddOnCallModal" v-if="hasPermission('oncall_schedule', 'create')">
                                <i class="fas fa-phone-medical"></i> Schedule On-call
                            </button>
                            <button class="action-btn" @click="showAddAbsenceModal" v-if="hasPermission('staff_absence', 'create')">
                                <i class="fas fa-user-clock"></i> Record Absence
                            </button>
                            <button class="action-btn" @click="showAddRotationModal" v-if="hasPermission('resident_rotations', 'create')">
                                <i class="fas fa-calendar-check"></i> Add Rotation
                            </button>
                            <div class="ml-auto">
                                <button class="btn btn-primary btn-sm" @click="showCommunicationsModal" v-if="hasPermission('communications', 'create')">
                                    <i class="fas fa-bullhorn"></i> New Announcement
                                </button>
                            </div>
                        </div>

                        <!-- Real-time Stats Grid -->
                        <div class="stats-grid">
                            
                            <!-- Medical Staff Stats -->
                            <div class="stat-card">
                                <div class="stat-header">
                                    <i class="fas fa-stethoscope"></i>
                                    <h3>Medical Staff</h3>
                                    <button class="btn btn-sm btn-outline" @click="switchView('medical_staff')">View All</button>
                                </div>
                                <div class="stat-main-value">{{ systemStats.totalStaff || 0 }}</div>
                                <div class="stat-breakdown">
                                    <div class="breakdown-item">
                                        <span class="label">Attending Physicians</span>
                                        <span class="value">{{ systemStats.activeAttending || 0 }}</span>
                                        <span class="status-indicator status-active">Active</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span class="label">Residents</span>
                                        <span class="value">{{ systemStats.activeResidents || 0 }}</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span class="label">On Leave</span>
                                        <span class="value">{{ systemStats.onLeaveStaff || 0 }}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Rotations Stats -->
                            <div class="stat-card">
                                <div class="stat-header">
                                    <i class="fas fa-calendar-check"></i>
                                    <h3>Active Rotations</h3>
                                    <button class="btn btn-sm btn-outline" @click="switchView('resident_rotations')">Manage</button>
                                </div>
                                <div class="stat-main-value">{{ systemStats.activeRotations || 0 }}</div>
                                <div class="stat-breakdown">
                                    <div class="breakdown-item">
                                        <span class="label">Currently Active</span>
                                        <span class="value">{{ systemStats.activeRotations || 0 }}</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span class="label">Ending This Week</span>
                                        <span class="value">{{ systemStats.endingThisWeek || 0 }}</span>
                                        <span class="status-indicator status-busy">Alert</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span class="label">Starting Next Week</span>
                                        <span class="value">{{ systemStats.startingNextWeek || 0 }}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Today's On-call -->
                            <div class="stat-card">
                                <div class="stat-header">
                                    <i class="fas fa-phone-medical"></i>
                                    <h3>Today's On-call</h3>
                                    <button class="btn btn-sm btn-outline" @click="switchView('oncall_schedule')">Schedule</button>
                                </div>
                                <div class="stat-main-value">{{ todaysOnCallCount || 0 }}</div>
                                <div class="stat-breakdown">
                                    <div v-for="shift in todaysOnCall.slice(0, 3)" :key="shift.id" class="breakdown-item">
                                        <span class="label">{{ shift.physicianName }}</span>
                                        <span class="value">{{ shift.startTime }}</span>
                                        <span class="status-indicator status-oncall">On-call</span>
                                    </div>
                                    <div v-if="todaysOnCall.length === 0" class="breakdown-item">
                                        <span class="label text-gray-500">No on-call scheduled</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Department Status -->
                            <div class="stat-card">
                                <div class="stat-header">
                                    <i class="fas fa-hospital"></i>
                                    <h3>Department Status</h3>
                                </div>
                                <div class="stat-main-value" :class="{'text-green-600': systemStats.departmentStatus === 'normal', 'text-red-600': systemStats.departmentStatus === 'busy'}">
                                    {{ systemStats.departmentStatus === 'normal' ? 'Normal' : 'Busy' }}
                                </div>
                                <div class="stat-breakdown">
                                    <div class="breakdown-item">
                                        <span class="label">Active Patients</span>
                                        <span class="value">{{ systemStats.activePatients || 0 }}</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span class="label">ICU Occupancy</span>
                                        <span class="value">{{ systemStats.icuOccupancy || '0' }}%</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span class="label">Ward Occupancy</span>
                                        <span class="value">{{ systemStats.wardOccupancy || '0' }}%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Today's Schedule -->
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-phone-medical"></i>
                                    Today's On-call Schedule
                                </div>
                                <button class="btn btn-sm btn-primary" @click="showAddOnCallModal" v-if="hasPermission('oncall_schedule', 'create')">
                                    <i class="fas fa-plus"></i> Add Schedule
                                </button>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Time</th>
                                            <th>Physician</th>
                                            <th>Type</th>
                                            <th>Coverage Area</th>
                                            <th>Backup</th>
                                            <th>Contact</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-if="loadingSchedule">
                                            <td colspan="6" class="text-center py-8">
                                                <i class="fas fa-spinner fa-spin text-blue-600"></i>
                                                <span class="ml-2 text-gray-600">Loading schedule...</span>
                                            </td>
                                        </tr>
                                        <tr v-else-if="todaysOnCall.length === 0">
                                            <td colspan="6" class="text-center py-8 text-gray-500">
                                                <i class="fas fa-phone-slash text-2xl mb-2"></i>
                                                <p>No on-call scheduled today</p>
                                            </td>
                                        </tr>
                                        <tr v-else v-for="shift in todaysOnCall" :key="shift.id">
                                            <td>{{ shift.startTime }} - {{ shift.endTime }}</td>
                                            <td>
                                                <div class="flex items-center gap-3">
                                                    <div class="user-avatar">{{ getInitials(shift.physicianName) }}</div>
                                                    <div>
                                                        <div class="font-medium">{{ shift.physicianName }}</div>
                                                        <div class="text-xs text-gray-500">{{ shift.staffType }}</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge" :class="shift.shiftTypeClass">
                                                    {{ shift.shiftType }}
                                                </span>
                                            </td>
                                            <td>{{ shift.coverageArea }}</td>
                                            <td>
                                                <span v-if="shift.backupPhysician">{{ shift.backupPhysician }}</span>
                                                <span v-else class="text-gray-500 text-xs">None</span>
                                            </td>
                                            <td>
                                                <button class="btn btn-sm btn-outline" 
                                                        @click="contactPhysician(shift)"
                                                        :disabled="!shift.contactInfo || shift.contactInfo === 'No contact info'"
                                                        aria-label="Contact physician">
                                                    <i class="fas" :class="shift.contactInfo && shift.contactInfo.includes('@') ? 'fa-envelope' : 'fa-phone'"></i> 
                                                    {{ shift.contactInfo && shift.contactInfo.includes('@') ? 'Email' : 'Contact' }}
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ============ MEDICAL STAFF VIEW ============ -->
                    <div v-if="currentView === 'medical_staff'">
                        <div class="card mb-6">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-stethoscope"></i>
                                    Medical Staff Management
                                </div>
                                <button class="btn btn-primary" @click="showAddMedicalStaffModal" 
                                        v-if="hasPermission('medical_staff', 'create')">
                                    <i class="fas fa-plus"></i> Add Staff Member
                                </button>
                            </div>
                            
                            <!-- Filters -->
                            <div class="p-4 border-b border-gray-200 bg-gray-50">
                                <div class="grid grid-cols-4 gap-4">
                                    <div>
                                        <input type="text" class="form-control" v-model="staffFilters.search" 
                                               placeholder="Search name, ID, or email..." aria-label="Search staff">
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="staffFilters.staffType" aria-label="Filter by staff type">
                                            <option value="">All Types</option>
                                            <option value="attending_physician">Attending Physician</option>
                                            <option value="medical_resident">Medical Resident</option>
                                            <option value="fellow">Fellow</option>
                                            <option value="nurse_practitioner">Nurse Practitioner</option>
                                        </select>
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="staffFilters.department" aria-label="Filter by department">
                                            <option value="">All Departments</option>
                                            <option v-for="dept in departments" :key="dept.id" :value="dept.id">
                                                {{ dept.name }}
                                            </option>
                                        </select>
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="staffFilters.status" aria-label="Filter by status">
                                            <option value="">All Status</option>
                                            <option value="active">Active</option>
                                            <option value="on_leave">On Leave</option>
                                            <option value="inactive">Inactive</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Staff Table -->
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Staff Member</th>
                                            <th>Type</th>
                                            <th>Staff ID</th>
                                            <th>Department</th>
                                            <th>Current Rotation</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="staff in filteredMedicalStaff" :key="staff.id">
                                            <td>
                                                <div class="flex items-center gap-3">
                                                    <div class="user-avatar">{{ getInitials(staff.full_name) }}</div>
                                                    <div>
                                                        <div class="font-medium">{{ staff.full_name }}</div>
                                                        <div class="text-xs text-gray-500">{{ staff.professional_email }}</div>
                                                        <div v-if="staff.resident_year" class="text-xs text-blue-600">
                                                            {{ staff.resident_year }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge" :class="getStaffTypeClass(staff.staff_type)">
                                                    {{ formatStaffType(staff.staff_type) }}
                                                </span>
                                            </td>
                                            <td class="font-mono text-sm">{{ staff.staff_id }}</td>
                                            <td>
                                                <span v-if="getDepartmentName(staff.department_id)">
                                                    {{ getDepartmentName(staff.department_id) }}
                                                </span>
                                                <span v-else class="text-gray-500 text-xs">Not assigned</span>
                                            </td>
                                            <td>
                                                <span v-if="getCurrentRotationForStaff(staff.id)">
                                                    {{ getTrainingUnitName(getCurrentRotationForStaff(staff.id).training_unit_id) }}
                                                </span>
                                                <span v-else class="text-gray-500 text-xs">Not assigned</span>
                                            </td>
                                            
                                            <td>
                                                <span class="status-indicator" :class="'status-' + staff.employment_status">
                                                    {{ formatEmploymentStatus(staff.employment_status) }}
                                                </span>
                                            </td>
                                            <td>
                                                <div class="flex gap-2">
                                                    <button class="btn btn-sm btn-outline" @click="viewStaffDetails(staff)"
                                                            aria-label="View staff details">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline" @click="editMedicalStaff(staff)" 
                                                            v-if="hasPermission('medical_staff', 'update')"
                                                            aria-label="Edit staff">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr v-if="filteredMedicalStaff.length === 0">
                                            <td colspan="7" class="empty-state">
                                                <i class="fas fa-user-md empty-state-icon"></i>
                                                <div class="empty-state-title">No medical staff found</div>
                                                <div class="empty-state-description">Try adjusting your search criteria</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ============ ON-CALL SCHEDULE VIEW ============ -->
                    <div v-if="currentView === 'oncall_schedule'">
                        <div class="card mb-6">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-phone-medical"></i>
                                    On-call Schedule Management
                                </div>
                                <button class="btn btn-primary" @click="showAddOnCallModal" v-if="hasPermission('oncall_schedule', 'create')">
                                    <i class="fas fa-plus"></i> Add Schedule
                                </button>
                            </div>
                            
                            <!-- Filters -->
                            <div class="p-4 border-b border-gray-200 bg-gray-50">
                                <div class="grid grid-cols-4 gap-4">
                                    <div>
                                        <input type="date" class="form-control" v-model="onCallFilters.date" 
                                               aria-label="Filter by date">
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="onCallFilters.shiftType" aria-label="Filter by shift type">
                                            <option value="">All Shift Types</option>
                                            <option value="primary">Primary</option>
                                            <option value="backup">Backup</option>
                                        </select>
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="onCallFilters.physician" aria-label="Filter by physician">
                                            <option value="">All Physicians</option>
                                            <option v-for="physician in availablePhysicians" :key="physician.id" :value="physician.id">
                                                {{ physician.full_name }}
                                            </option>
                                        </select>
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="onCallFilters.coverageArea" aria-label="Filter by coverage area">
                                            <option value="">All Areas</option>
                                            <option value="emergency">Emergency</option>
                                            <option value="icu">ICU</option>
                                            <option value="ward">Ward</option>
                                            <option value="consultation">Consultation</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Schedule Table -->
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Physician</th>
                                            <th>Shift Time</th>
                                            <th>Type</th>
                                            <th>Coverage Area</th>
                                            <th>Backup Physician</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="schedule in filteredOnCallSchedules" :key="schedule.id">
                                            <td>{{ formatDate(schedule.duty_date) }}</td>
                                            <td>{{ getPhysicianName(schedule.primary_physician_id) }}</td>
                                            <td>{{ schedule.start_time }} - {{ schedule.end_time }}</td>
                                            <td>
                                                <span class="badge" :class="schedule.shift_type === 'primary' ? 'badge-primary' : 'badge-secondary'">
                                                    {{ schedule.shift_type === 'primary' ? 'Primary' : 'Backup' }}
                                                </span>
                                            </td>
                                            <td>{{ schedule.coverage_area }}</td>
                                            <td>
                                                <span v-if="schedule.backup_physician_id">
                                                    {{ getPhysicianName(schedule.backup_physician_id) }}
                                                </span>
                                                <span v-else class="text-gray-500 text-xs">No backup</span>
                                            </td>
                                            <td>
                                                <div class="flex gap-2">
                                                    <button class="btn btn-sm btn-outline" @click="editOnCallSchedule(schedule)" 
                                                            v-if="hasPermission('oncall_schedule', 'update')"
                                                            aria-label="Edit schedule">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr v-if="filteredOnCallSchedules.length === 0">
                                            <td colspan="7" class="empty-state">
                                                <i class="fas fa-phone-medical empty-state-icon"></i>
                                                <div class="empty-state-title">No on-call schedules found</div>
                                                <div class="empty-state-description">Try adjusting your filters</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ============ RESIDENT ROTATIONS VIEW ============ -->
                    <div v-if="currentView === 'resident_rotations'">
                        <div class="card mb-6">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-calendar-check"></i>
                                    Resident Rotations Management
                                </div>
                                <button class="btn btn-primary" @click="showAddRotationModal" v-if="hasPermission('resident_rotations', 'create')">
                                    <i class="fas fa-plus"></i> Add Rotation
                                </button>
                            </div>
                            
                            <!-- Filters -->
                            <div class="p-4 border-b border-gray-200 bg-gray-50">
                                <div class="grid grid-cols-4 gap-4">
                                    <div>
                                        <select class="form-select" v-model="rotationFilters.resident" aria-label="Filter by resident">
                                            <option value="">All Residents</option>
                                            <option v-for="resident in availableResidents" :key="resident.id" :value="resident.id">
                                                {{ resident.full_name }}
                                            </option>
                                        </select>
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="rotationFilters.status" aria-label="Filter by status">
                                            <option value="">All Status</option>
                                            <option value="active">Active</option>
                                            <option value="upcoming">Upcoming</option>
                                            <option value="completed">Completed</option>
                                            <option value="cancelled">Cancelled</option>
                                        </select>
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="rotationFilters.trainingUnit" aria-label="Filter by training unit">
                                            <option value="">All Units</option>
                                            <option v-for="unit in trainingUnits" :key="unit.id" :value="unit.id">
                                                {{ unit.unit_name }}
                                            </option>
                                        </select>
                                    </div>
                                    <div>
                                        <select class="form-select" v-model="rotationFilters.supervisor" aria-label="Filter by supervisor">
                                            <option value="">All Supervisors</option>
                                            <option v-for="supervisor in availableAttendings" :key="supervisor.id" :value="supervisor.id">
                                                {{ supervisor.full_name }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Rotations Table -->
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Rotation ID</th>
                                            <th>Resident</th>
                                            <th>Training Unit</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Status</th>
                                            <th>Supervisor</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="rotation in filteredRotations" :key="rotation.id">
                                            <td class="font-mono text-sm">{{ rotation.rotation_id }}</td>
                                            <td>{{ getResidentName(rotation.resident_id) }}</td>
                                            <td>{{ getTrainingUnitName(rotation.training_unit_id) }}</td>
                                            <td>{{ formatDate(rotation.start_date) }}</td>
                                            <td>{{ formatDate(rotation.end_date) }}</td>
                                           
                                            <td>
                                                <span class="status-indicator" :class="'status-' + rotation.rotation_status">
                                                    {{ formatRotationStatus(rotation.rotation_status) }}
                                                </span>
                                            </td>
                                            <td>
                                                <span v-if="rotation.supervising_attending_id">
                                                    {{ getSupervisorName(rotation.supervising_attending_id) }}
                                                </span>
                                                <span v-else class="text-gray-500 text-xs">Not assigned</span>
                                            </td>
                                            <td>
                                                <div class="flex gap-2">
                                                    <button class="btn btn-sm btn-outline" @click="editRotation(rotation)" 
                                                            v-if="hasPermission('resident_rotations', 'update')"
                                                            aria-label="Edit rotation">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr v-if="filteredRotations.length === 0">
                                            <td colspan="8" class="empty-state">
                                                <i class="fas fa-calendar-alt empty-state-icon"></i>
                                                <div class="empty-state-title">No rotations found</div>
                                                <div class="empty-state-description">Try adjusting your filters</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ============ TRAINING UNITS VIEW ============ -->
                    <div v-if="currentView === 'training_units'">
                        <div class="card mb-6">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-hospital-user"></i>
                                    Training Units Management
                                </div>
                                <button class="btn btn-primary" @click="showAddTrainingUnitModal" v-if="hasPermission('training_units', 'create')">
                                    <i class="fas fa-plus"></i> Add Unit
                                </button>
                            </div>
                            
                            <!-- Training Units Grid -->
                            <div class="training-units-grid">
                                <div v-for="unit in trainingUnits" :key="unit.id" class="training-unit-card">
                                    <div class="training-unit-header">
                                        <div class="training-unit-title">
                                            <i class="fas fa-clinic-medical"></i>
                                            {{ unit.unit_name }}
                                        </div>
                                        <span class="status-indicator" :class="'status-' + unit.unit_status">
                                            {{ unit.unit_status }}
                                        </span>
                                    </div>
                                    
                                    <div class="training-unit-stats">
                                        <div class="training-unit-stat-row">
                                            <span class="training-unit-stat-label">Code:</span>
                                            <span class="font-mono text-sm">{{ unit.unit_code }}</span>
                                        </div>
                                        <div class="training-unit-stat-row">
                                            <span class="training-unit-stat-label">Department:</span>
                                            <span class="text-sm">{{ getDepartmentName(unit.department_id) }}</span>
                                        </div>
                                        <div class="training-unit-stat-row">
                                            <span class="training-unit-stat-label">Capacity:</span>
                                            <span class="text-sm font-semibold">{{ unit.current_residents || 0 }}/{{ unit.maximum_residents }}</span>
                                        </div>
                                        <div class="training-unit-stat-row">
                                            <span class="training-unit-stat-label">Supervisor:</span>
                                            <span class="text-sm">{{ getSupervisorName(unit.supervising_attending_id) || 'Not assigned' }}</span>
                                        </div>
                                    </div>
                                    
                                    <div v-if="unit.specialty" class="training-unit-tags">
                                        <span class="training-unit-tag">{{ unit.specialty }}</span>
                                    </div>
                                    
                                    <div class="training-unit-actions">
                                        <button class="btn btn-outline training-unit-action-btn" @click="editTrainingUnit(unit)" 
                                                v-if="hasPermission('training_units', 'update')"
                                                aria-label="Edit training unit">
                                            <i class="fas fa-edit"></i> Edit
                                        </button>
                                        <button class="btn btn-primary training-unit-action-btn" @click="viewUnitResidents(unit)"
                                                aria-label="View unit residents">
                                            <i class="fas fa-users"></i> Residents
                                        </button>
                                    </div>
                                </div>
                                
                                <div v-if="trainingUnits.length === 0" class="col-span-full empty-state">
                                    <i class="fas fa-hospital-user empty-state-icon"></i>
                                    <div class="empty-state-title">No training units found</div>
                                    <div class="empty-state-description">Add a training unit to begin</div>
                                </div>
                            </div>
                        </div>
                    </div>

                  <!-- ============ STAFF ABSENCE VIEW ============ -->
<div v-if="currentView === 'staff_absence'">
    <div class="card mb-6">
        <div class="card-header">
            <div class="card-title">
                <i class="fas fa-user-clock"></i>
                Staff Absence Management
            </div>
            <button class="btn btn-primary" @click="showAddAbsenceModal" v-if="hasPermission('staff_absence', 'create')">
                <i class="fas fa-plus"></i> Record Absence
            </button>
        </div>
        
        <!-- Filters -->
        <div class="p-4 border-b border-gray-200 bg-gray-50">
            <div class="grid grid-cols-3 gap-4">
                <div>
                    <select class="form-select" v-model="absenceFilters.staff" aria-label="Filter by staff">
                        <option value="">All Staff</option>
                        <option v-for="staff in medicalStaff" :key="staff.id" :value="staff.id">
                            {{ staff.full_name }}
                        </option>
                    </select>
                </div>
                <div>
                    <select class="form-select" v-model="absenceFilters.reason" aria-label="Filter by reason">
                        <option value="">All Reasons</option>
                        <option value="vacation">Vacation</option>
                        <option value="sick_leave">Sick Leave</option>
                        <option value="conference">Conference</option>
                        <option value="training">Training</option>
                        <option value="personal">Personal</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div>
                    <input type="date" class="form-control" v-model="absenceFilters.startDate" 
                           aria-label="Filter by start date">
                </div>
            </div>
        </div>

        <!-- CORRECTED Absences Table -->
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Staff Member</th>
                        <th>Reason</th>
                        <th>Type</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Duration</th>
                        <th>Coverage</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="absence in filteredAbsences" :key="absence.id">
                        <!-- Staff Member -->
                        <td>
                            <div class="flex items-center gap-3">
                                <div class="user-avatar">{{ getInitials(getStaffName(absence.staff_member_id)) }}</div>
                                <div>
                                    <div class="font-medium">{{ getStaffName(absence.staff_member_id) }}</div>
                                </div>
                            </div>
                        </td>
                        
                        <!-- Reason -->
                        <td>
                            <span class="badge" :class="{
                                'badge-primary': absence.absence_reason === 'vacation',
                                'badge-green': absence.absence_reason === 'conference',
                                'badge-red': absence.absence_reason === 'sick_leave',
                                'badge-purple': absence.absence_reason === 'training',
                                'badge-yellow': absence.absence_reason === 'personal',
                                'badge-gray': absence.absence_reason === 'other'
                            }">
                                {{ formatAbsenceReason(absence.absence_reason) }}
                            </span>
                        </td>
                        
                        <!-- Type -->
                        <td>
                            <span class="status-indicator" :class="'status-' + (absence.absence_type || 'planned')">
                                {{ absence.absence_type === 'planned' ? 'Planned' : 'Unplanned' }}
                            </span>
                        </td>
                        
                        <!-- Dates -->
                        <td>{{ formatDate(absence.start_date) }}</td>
                        <td>{{ formatDate(absence.end_date) }}</td>
                        
                        <!-- Duration -->
                        <td>{{ calculateAbsenceDuration(absence.start_date, absence.end_date) }} days</td>
                        
                        <!-- Coverage -->
                        <td>
                            <div class="flex flex-col gap-1">
                                <span v-if="absence.coverage_arranged && absence.covering_staff_id" class="text-sm text-green-600">

                                    <i class="fas fa-user-check mr-1"></i>
                                    {{ getStaffName(absence.covering_staff_id) }}
                                </span>
                                <span v-else-if="absence.coverage_arranged" class="text-sm text-blue-600">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Covered
                                </span>
                                <span v-else class="text-sm text-gray-500">
                                    <i class="fas fa-times-circle mr-1"></i>
                                    No coverage
                                </span>
                                <span v-if="absence.coverage_notes" class="text-xs text-gray-500 truncate max-w-[120px]">
                                    {{ absence.coverage_notes }}
                                </span>
                            </div>
                        </td>
                        
                        <!-- Actions -->
                        <td>
                            <div class="flex gap-2">
                                <button class="btn btn-sm btn-outline" @click="editAbsence(absence)" 
                                        v-if="hasPermission('staff_absence', 'update')"
                                        aria-label="Edit absence">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline text-red-600 border-red-200 hover:bg-red-50" 
                                        @click="deleteAbsence(absence)"
                                        v-if="hasPermission('staff_absence', 'delete')"
                                        aria-label="Delete absence">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    <tr v-if="filteredAbsences.length === 0">
                        <td colspan="8" class="empty-state">
                            <i class="fas fa-user-clock empty-state-icon"></i>
                            <div class="empty-state-title">No absences found</div>
                            <div class="empty-state-description">Try adjusting your filters</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

                    <!-- ============ DEPARTMENT MANAGEMENT VIEW ============ -->
                    <div v-if="currentView === 'department_management'">
                        <div class="card mb-6">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-sitemap"></i>
                                    Department Management
                                </div>
                                <button class="btn btn-primary" @click="showAddDepartmentModal" 
                                        v-if="hasPermission('system', 'manage_departments')">
                                    <i class="fas fa-plus"></i> Add Department
                                </button>
                            </div>
                            
                            <!-- Departments Grid -->
                            <div class="departments-grid">
                                <div v-for="department in departments" :key="department.id" class="department-card">
                                    <div class="department-header">
                                        <div class="department-title">
                                            <i class="fas fa-hospital"></i>
                                            {{ department.name }}
                                        </div>
                                        <span class="status-indicator" :class="'status-' + department.status">
                                            {{ department.status }}
                                        </span>
                                    </div>
                                    
                                    <div class="department-info">
                                        <div class="department-info-row">
                                            <span class="department-info-label">Code:</span>
                                            <span class="font-mono text-sm">{{ department.code }}</span>
                                        </div>
                                        <div v-if="department.head_of_department_id" class="department-info-row">
                                            <span class="department-info-label">Head of Department:</span>
                                            <span class="text-sm">{{ getStaffName(department.head_of_department_id) }}</span>
                                        </div>
                                        <div class="department-info-row">
                                            <span class="department-info-label">Staff Count:</span>
                                            <span class="text-sm font-semibold">{{ getDepartmentStaffCount(department.id) }} staff members</span>
                                        </div>
                                    </div>
                                    
                                    <div class="department-units">
                                        <div class="department-units-label">Clinical Units:</div>
                                        <div class="department-units-tags">
                                            <span v-for="unit in getDepartmentUnits(department.id).slice(0, 4)" :key="unit.id" 
                                                  class="department-unit-tag">
                                                {{ unit.name }}
                                            </span>
                                            <span v-if="getDepartmentUnits(department.id).length > 4" 
                                                  class="department-unit-tag">
                                                +{{ getDepartmentUnits(department.id).length - 4 }} more
                                            </span>
                                            <span v-if="getDepartmentUnits(department.id).length === 0" 
                                                  class="department-unit-tag text-gray-500">
                                                No units
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="department-actions">
                                        <button class="btn btn-outline department-action-btn" @click="editDepartment(department)" 
                                                v-if="hasPermission('system', 'manage_departments')"
                                                aria-label="Edit department">
                                            <i class="fas fa-edit"></i> Edit
                                        </button>
                                        <button class="btn btn-primary department-action-btn" @click="viewDepartmentStaff(department)"
                                                aria-label="View department staff">
                                            <i class="fas fa-users"></i> Staff
                                        </button>
                                    </div>
                                </div>
                                
                                <div v-if="departments.length === 0" class="col-span-full empty-state">
                                    <i class="fas fa-sitemap empty-state-icon"></i>
                                    <div class="empty-state-title">No departments found</div>
                                    <div class="empty-state-description">Add a department to begin</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ============ COMMUNICATIONS VIEW ============ -->
                    <div v-if="currentView === 'communications'">
                        <div class="card mb-6">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-bullhorn"></i>
                                    Communications Center
                                </div>
                                <button class="btn btn-primary" @click="showCommunicationsModal" 
                                        v-if="hasPermission('communications', 'create')">
                                    <i class="fas fa-plus"></i> New Communication
                                </button>
                            </div>
                            
                            <!-- Communications List -->
                            <div class="space-y-4">
                                <div v-for="announcement in recentAnnouncements" :key="announcement.id" 
                                     class="card hover:shadow-md transition-shadow">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <h4 class="font-semibold text-gray-900">{{ announcement.title }}</h4>
                                            <div class="flex items-center gap-2 mt-1">
                                                <span class="text-xs text-gray-600">{{ announcement.author }}</span>
                                                <span class="text-xs text-gray-500"></span>
                                                <span class="text-xs text-gray-600">{{ formatTimeAgo(announcement.created_at) }}</span>
                                            </div>
                                        </div>
                                        <span class="badge" :class="'badge-' + announcement.priority_level">
                                            {{ announcement.priority_level }}
                                        </span>
                                    </div>
                                    
                                    <p class="text-sm text-gray-700 mb-3">{{ announcement.content }}</p>
                                    
                                    <div class="flex items-center justify-between text-xs text-gray-500">
                                        <div class="flex items-center gap-4">
                                            <span>{{ announcement.target_audience }}</span>
                                            <span v-if="announcement.type === 'stats_update'">
                                                <i class="fas fa-chart-line"></i> Live Stats Update
                                            </span>
                                        </div>
                                        <button class="btn btn-sm btn-outline" @click="viewAnnouncement(announcement)"
                                                aria-label="View announcement">
                                            <i class="fas fa-eye"></i> View Details
                                        </button>
                                    </div>
                                </div>
                                
                                <div v-if="recentAnnouncements.length === 0" class="empty-state">
                                    <i class="fas fa-bullhorn empty-state-icon"></i>
                                    <div class="empty-state-title">No communications found</div>
                                    <div class="empty-state-description">Post an announcement to begin</div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </main>

            <!-- ============ MODALS ============ -->
            <!-- ============ MODAL 1: Dynamic Staff Profile ============ -->
<div v-if="staffProfileModal.show" class="modal-overlay">
    <div class="modal-container modal-wide">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-user-md"></i>
                <div>
                    <h3>Medical Staff Profile</h3>
                    <p class="modal-subtitle">
                        {{ (currentDoctorProfile?.basic_info?.full_name || staffProfileModal.staff?.full_name || 'Loading...') }}  
                        <span :class="getPresenceBadgeClass()">
                            {{ getCurrentPresenceStatus() }}
                        </span>
                    </p>
                </div>
            </div>
            <button class="modal-close" @click="staffProfileModal.show = false" aria-label="Close profile">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <!-- Loading State -->
            <div v-if="staffProfileModal.loading" class="text-center py-12">
                <i class="fas fa-spinner fa-spin text-3xl text-blue-600 mb-4"></i>
                <p class="text-gray-600">Loading live clinical data...</p>
            </div>
            
            <!-- Error State -->
            <div v-else-if="staffProfileModal.error" class="text-center py-12">
                <i class="fas fa-exclamation-triangle text-3xl text-red-600 mb-4"></i>
                <p class="text-gray-600">{{ staffProfileModal.error }}</p>
                <button class="btn btn-outline mt-4" @click="loadProfileData(staffProfileModal.staff.id)">
                    <i class="fas fa-redo mr-2"></i> Retry
                </button>
            </div>
            
            <!-- Enhanced Profile Content -->
            <div v-else-if="currentDoctorProfile || staffProfileModal.staff">
                <!-- Profile Header with Live Status -->
                <div class="profile-header border-b border-gray-200 pb-6 mb-6">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-6">
                            <div class="profile-avatar-large">
                                {{ getInitials(currentDoctorProfile?.basic_info?.full_name || staffProfileModal.staff?.full_name || '') }}
                            </div>
                            <div>
                                <h2 class="profile-name">{{ currentDoctorProfile?.basic_info?.full_name || staffProfileModal.staff?.full_name }}</h2>
                                <div class="profile-title">
                                    {{ formatStaffType(currentDoctorProfile?.basic_info?.staff_type || staffProfileModal.staff?.staff_type) }}
                                    <span v-if="currentDoctorProfile?.department?.name" 
                                          class="text-gray-600">
                                         {{ currentDoctorProfile.department.name }}
                                    </span>
                                    <span v-else-if="getDepartmentName(staffProfileModal.staff?.department_id)" 
                                          class="text-gray-600">
                                         {{ getDepartmentName(staffProfileModal.staff.department_id) }}
                                    </span>
                                </div>
                                
                                <!-- Live Status Badge -->
                                <div class="profile-meta-row mt-3">
                                    <div class="profile-meta-item">
                                        <i class="fas fa-id-badge"></i>
                                        <span>{{ currentDoctorProfile?.basic_info?.staff_id || staffProfileModal.staff?.staff_id || 'N/A' }}</span>
                                    </div>
                                    
                                    <!-- Presence Indicator -->
                                    <div class="flex items-center gap-2 px-3 py-1 rounded-full" 
                                         :class="getPresenceIndicatorClass()">
                                        <i :class="getPresenceIcon()"></i>
                                        <span class="text-sm font-semibold">
                                            {{ getCurrentPresenceStatus() }}
                                        </span>
                                        <span v-if="currentDoctorProfile?.live_clinical_data?.presence?.type" 
                                              class="text-xs opacity-80">
                                             {{ currentDoctorProfile.live_clinical_data.presence.type }}
                                        </span>
                                    </div>
                                    
                                    <!-- Certificate Status -->
                                    <div v-if="currentDoctorProfile?.basic_info?.certificate_status" 
                                         class="flex items-center gap-2 px-3 py-1 rounded-full"
                                         :class="currentDoctorProfile.basic_info.certificate_status === 'current' 
                                                 ? 'bg-green-100 text-green-800' 
                                                 : 'bg-red-100 text-red-800'">
                                        <i class="fas fa-certificate"></i>
                                        <span class="text-sm font-semibold">
                                            {{ currentDoctorProfile.basic_info.certificate_status === 'current' ? 'Certified' : 'Expired' }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="flex gap-2">
                            <button class="btn btn-sm btn-outline" 
                                    @click="updatePresenceStatus('present')"
                                    v-if="getCurrentPresenceStatus() !== 'PRESENT' && currentDoctorProfile">
                                <i class="fas fa-check-circle"></i> Mark Present
                            </button>
                            <button class="btn btn-sm btn-outline" 
                                    @click="updatePresenceStatus('absent')"
                                    v-if="getCurrentPresenceStatus() === 'PRESENT' && currentDoctorProfile">
                                <i class="fas fa-times-circle"></i> Mark Absent
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Dynamic Tabs -->
                <div class="modal-tabs">
                    <button class="modal-tab" 
                            :class="{ active: staffProfileModal.activeTab === 'clinical' }" 
                            @click="staffProfileModal.activeTab = 'clinical'">
                        <i class="fas fa-heartbeat"></i> Clinical Status
                    </button>
                    <button class="modal-tab" 
                            :class="{ active: staffProfileModal.activeTab === 'schedule' }" 
                            @click="staffProfileModal.activeTab = 'schedule'">
                        <i class="fas fa-calendar-alt"></i> Schedule
                    </button>
                    <button class="modal-tab" 
                            :class="{ active: staffProfileModal.activeTab === 'academic' }" 
                            @click="staffProfileModal.activeTab = 'academic'">
                        <i class="fas fa-graduation-cap"></i> Academic
                    </button>
                </div>
                
                <!-- CLINICAL STATUS TAB -->
                <div v-if="staffProfileModal.activeTab === 'clinical'" class="mt-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Live Presence Card -->
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-user-clock"></i>
                                <h4>Live Presence</h4>
                                <span class="text-xs text-gray-500">
                                    Updated: {{ formatRelativeTime(currentDoctorProfile?.live_clinical_data?.presence?.last_seen || staffProfileModal.staff?.updated_at) }}
                                </span>
                            </div>
                            <div class="space-y-3 p-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Current Status</span>
                                    <span class="font-semibold" 
                                          :class="currentDoctorProfile?.live_clinical_data?.presence?.status === 'PRESENT' ? 'text-green-600' : 'text-red-600'">
                                        {{ currentDoctorProfile?.live_clinical_data?.presence?.status || 'UNKNOWN' }}
                                    </span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Activity</span>
                                    <span class="font-medium">{{ currentDoctorProfile?.live_clinical_data?.presence?.type || 'Not specified' }}</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Last Seen</span>
                                    <span>{{ formatRelativeTime(currentDoctorProfile?.live_clinical_data?.presence?.last_seen || staffProfileModal.staff?.updated_at) || 'N/A' }}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Current Assignment -->
                        <div class="card" v-if="currentDoctorProfile?.live_clinical_data?.current_assignment">
                            <div class="card-header">
                                <i class="fas fa-stethoscope"></i>
                                <h4>Current Assignment</h4>
                            </div>
                            <div class="space-y-3 p-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Clinical Unit</span>
                                    <span>{{ currentDoctorProfile.live_clinical_data.current_assignment.unit }}</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Unit Code</span>
                                    <span class="font-mono">{{ currentDoctorProfile.live_clinical_data.current_assignment.unit_code }}</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Supervisor</span>
                                    <span>{{ currentDoctorProfile.live_clinical_data.current_assignment.supervisor || 'Not assigned' }}</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Period</span>
                                    <span class="text-sm">
                                        {{ formatDate(currentDoctorProfile.live_clinical_data.current_assignment.start_date) }} 
                                        to {{ formatDate(currentDoctorProfile.live_clinical_data.current_assignment.end_date) }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- On-call Status -->
                    <div class="card mt-6">
                        <div class="card-header">
                            <i class="fas fa-phone-medical"></i>
                            <h4>On-call Status</h4>
                        </div>
                        <div class="p-4">
                            <!-- Check for today's on-call -->
                            <div class="flex justify-between items-center mb-4">
                                <span class="text-gray-600">Current Status</span>
                                <span v-if="isCurrentlyOnCall()" class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-semibold">
                                    ON-CALL NOW
                                </span>
                                <span v-else class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold">
                                    NOT ON-CALL
                                </span>
                            </div>
                            
                            <!-- Next On-call Shift -->
                            <div v-if="getNextOnCallShift()" class="mt-4 p-3 bg-blue-50 rounded-lg">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-medium">Next Shift</div>
                                        <div class="text-sm text-gray-600">{{ formatDate(getNextOnCallShift().date) }}</div>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-semibold">{{ getNextOnCallShift().time }}</div>
                                        <div class="text-xs text-gray-600">{{ getNextOnCallShift().coverage_area }}</div>
                                        <div v-if="getNextOnCallShift().backup_physician" class="text-xs text-gray-600">
                                            Backup: {{ getNextOnCallShift().backup_physician }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- No upcoming shifts -->
                            <div v-else-if="currentDoctorProfile?.live_clinical_data?.upcoming_oncall?.length === 0" 
                                 class="text-center py-6 text-gray-500">
                                <i class="fas fa-phone-slash text-xl mb-2"></i>
                                <p class="text-sm">No upcoming on-call shifts scheduled</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Clinical Status Update -->
                    <div v-if="currentDoctorProfile?.live_clinical_data?.clinical_status" class="card mt-6">
                        <div class="card-header">
                            <i class="fas fa-bullhorn"></i>
                            <h4>Current Clinical Status</h4>
                        </div>
                        <div class="p-4">
                            <div class="flex items-start gap-3">
                                <div class="w-2 h-full rounded-full bg-blue-500 flex-shrink-0"></div>
                                <div>
                                    <p class="text-gray-700">{{ currentDoctorProfile.live_clinical_data.clinical_status.text }}</p>
                                    <div class="flex items-center gap-3 mt-2 text-xs text-gray-500">
                                        <span>Priority: {{ currentDoctorProfile.live_clinical_data.clinical_status.priority }}</span>
                                        <span></span>
                                        <span>Expires: {{ formatRelativeTime(currentDoctorProfile.live_clinical_data.clinical_status.expires_at) }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- SCHEDULE TAB -->
                <div v-if="staffProfileModal.activeTab === 'schedule'" class="mt-6">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-calendar-day"></i>
                                Today's Schedule
                            </div>
                            <div class="text-sm text-gray-600">
                                {{ formatDate(new Date()) }}
                            </div>
                        </div>
                        
                        <div class="space-y-3 p-4">
                            <div v-if="currentDoctorProfile?.live_clinical_data?.todays_schedule?.length > 0">
                                <div v-for="item in currentDoctorProfile.live_clinical_data.todays_schedule" 
                                     :key="item.time"
                                     class="flex items-center justify-between p-3 rounded-lg border border-gray-200 hover:bg-gray-50">
                                    <div class="flex items-center gap-3">
                                        <div class="w-2 h-10 rounded-full" 
                                             :class="item.status === 'completed' ? 'bg-green-500' : 
                                                     item.status === 'cancelled' ? 'bg-gray-400' : 
                                                     'bg-blue-500'"></div>
                                        <div>
                                            <div class="font-medium">{{ item.activity }}</div>
                                            <div class="text-sm text-gray-600">{{ item.location || 'Location not specified' }}</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-semibold">{{ item.time }}</div>
                                        <div class="text-xs" 
                                             :class="item.status === 'completed' ? 'text-green-600' : 
                                                     item.status === 'cancelled' ? 'text-gray-500' : 
                                                     'text-blue-600'">
                                            {{ item.status || 'scheduled' }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div v-else class="text-center py-8 text-gray-500">
                                <i class="fas fa-calendar-times text-3xl mb-3"></i>
                                <p>No schedule for today</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Upcoming Shifts -->
                    <div v-if="currentDoctorProfile?.live_clinical_data?.upcoming_oncall?.length > 0" class="card mt-6">
                        <div class="card-header">
                            <i class="fas fa-calendar-week"></i>
                            <h4>Upcoming On-call Shifts</h4>
                        </div>
                        <div class="space-y-3 p-4">
                            <div v-for="shift in currentDoctorProfile.live_clinical_data.upcoming_oncall.slice(0, 5)" 
                                 :key="shift.date + shift.time"
                                 class="flex items-center justify-between p-3 rounded-lg border border-gray-200">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full flex items-center justify-center"
                                         :class="shift.is_today ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'">
                                        <i class="fas fa-phone-alt text-xs"></i>
                                    </div>
                                    <div>
                                        <div class="font-medium">{{ shift.shift_type }} On-call</div>
                                        <div class="text-sm text-gray-600">{{ shift.coverage_area }}</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold">{{ formatDate(shift.date) }}</div>
                                    <div class="text-sm text-gray-600">{{ shift.time }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ACADEMIC TAB -->
                <div v-if="staffProfileModal.activeTab === 'academic'" class="mt-6">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-graduation-cap"></i>
                            <h4>Academic Information</h4>
                        </div>
                        <div class="space-y-3 p-4">
                            <div v-if="currentDoctorProfile?.basic_info?.academic_degree" 
                                 class="flex justify-between items-center">
                                <span class="text-gray-600">Academic Degree</span>
                                <span class="font-medium">{{ currentDoctorProfile.basic_info.academic_degree }}</span>
                            </div>
                            <div v-if="currentDoctorProfile?.basic_info?.specialization" 
                                 class="flex justify-between items-center">
                                <span class="text-gray-600">Specialization</span>
                                <span class="font-medium">{{ currentDoctorProfile.basic_info.specialization }}</span>
                            </div>
                            <div v-if="currentDoctorProfile?.basic_info?.training_year" 
                                 class="flex justify-between items-center">
                                <span class="text-gray-600">Training Year</span>
                                <span class="font-medium">{{ currentDoctorProfile.basic_info.training_year }}</span>
                            </div>
                            <div v-if="currentDoctorProfile?.basic_info?.can_supervise_residents" 
                                 class="flex justify-between items-center">
                                <span class="text-gray-600">Supervision Status</span>
                                <span class="font-medium text-green-600">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Can Supervise Residents
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Research Notes -->
                    <div class="card mt-6" v-if="currentDoctorProfile?.academic_data?.research_notes">
                        <div class="card-header">
                            <i class="fas fa-edit"></i>
                            <h4>Research Notes</h4>
                        </div>
                        <div class="p-4">
                            <div class="prose prose-sm max-w-none whitespace-pre-line text-gray-700">
                                {{ currentDoctorProfile.academic_data.research_notes }}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Specializations -->
                    <div class="card mt-6" v-if="currentDoctorProfile?.academic_data?.specializations?.length > 0">
                        <div class="card-header">
                            <i class="fas fa-tags"></i>
                            <h4>Specializations</h4>
                        </div>
                        <div class="p-4">
                            <div class="flex flex-wrap gap-2">
                                <span v-for="specialization in currentDoctorProfile.academic_data.specializations" 
                                      :key="specialization"
                                      class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                                    {{ specialization }}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary" @click="staffProfileModal.show = false">
                Close
            </button>
            <button class="btn btn-primary" 
                    v-if="hasPermission('medical_staff', 'update')"
                    @click="editMedicalStaff(currentDoctorProfile?.basic_info || staffProfileModal.staff)">
                <i class="fas fa-edit"></i> Edit Profile
            </button>
        </div>
    </div>
</div>


            <!-- MODAL 2: Add/Edit Medical Staff -->
            <div v-if="medicalStaffModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-user-md"></i>
                            {{ medicalStaffModal.mode === 'add' ? 'Add Medical Staff' : 'Edit Medical Staff' }}
                        </div>
                        <button class="modal-close" @click="medicalStaffModal.show = false" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <div class="modal-tabs">
                            <button class="modal-tab" :class="{ active: medicalStaffModal.activeTab === 'basic' }" 
                                    @click="medicalStaffModal.activeTab = 'basic'">
                                <i class="fas fa-user"></i> Basic Information
                            </button>
                            <button class="modal-tab" :class="{ active: medicalStaffModal.activeTab === 'professional' }" 
                                    @click="medicalStaffModal.activeTab = 'professional'">
                                <i class="fas fa-graduation-cap"></i> Professional Details
                            </button>
                        </div>

                        <!-- Basic Info Tab -->
                        <div v-if="medicalStaffModal.activeTab === 'basic'" class="mt-6">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="form-group">
                                    <label class="form-label">Full Name *</label>
                                    <input type="text" class="form-control" v-model="medicalStaffModal.form.full_name" 
                                           required aria-required="true">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Staff Type *</label>
                                    <select class="form-select" v-model="medicalStaffModal.form.staff_type" 
                                            required aria-required="true" aria-label="Staff type">
                                        <option value="medical_resident">Medical Resident</option>
                                        <option value="attending_physician">Attending Physician</option>
                                        <option value="fellow">Fellow</option>
                                        <option value="nurse_practitioner">Nurse Practitioner</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Staff ID</label>
                                    <input type="text" class="form-control" v-model="medicalStaffModal.form.staff_id" 
                                           aria-label="Staff ID">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Employment Status</label>
                                    <select class="form-select" v-model="medicalStaffModal.form.employment_status" 
                                            aria-label="Employment status">
                                        <option value="active">Active</option>
                                        <option value="on_leave">On Leave</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Professional Email *</label>
                                    <input type="email" class="form-control" v-model="medicalStaffModal.form.professional_email" 
                                           required aria-required="true" aria-label="Professional email">
                                </div>
                            </div>
                        </div>

                        <!-- Professional Details Tab -->
                        <div v-if="medicalStaffModal.activeTab === 'professional'" class="mt-6">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="form-group">
                                    <label class="form-label">Academic Degree</label>
                                    <select class="form-select" v-model="medicalStaffModal.form.academic_degree" 
                                            aria-label="Academic degree">
                                        <option value="">Select Degree</option>
                                        <option value="MD">MD</option>
                                        <option value="MD-PhD">MD-PhD</option>
                                        <option value="MD-MSc">MD-MSc</option>
                                        <option value="DO">DO</option>
                                        <option value="MBBS">MBBS</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Specialization</label>
                                    <input type="text" class="form-control" v-model="medicalStaffModal.form.specialization" 
                                           placeholder="e.g., Pulmonology, Critical Care" aria-label="Specialization">
                                </div>
                                <div v-if="medicalStaffModal.form.staff_type === 'medical_resident'" class="form-group">
                                    <label class="form-label">Resident Year</label>
                                    <select class="form-select" v-model="medicalStaffModal.form.training_year"
                                            aria-label="Resident year">
                                        <option value="">Select Year</option>
                                        <option value="PGY-1">PGY-1</option>
                                        <option value="PGY-2">PGY-2</option>
                                        <option value="PGY-3">PGY-3</option>
                                        <option value="PGY-4">PGY-4</option>
                                        <option value="PGY-5">PGY-5</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Clinical Certificate</label>
                                    <input type="text" class="form-control" v-model="medicalStaffModal.form.clinical_certificate" 
                                           placeholder="e.g., Board Certified" aria-label="Clinical certificate">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Certificate Status</label>
                                    <select class="form-select" v-model="medicalStaffModal.form.certificate_status" 
                                            aria-label="Certificate status">
                                        <option value="current">Current</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Department</label>
                                    <select class="form-select" v-model="medicalStaffModal.form.department_id" 
                                            aria-label="Department">
                                        <option value="">Select Department</option>
                                        <option v-for="department in departments" :key="department.id" :value="department.id">
                                            {{ department.name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="medicalStaffModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveMedicalStaff">
                            <i class="fas fa-save"></i> {{ medicalStaffModal.mode === 'add' ? 'Add Staff' : 'Save Changes' }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 3: Communications with Stats Update Tab -->
            <!-- MODAL 3: Communications - ENHANCED VISUALLY -->
<div v-if="communicationsModal.show" class="modal-overlay">
    <div class="modal-container modal-wide">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-bullhorn"></i>
                <div class="title-content">
                    <h3>Department Communications</h3>
                    <p class="modal-subtitle">Share updates and announcements</p>
                </div>
            </div>
            <button class="modal-close" @click="communicationsModal.show = false" aria-label="Close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <!-- Tab Navigation -->
            <div class="comms-tabs">
                <button class="comms-tab" :class="{ active: communicationsModal.activeTab === 'announcement' }" 
                        @click="communicationsModal.activeTab = 'announcement'">
                    <i class="fas fa-bullhorn"></i>
                    <span>Announcement</span>
                </button>
                <button class="comms-tab" :class="{ active: communicationsModal.activeTab === 'stats_update' }" 
                        @click="communicationsModal.activeTab = 'stats_update'" 
                        v-if="hasPermission('communications', 'create')">
                    <i class="fas fa-chart-line"></i>
                    <span>Clinical Update</span>
                </button>
            </div>

            <!-- Announcement Tab -->
            <div v-if="communicationsModal.activeTab === 'announcement'" class="comms-content">
                <div class="form-preview">
                    <div class="preview-card" v-if="communicationsModal.form.title || communicationsModal.form.content">
                        <div class="preview-header">
                            <div class="preview-badge" :class="'badge-' + (communicationsModal.form.priority || 'normal')">
                                {{ (communicationsModal.form.priority || 'normal') | capitalize }}
                            </div>
                            <div class="preview-time">Now</div>
                        </div>
                        <h4 class="preview-title">{{ communicationsModal.form.title || 'Announcement Title' }}</h4>
                        <p class="preview-text">{{ communicationsModal.form.content || 'Announcement content...' }}</p>
                        <div class="preview-footer">
                            <div class="preview-audience">
                                <i class="fas fa-users"></i>
                                {{ formatAudience(communicationsModal.form.target_audience) || 'All Staff' }}
                            </div>
                            <div class="preview-author">
                                <i class="fas fa-user"></i>
                                {{ currentUser.full_name }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4><i class="fas fa-edit"></i> Compose</h4>
                    
                    <div class="form-group">
                        <label>Title <span class="required">*</span></label>
                        <div class="input-with-icon">
                            <i class="fas fa-heading"></i>
                            <input type="text" v-model="communicationsModal.form.title" 
                                   placeholder="Enter title" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Content <span class="required">*</span></label>
                        <div class="textarea-with-icon">
                            <i class="fas fa-align-left"></i>
                            <textarea v-model="communicationsModal.form.content" 
                                      rows="4" placeholder="Write your message..."></textarea>
                        </div>
                        <div class="char-count">
                            {{ communicationsModal.form.content ? communicationsModal.form.content.length : 0 }}/500
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Priority</label>
                            <div class="priority-selector">
                                <button type="button" 
                                        class="priority-option" 
                                        :class="{ active: communicationsModal.form.priority === 'normal' }"
                                        @click="communicationsModal.form.priority = 'normal'">
                                    <div class="priority-dot normal"></div>
                                    <span>Normal</span>
                                </button>
                                <button type="button" 
                                        class="priority-option" 
                                        :class="{ active: communicationsModal.form.priority === 'high' }"
                                        @click="communicationsModal.form.priority = 'high'">
                                    <div class="priority-dot high"></div>
                                    <span>High</span>
                                </button>
                                <button type="button" 
                                        class="priority-option" 
                                        :class="{ active: communicationsModal.form.priority === 'urgent' }"
                                        @click="communicationsModal.form.priority = 'urgent'">
                                    <div class="priority-dot urgent"></div>
                                    <span>Urgent</span>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Audience</label>
                            <div class="select-with-icon">
                                <i class="fas fa-users"></i>
                                <select v-model="communicationsModal.form.target_audience">
                                    <option value="all_staff">All Staff</option>
                                    <option value="medical_staff">Medical Staff</option>
                                    <option value="residents">Residents</option>
                                    <option value="attendings">Attendings</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clinical Update Tab -->
            <div v-if="communicationsModal.activeTab === 'stats_update'" class="comms-content">
                <div class="quick-status">
                    <h4><i class="fas fa-bolt"></i> Quick Status</h4>
                    <div class="status-grid">
                        <div class="status-option" 
                             :class="{ active: quickStatus === 'normal' }"
                             @click="setQuickStatus('normal')">
                            <div class="status-icon normal">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="status-desc">All Normal</div>
                        </div>
                        <div class="status-option" 
                             :class="{ active: quickStatus === 'busy' }"
                             @click="setQuickStatus('busy')">
                            <div class="status-icon busy">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="status-desc">ICU Busy</div>
                        </div>
                        <div class="status-option" 
                             :class="{ active: quickStatus === 'shortage' }"
                             @click="setQuickStatus('shortage')">
                            <div class="status-icon shortage">
                                <i class="fas fa-user-md"></i>
                            </div>
                            <div class="status-desc">Staff Shortage</div>
                        </div>
                        <div class="status-option" 
                             :class="{ active: quickStatus === 'equipment' }"
                             @click="setQuickStatus('equipment')">
                            <div class="status-icon equipment">
                                <i class="fas fa-tools"></i>
                            </div>
                            <div class="status-desc">Equipment Issue</div>
                        </div>
                    </div>
                </div>

                <div class="update-form">
                    <h4><i class="fas fa-sliders-h"></i> Custom Update</h4>
                    
                    <div class="update-type">
                        <div class="type-selector">
                            <button class="type-option" 
                                    :class="{ active: communicationsModal.form.updateType === 'daily' }"
                                    @click="communicationsModal.form.updateType = 'daily'">
                                <i class="fas fa-sun"></i>
                                <span>Daily</span>
                            </button>
                            <button class="type-option" 
                                    :class="{ active: communicationsModal.form.updateType === 'metric' }"
                                    @click="communicationsModal.form.updateType = 'metric'">
                                <i class="fas fa-chart-bar"></i>
                                <span>Metric</span>
                            </button>
                            <button class="type-option" 
                                    :class="{ active: communicationsModal.form.updateType === 'alert' }"
                                    @click="communicationsModal.form.updateType = 'alert'">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>Alert</span>
                            </button>
                        </div>
                    </div>

                    <!-- Daily Update -->
                    <div v-if="communicationsModal.form.updateType === 'daily'" class="update-content">
                        <div class="form-group">
                            <label>Status Summary <span class="required">*</span></label>
                            <textarea v-model="communicationsModal.form.dailySummary" 
                                      rows="3" placeholder="Brief department status..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Highlights</label>
                            <div class="highlight-inputs">
                                <input type="text" v-model="communicationsModal.form.highlight1" 
                                       placeholder="Highlight 1">
                                <input type="text" v-model="communicationsModal.form.highlight2" 
                                       placeholder="Highlight 2">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Alerts</label>
                            <div class="alert-options">
                                <label class="alert-option">
                                    <input type="checkbox" v-model="communicationsModal.form.alerts.erBusy">
                                    <span>ER Busy</span>
                                </label>
                                <label class="alert-option">
                                    <input type="checkbox" v-model="communicationsModal.form.alerts.icuFull">
                                    <span>ICU Full</span>
                                </label>
                                <label class="alert-option">
                                    <input type="checkbox" v-model="communicationsModal.form.alerts.wardFull">
                                    <span>Ward Full</span>
                                </label>
                                <label class="alert-option">
                                    <input type="checkbox" v-model="communicationsModal.form.alerts.staffShortage">
                                    <span>Staff Shortage</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Metric Update -->
                    <div v-if="communicationsModal.form.updateType === 'metric'" class="update-content">
                        <div class="form-group">
                            <label>Metric</label>
                            <div class="metric-inputs">
                                <input type="text" v-model="communicationsModal.form.metricName" 
                                       placeholder="Metric name">
                                <input type="text" v-model="communicationsModal.form.metricValue" 
                                       placeholder="Value">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Trend</label>
                            <div class="trend-selector">
                                <select v-model="communicationsModal.form.metricTrend">
                                    <option value="improved">Improved </option>
                                    <option value="worsened">Worsened </option>
                                    <option value="stable">Stable </option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Notes</label>
                            <textarea v-model="communicationsModal.form.metricNote" 
                                      rows="2" placeholder="Additional context..."></textarea>
                        </div>
                    </div>

                    <!-- Alert Update -->
                    <div v-if="communicationsModal.form.updateType === 'alert'" class="update-content">
                        <div class="form-group">
                            <label>Alert Level</label>
                            <select v-model="communicationsModal.form.alertLevel">
                                <option value="low">Low - Informational</option>
                                <option value="medium">Medium - Attention</option>
                                <option value="high">High - Critical</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Message <span class="required">*</span></label>
                            <textarea v-model="communicationsModal.form.alertMessage" 
                                      rows="3" placeholder="Describe the alert..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Affected Areas</label>
                            <div class="area-options">
                                <label class="area-option">
                                    <input type="checkbox" v-model="communicationsModal.form.affectedAreas.er">
                                    <span>Emergency</span>
                                </label>
                                <label class="area-option">
                                    <input type="checkbox" v-model="communicationsModal.form.affectedAreas.icu">
                                    <span>ICU</span>
                                </label>
                                <label class="area-option">
                                    <input type="checkbox" v-model="communicationsModal.form.affectedAreas.ward">
                                    <span>Ward</span>
                                </label>
                                <label class="area-option">
                                    <input type="checkbox" v-model="communicationsModal.form.affectedAreas.surgery">
                                    <span>Surgery</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary" @click="communicationsModal.show = false">
                Cancel
            </button>
            <button class="btn btn-primary" @click="saveCommunication">
                <i class="fas fa-paper-plane"></i>
                {{ communicationsModal.activeTab === 'announcement' ? 'Publish' : 'Update' }}
            </button>
        </div>
    </div>
</div>

            <!-- MODAL 4: Add/Edit On-call Schedule -->
            <div v-if="onCallModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-phone-medical"></i>
                            {{ onCallModal.mode === 'add' ? 'Schedule On-call' : 'Edit On-call Schedule' }}
                        </div>
                        <button class="modal-close" @click="onCallModal.show = false" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="form-label">Date *</label>
                                <input type="date" class="form-control" v-model="onCallModal.form.duty_date" 
                                       required aria-required="true" aria-label="Duty date">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Shift Type *</label>
                               <select v-model="onCallModal.form.shift_type">
    <option value="primary_call">Primary Call</option>  <!--  -->
    <option value="backup_call">Backup Call</option>    <!--  -->
</select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Primary Physician *</label>
                                <select class="form-select" v-model="onCallModal.form.primary_physician_id" 
                                        required aria-required="true" aria-label="Primary physician">
                                    <option value="">Select Physician</option>
                                    <option v-for="physician in availablePhysicians" :key="physician.id" :value="physician.id">
                                        {{ physician.full_name }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Backup Physician</label>
                                <select class="form-select" v-model="onCallModal.form.backup_physician_id" aria-label="Backup physician">
                                    <option value="">No Backup</option>
                                    <option v-for="physician in availablePhysicians" :key="physician.id" :value="physician.id">
                                        {{ physician.full_name }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Start Time *</label>
                                <input type="time" class="form-control" v-model="onCallModal.form.start_time" 
                                       required aria-required="true" aria-label="Start time">
                            </div>
                            <div class="form-group">
                                <label class="form-label">End Time *</label>
                                <input type="time" class="form-control" v-model="onCallModal.form.end_time" 
                                       required aria-required="true" aria-label="End time">
                            </div>
                            <div class="form-group col-span-2">
                                <label class="form-label">Coverage Area</label>
                                <select class="form-select" v-model="onCallModal.form.coverage_area" aria-label="Coverage area">
                                    <option value="emergency">Emergency Department</option>
                                    <option value="icu">Intensive Care Unit</option>
                                    <option value="ward">General Ward</option>
                                    <option value="consultation">Consultations</option>
                                    <option value="all">All Areas</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="onCallModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveOnCallSchedule">
                            <i class="fas fa-save"></i> {{ onCallModal.mode === 'add' ? 'Schedule On-call' : 'Save Changes' }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 5: Add/Edit Rotation -->
            <div v-if="rotationModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-calendar-check"></i>
                            {{ rotationModal.mode === 'add' ? 'Add Rotation' : 'Edit Rotation' }}
                        </div>
                        <button class="modal-close" @click="rotationModal.show = false" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="form-label">Rotation ID</label>
                                <input type="text" class="form-control" v-model="rotationModal.form.rotation_id" 
                                       aria-label="Rotation ID">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Status *</label>
                                <select class="form-select" v-model="rotationModal.form.rotation_status" 
                                        required aria-required="true" aria-label="Rotation status">
                                    <option value="scheduled">Scheduled</option>
                                    <option value="active">Active</option>
                                    <option value="completed">Completed</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Resident *</label>
                                <select class="form-select" v-model="rotationModal.form.resident_id" 
                                        required aria-required="true" aria-label="Resident">
                                    <option value="">Select Resident</option>
                                    <option v-for="resident in availableResidents" :key="resident.id" :value="resident.id">
                                        {{ resident.full_name }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Training Unit *</label>
                                <select class="form-select" v-model="rotationModal.form.training_unit_id" 
                                        required aria-required="true" aria-label="Training unit">
                                    <option value="">Select Unit</option>
                                    <option v-for="unit in trainingUnits" :key="unit.id" :value="unit.id">
                                        {{ unit.unit_name }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Start Date *</label>
                                <input type="date" class="form-control" v-model="rotationModal.form.start_date" 
                                       required aria-required="true" aria-label="Start Date">
                            </div>
                            <div class="form-group">
                                <label class="form-label">End Date *</label>
                                <input type="date" class="form-control" v-model="rotationModal.form.end_date" 
                                       required aria-required="true" aria-label="End Date">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Supervising Attending</label>
                                <select class="form-select" v-model="rotationModal.form.supervising_attending_id" 
                                        aria-label="Supervising attending">
                                    <option value="">Select Supervisor</option>
                                    <option v-for="attending in availableAttendings" :key="attending.id" :value="attending.id">
                                        {{ attending.full_name }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Rotation Category *</label>
                                <select class="form-select" v-model="rotationModal.form.rotation_category" 
                                        required aria-required="true" aria-label="Rotation category">
                                    <option value="clinical_rotation">Clinical Rotation</option>
                                    <option value="elective_rotation">Elective Rotation</option>
                                    <option value="research_rotation">Research</option>
                                    <option value="vacation_rotation">Vacation</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="rotationModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveRotation">
                            <i class="fas fa-save"></i> {{ rotationModal.mode === 'add' ? 'Add Rotation' : 'Save Changes' }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 6: Add/Edit Training Unit -->
            <div v-if="trainingUnitModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-hospital-user"></i>
                            {{ trainingUnitModal.mode === 'add' ? 'Add Training Unit' : 'Edit Training Unit' }}
                        </div>
                        <button class="modal-close" @click="trainingUnitModal.show = false" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="form-label">Unit Name *</label>
                                <input type="text" class="form-control" v-model="trainingUnitModal.form.unit_name" 
                                       required aria-required="true" aria-label="Unit name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Unit Code *</label>
                                <input type="text" class="form-control" v-model="trainingUnitModal.form.unit_code" 
                                       required aria-required="true" aria-label="Unit code">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Department *</label>
                                <select class="form-select" v-model="trainingUnitModal.form.department_id" 
                                        required aria-required="true" aria-label="Department">
                                    <option value="">Select Department</option>
                                    <option v-for="department in departments" :key="department.id" :value="department.id">
                                        {{ department.name }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Status *</label>
                                <select class="form-select" v-model="trainingUnitModal.form.unit_status" 
                                        required aria-required="true" aria-label="Unit status">
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Maximum Residents *</label>
                                <input type="number" class="form-control" v-model="trainingUnitModal.form.maximum_residents" 
                                       min="1" max="50" required aria-required="true" aria-label="Maximum residents">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Specialty</label>
                                <input type="text" class="form-control" v-model="trainingUnitModal.form.specialty" 
                                       placeholder="e.g., Pulmonology, Critical Care" aria-label="Specialty">
                            </div>
                            <div class="form-group col-span-2">
                                <label class="form-label">Supervising Attending</label>
                                <select class="form-select" v-model="trainingUnitModal.form.supervising_attending_id" 
                                        aria-label="Supervising attending">
                                    <option value="">Select Supervisor</option>
                                    <option v-for="attending in availableAttendings" :key="attending.id" :value="attending.id">
                                        {{ attending.full_name }}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="trainingUnitModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveTrainingUnit">
                            <i class="fas fa-save"></i> {{ trainingUnitModal.mode === 'add' ? 'Add Unit' : 'Save Changes' }}
                        </button>
                    </div>
                </div>
            </div>

     <!-- MODAL 7: Add/Edit Absence -->
<div v-if="absenceModal.show" class="modal-overlay">
    <div class="modal-container">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-user-clock"></i>
                {{ absenceModal.mode === 'add' ? 'Record Absence' : 'Edit Absence' }}
            </div>
            <button class="modal-close" @click="absenceModal.show = false" aria-label="Close modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <!-- Smart Preview Card -->
            <div v-if="absenceModal.form.staff_member_id && absenceModal.form.start_date" 
                 class="preview-card mb-4 p-3 rounded-md"
                 :class="getPreviewCardClass()">
                <div class="flex items-center gap-2 mb-1">
                    <i :class="getPreviewIcon()"></i>
                    <span class="font-semibold">{{ getStaffName(absenceModal.form.staff_member_id) }}</span>
                </div>
                <div class="text-sm">
                    <div>{{ getPreviewReasonText() }}</div>
                    <div>{{ formatDate(absenceModal.form.start_date) }} 
                        <span v-if="absenceModal.form.end_date && absenceModal.form.end_date !== absenceModal.form.start_date">
                            - {{ formatDate(absenceModal.form.end_date) }}
                        </span>
                    </div>
                    <div class="mt-1">
                        <span class="status-indicator" :class="getPreviewStatusClass()">
                            {{ getPreviewStatusText() }}
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="space-y-4">
                <!-- Staff Selection -->
                <div class="form-group">
                    <label class="form-label">Staff Member *</label>
                    <select class="form-select" v-model="absenceModal.form.staff_member_id" 
                            required aria-required="true" aria-label="Staff member"
                            @change="updatePreview()">
                        <option value="">Select Staff Member</option>
                        <option v-for="staff in medicalStaff" :key="staff.id" :value="staff.id">
                            {{ staff.full_name }}
                        </option>
                    </select>
                </div>
                
                <!-- Leave Type Toggle -->
                <div class="form-group">
                    <label class="form-label">Leave Type *</label>
                    <div class="flex border border-gray-300 rounded-md overflow-hidden">
                        <button type="button" 
                                class="flex-1 py-2 text-center transition"
                                :class="absenceModal.form.absence_type === 'planned' ? 'bg-blue-100 text-blue-700 border-r border-blue-200' : 'bg-gray-50 text-gray-600'"
                                @click="absenceModal.form.absence_type = 'planned'; updatePreview()">
                            <i class="fas fa-calendar-alt mr-2"></i>Planned
                        </button>
                        <button type="button" 
                                class="flex-1 py-2 text-center transition"
                                :class="absenceModal.form.absence_type === 'unplanned' ? 'bg-orange-100 text-orange-700' : 'bg-gray-50 text-gray-600'"
                                @click="absenceModal.form.absence_type = 'unplanned'; updatePreview()">
                            <i class="fas fa-exclamation-circle mr-2"></i>Unplanned
                        </button>
                    </div>
                </div>
                
                <!-- Dates -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="form-group">
                        <label class="form-label">Start Date *</label>
                        <input type="date" class="form-control" v-model="absenceModal.form.start_date" 
                               required aria-required="true" aria-label="Start date"
                               @change="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">End Date *</label>
                        <input type="date" class="form-control" v-model="absenceModal.form.end_date" 
                               required aria-required="true" aria-label="End date"
                               @change="updatePreview()">
                    </div>
                </div>
                
                <!-- Auto-calculated Duration -->
                <div v-if="absenceModal.form.start_date && absenceModal.form.end_date" 
                     class="bg-gray-50 p-3 rounded-md">
                    <div class="flex justify-between items-center">
                        <span class="text-sm font-medium">Duration:</span>
                        <span class="font-semibold">
                            {{ calculateAbsenceDuration(absenceModal.form.start_date, absenceModal.form.end_date) }} days
                        </span>
                    </div>
                </div>
                
                <!-- Reason Selection with Icons -->
                <div class="form-group">
                    <label class="form-label">Reason for Absence *</label>
                    <div class="grid grid-cols-2 gap-2">
                        <label class="reason-option" 
                               :class="{ 'reason-selected': absenceModal.form.absence_reason === 'vacation' }">
                            <input type="radio" v-model="absenceModal.form.absence_reason" value="vacation" 
                                   class="hidden" @change="updatePreview()">
                            <div class="flex items-center gap-2 p-3">
                                <i class="fas fa-umbrella-beach text-blue-500"></i>
                                <span>Vacation</span>
                            </div>
                        </label>
                        
                        <label class="reason-option" 
                               :class="{ 'reason-selected': absenceModal.form.absence_reason === 'conference' }">
                            <input type="radio" v-model="absenceModal.form.absence_reason" value="conference" 
                                   class="hidden" @change="updatePreview()">
                            <div class="flex items-center gap-2 p-3">
                                <i class="fas fa-chalkboard-teacher text-green-500"></i>
                                <span>Conference</span>
                            </div>
                        </label>
                        
                        <label class="reason-option" 
                               :class="{ 'reason-selected': absenceModal.form.absence_reason === 'sick_leave' }">
                            <input type="radio" v-model="absenceModal.form.absence_reason" value="sick_leave" 
                                   class="hidden" @change="updatePreview()">
                            <div class="flex items-center gap-2 p-3">
                                <i class="fas fa-heartbeat text-red-500"></i>
                                <span>Sick Leave</span>
                            </div>
                        </label>
                        
                        <label class="reason-option" 
                               :class="{ 'reason-selected': absenceModal.form.absence_reason === 'training' }">
                            <input type="radio" v-model="absenceModal.form.absence_reason" value="training" 
                                   class="hidden" @change="updatePreview()">
                            <div class="flex items-center gap-2 p-3">
                                <i class="fas fa-graduation-cap text-purple-500"></i>
                                <span>Training</span>
                            </div>
                        </label>
                        
                        <label class="reason-option" 
                               :class="{ 'reason-selected': absenceModal.form.absence_reason === 'personal' }">
                            <input type="radio" v-model="absenceModal.form.absence_reason" value="personal" 
                                   class="hidden" @change="updatePreview()">
                            <div class="flex items-center gap-2 p-3">
                                <i class="fas fa-home text-yellow-500"></i>
                                <span>Personal</span>
                            </div>
                        </label>
                        
                        <label class="reason-option" 
                               :class="{ 'reason-selected': absenceModal.form.absence_reason === 'other' }">
                            <input type="radio" v-model="absenceModal.form.absence_reason" value="other" 
                                   class="hidden" @change="updatePreview()">
                            <div class="flex items-center gap-2 p-3">
                                <i class="fas fa-ellipsis-h text-gray-500"></i>
                                <span>Other</span>
                            </div>
                        </label>
                    </div>
                </div>
                
                <!-- Coverage Section -->
                <div class="form-group">
                    <label class="form-label">Coverage Arranged</label>
                    <div class="flex items-center gap-4 mb-3">
                        <label class="flex items-center gap-2">
                            <input type="radio" v-model="absenceModal.form.coverage_arranged" :value="true" 
                                   class="form-check-input" @change="updatePreview()">
                            <span>Yes</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="radio" v-model="absenceModal.form.coverage_arranged" :value="false" 
                                   class="form-check-input" @change="updatePreview()">
                            <span>No</span>
                        </label>
                    </div>
                    
                    <!-- If coverage is arranged, show staff dropdown -->
                    <div v-if="absenceModal.form.coverage_arranged" class="mt-2">
                        <label class="form-label">Covered by:</label>
                        <select class="form-select" v-model="absenceModal.form.covering_staff_id" 
                                aria-label="Covering staff">
                            <option value="">Select covering staff</option>
                            <option v-for="staff in availableReplacementStaff" :key="staff.id" :value="staff.id">
                                {{ staff.full_name }}
                            </option>
                        </select>
                    </div>
                    
                    <!-- Coverage gap warning -->
                    <div v-if="absenceModal.form.coverage_arranged === false" 
                         class="mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-sm">
                        <i class="fas fa-exclamation-triangle mr-1"></i>
                        This will create a coverage gap
                    </div>
                </div>
                
                <!-- Notes -->
                <div class="form-group">
                    <label class="form-label">Coverage Notes (Optional)</label>
                    <textarea class="form-control" v-model="absenceModal.form.coverage_notes" rows="3" 
                              placeholder="Optional notes about coverage, handover, etc."></textarea>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary" @click="absenceModal.show = false">Cancel</button>
            <button class="btn btn-primary" @click="saveAbsence" 
                    :disabled="!absenceModal.form.staff_member_id || !absenceModal.form.start_date">
                <i class="fas fa-save"></i> {{ absenceModal.mode === 'add' ? 'Record Absence' : 'Save Changes' }}
            </button>
        </div>
    </div>
</div>

            <!-- MODAL 8: Add/Edit Department -->
            <div v-if="departmentModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-sitemap"></i>
                            {{ departmentModal.mode === 'add' ? 'Add Department' : 'Edit Department' }}
                        </div>
                        <button class="modal-close" @click="departmentModal.show = false" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="form-label">Department Name *</label>
                                <input type="text" class="form-control" v-model="departmentModal.form.name" 
                                       required aria-required="true" aria-label="Department name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Department Code *</label>
                                <input type="text" class="form-control" v-model="departmentModal.form.code" 
                                       required aria-required="true" aria-label="Department code">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Status *</label>
                                <select class="form-select" v-model="departmentModal.form.status" 
                                        required aria-required="true" aria-label="Department status">
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                    <option value="archived">Archived</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Head of Department</label>
                                <select class="form-select" v-model="departmentModal.form.head_of_department_id" 
                                        aria-label="Head of department">
                                    <option value="">Select Head</option>
                                    <option v-for="staff in availableHeadsOfDepartment" :key="staff.id" :value="staff.id">
                                        {{ staff.full_name }}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="departmentModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveDepartment">
                            <i class="fas fa-save"></i> {{ departmentModal.mode === 'add' ? 'Add Department' : 'Save Changes' }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 9: User Profile -->
            <div v-if="userProfileModal.show" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas fa-user"></i> Profile Settings
                        </div>
                        <button class="modal-close" @click="userProfileModal.show = false" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <div class="space-y-4">
                            <div class="form-group">
                                <label class="form-label">Full Name *</label>
                                <input type="text" class="form-control" v-model="userProfileModal.form.full_name" 
                                       required aria-required="true" aria-label="Full name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email *</label>
                                <input type="email" class="form-control" v-model="userProfileModal.form.email" 
                                       required aria-required="true" aria-label="Email" readonly>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Department</label>
                                <select class="form-select" v-model="userProfileModal.form.department_id" aria-label="Department">
                                    <option value="">Select Department</option>
                                    <option v-for="department in departments" :key="department.id" :value="department.id">
                                        {{ department.name }}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="userProfileModal.show = false">Cancel</button>
                        <button class="btn btn-primary" @click="saveUserProfile">
                            <i class="fas fa-save"></i> Save Profile
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL 10: Confirmation Modal -->
            <div v-if="confirmationModal.show" class="modal-overlay">
                <div class="modal-container" style="max-width: 500px;">
                    <div class="modal-header">
                        <div class="modal-title">
                            <i class="fas" :class="confirmationModal.icon || 'fa-question-circle'"></i>
                            {{ confirmationModal.title || 'Confirm Action' }}
                        </div>
                        <button class="modal-close" @click="cancelConfirmation" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <p class="text-center text-gray-700 mb-4">{{ confirmationModal.message || 'Are you sure you want to proceed?' }}</p>
                        <div v-if="confirmationModal.details" class="p-3 bg-blue-50 rounded mb-4">
                            <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                            {{ confirmationModal.details }}
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button class="btn btn-secondary" @click="cancelConfirmation">
                            {{ confirmationModal.cancelButtonText || 'Cancel' }}
                        </button>
                        <button class="btn" :class="confirmationModal.confirmButtonClass || 'btn-danger'" @click="confirmAction">
                            <i :class="confirmationModal.confirmButtonIcon || 'fa-check'"></i>
                            {{ confirmationModal.confirmButtonText || 'Confirm' }}
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Vue Application -->
    <script src="app.js"></script>
    
    <!-- Safety Check -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof Vue === 'undefined') {
                console.error('Vue.js failed to load!');
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = 'position:fixed;top:0;left:0;right:0;background:red;color:white;padding:20px;text-align:center;z-index:99999;';
                errorDiv.innerHTML = 'Vue.js failed to load. Please refresh the page or check your internet connection.';
                document.body.appendChild(errorDiv);
            }
        });
    </script>
</body>
</html>
